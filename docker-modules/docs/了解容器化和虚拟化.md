术语***容器化***与使用***容器***部署应用程序相关联。容器化并不是一个新概念，但如今在高效部署 docker 应用程序方面很流行。***如今，容器和码头工人已被Salesforce、Facebook、谷歌***和***Netflix***等不同公司广泛采用，以提高大型团队的生产力并提高资源利用率。让我们通过涵盖以下主题的详细信息来了解容器的概念、它们的演变以及它们如何成为当今软件开发不可或缺的一部分：

-   *容器之前的生命。*
-   什么是虚拟化？
    -   *虚拟化/VM 的优点和缺点？*
-   *什么是容器化？*
-   *什么是容器？*
-   *另外，什么是 LXC - Linux 容器项目？*
-   *我们什么时候应该选择 LXC 或 Docker 容器化？*
-   *我们什么时候应该使用容器化？*
-   *容器化与虚拟化。*

## 容器出现之前的生活

容器时代之前的应用部署大多是“***永无止境的安装配置***”。每当我们必须更早地构建和运行应用程序时，每次我们想出一个新的应用程序时，我们都必须经过三个步骤。

1.  ***使机器或虚拟机**(VM)**准备就绪**：首先，我们将通过安装操作系统 (OS) 来准备机器或任何 VM，使其与最新补丁保持同步，安装应用程序需要的所有依赖项，等等*
2.  ***安装应用程序代码并配置它**：一旦我们准备好机器，我们就会在上面安装应用程序代码并配置它，以便应用程序代码可以在这台机器上运行。*
3.  ***维护机器**：一旦机器准备就绪，我们必须在某种意义上维护它，以确保它具有所有最新的安装、补丁、安全更新等。*

现在考虑我们有一个像亚马逊这样的电子商务应用程序来使用这种传统方法。某些电子商务功能，如*产品列表、选择、添加到购物车、帐户*等，持续执行且数量巨大。为了使这个电子商务应用程序全天候正常运行，每个部门都应该借助大量服务器来执行其功能。

要使用上述方法维护这样的系统，我们会经常遇到一些严重的问题，例如：

1.  ***错过服务器更新**：由于要维护数百台服务器，因此在更新或打补丁时必然会出现错过某些服务器的情况。此外，所有这些服务器可能都没有相似的配置，因此一次或同时更新、修补所有服务器并不容易。在这样的系统中部署也很困难。*
2.  ***间歇性错误**：由于服务器和功能如此庞大，系统很容易出现间歇性错误。*
3.  ***多层故障排除**：一旦发生错误，我们有多层故障排除，因为我们有大量的服务器及其复杂的配置。*
4.  ***排除故障是一场彻头彻尾的噩梦**：对于如此大规模的操作，对整个系统进行故障排除将是一场彻头彻尾的噩梦。*

因此，由于所有这些问题和缺点，维护和运行此类系统变得困难，特别是当应用程序是时间关键的时候。

克服上述一些问题的解决方案之一是使用***虚拟化***。现在让我们更多地了解什么是虚拟化？

## 什么是虚拟化？

***虚拟化***是一种***在主机操作系统***之上***导入一个或多个客户操作系统***的技术。

这样，软件专业人员可以在不同的虚拟机上拥有多个操作系统。这些虚拟机将出现在同一台主机上，共享相同的资源，例如系统中的辅助内存和主内存。因此，虚拟化消除了运行多个客户操作系统对额外硬件资源的需求。我们可以在一台主机上拥有多个虚拟机。每个 VM 可能具有不同的配置，顾名思义，您将获得一台新的“***机器***”，但“***虚拟***”。

以下屏幕截图显示了实现虚拟化的虚拟机 ( *VM* )。![1-虚拟化的工作原理.png](https://www.toolsqa.com/gallery/Docker/1-How%20Virtualization%20works.png)

正如我们在上图中看到的，

1.  *我们有一个主机操作系统。此主机操作系统具有三个在 VM 上运行的**来宾操作系统**。*
2.  *该图像还显示**虚拟机**(VM) 在“来宾”操作系统上运行。这是因为它可以虚拟访问主机资源。*
3.  *虚拟化允许我们在同一台主机上运行多个操作系统。此外，由于资源共享，因此对基础设施的需求最小。*
4.  *此外，**管理程序**是创建和运行/执行虚拟机的计算机软件、固件或硬件。管理程序在其上运行/执行一个或多个虚拟机的计算机称为主机，每个虚拟机称为来宾机。要了解有关 Hypervisor 的更多信息，请参阅[**此处**](https://www.redhat.com/en/topics/virtualization/what-is-a-hypervisor)。*

但这个系统并非没有缺点。例如，同一主机上的 VM 会导致性能下降，因为 VM 使用大量系统资源。此外，使用虚拟化的 VM 需要时间来启动（*几乎一分钟*），这是相当长的时间，特别是在时间关键的应用程序中。

### ***虚拟化/VM 的优点和缺点***

下表描述了虚拟化/VM 的一些优点和缺点。

| ***虚拟机/虚拟化的优势***                                    | ***虚拟机/虚拟化的缺点***                            |
| ------------------------------------------------------------ | ---------------------------------------------------- |
| 同一台主机可以使用 VM 运行多个操作系统。                     | 由于我们在一台主机上运行多个虚拟机，因此性能会下降。 |
| 万一发生故障，恢复和维护很容易。                             | 我们用来实现虚拟化的管理程序效率不高。               |
| 由于对基础设施的需求并不多，因为它是共享的，因此成本降低了。 | 启动过程需要相对较长的时间。                         |

上面讨论的缺点/缺点，主要是我们可以通过使用一种称为“***容器***化”的新技术来克服性能。

## 什么是容器化？

***容器化是******操作系统虚拟化***的一种形式，其中我们利用称为“***容器***”的隔离用户空间来运行应用程序。这些容器使用相同的共享操作系统 ( *OS* )。

正如在前面的主题中所讨论的，需要我们安装应用程序、它们的依赖项、二进制文件等的传统系统效率不高。虚拟化消除了这些系统的一些缺点，但问题仍然主要存在于性能方面。

那么，为什么不拥有一个系统，我们可以将应用程序代码、支持二进制文件、应用程序所需的依赖项和配置代码等所有内容捆绑到一个实体中，并且只安装一次呢？

为了理解容器化，让我们在这里打个比方。假设 A 拥有大量印地语歌曲和电影收藏。他的一个朋友想要这个收藏品。现在 A 将把这个合集刻成 CD 送给他的朋友。假设 A 的另一个朋友需要相同的集合。现在，由于 A 已经准备好这一套，他将把它再次复制到一张新 CD 上，并送给任何想要它的人。每个数据副本称为***图像***。

下图显示了这样一个系统。当然，每台机器都会有不止一个这样的包或图像。![2-容器化使用Docker.png](https://www.toolsqa.com/gallery/Docker/2-Containerization%20using%20Docker.png)

上图显示了单位即。*App A、App B*等都是***Docker 镜像***。这些只不过是同一应用程序的副本。正如我们稍后将在本系列中看到的，图像是一种***静态***单元。如果我们需要执行或运行任何图像，我们需要将它们与另一个称为***容器***的单元相关联。

这样，我们可以有很多服务器和每个服务器中的多个图像。然后，当其中一个出现故障时，我们只需从其他服务器上挑选图像，将其恢复并使其正常工作。

这正是容器的作用。*容器*化（*使用容器的过程*）帮助我们管理我们的应用程序，并将它连同它的依赖项、代码、二进制文件捆绑到一个图像中。然后像实时货物容器一样，它允许我们打包、运输、修改、删除等。

使用容器，我们使用 可以部署在主机上的***Docker 镜像。***如果应用程序由于某种原因中断，我们可以轻松部署相同图像的副本。所以容器化可以帮助我们轻松排除故障。

与虚拟化不同，容器化高效且快速。因此，每当我们需要性能时，我们都可以采用容器化。

## 什么是容器？

***容器***化是使用容器来部署各种应用程序的技术。

那么什么是***容器***呢？

从技术上讲，***容器***是一个***标准的软件单元***，我们将应用程序源代码及其所有依赖项打包在其中，以便应用程序能够平稳可靠地运行，而不管我们使用的计算环境如何。

例如，在现实世界中，我们有在全球范围内运输货物的集装箱。这些运输容器中的每一个都有标准尺寸，并且都有编号。我们可以装卸货物、堆放这些集装箱、跨地区运输它们，甚至可以将它们从一种运输方式转移到另一种运输方式，例如从集装箱船转移到铁路平板车，而无需打开它们或不知道里面装的是什么。处理这些集装箱的系统是完全机械化的，起重机完成了所有工作。

集装箱的使用及其机械化处理降低了运输和储存成本以及港口的拥堵。

与运输容器一样，Docker 具有单独的软件单元，用于打包源代码及其所有依赖项，以将该单元传输到另一个计算环境或从一台机器转移到另一台机器。在 Docker 术语中，这些单元也称为容器。因此，我们可以将 Docker 容器想象成与海运集装箱一样，执行加载/卸载、堆叠、运输、转移等所有操作。

容器在 Linux（*本机系统*）上执行，并与该系统上的其他容器共享主机内核。容器谨慎且轻巧；除了可执行文件外，它们不占用额外的内存。

*容器的一个基本定义是它是一个运行的进程，其中封装了一些特性以使其与其他容器隔离，并在一定程度上与主机隔离。*

一个典型的容器如下。![3-理解容器.png](https://www.toolsqa.com/gallery/Docker/3-Understanding%20Containers.png)

在上图中，我们可以看到每个容器都是一个独立部署的单元，因为它有二进制文件和库。

容器也是流行的开发环境平台 Docker 的组织单元。当我们在 Docker 中构建镜像并运行它时，我们是在容器中进行的。因此，我们可以创建、移动、运输或销毁它，就像任何货船处理任何集装箱一样。

如果 Docker 镜像是模板，那么容器就是该镜像或模板的副本。因此，我们可以拥有同一图像的多个副本或容器。

***在一个系统中，每个容器都与自己的私有空间和文件系统一起运行或交互***。这个文件系统是通过镜像提供给容器的。因此，作为容器一部分的映像包括我们运行应用程序所需的一切——应用程序二进制文件、代码、依赖项、运行时环境等——代码或二进制文件、运行时、依赖项以及所需/需要的任何其他文件系统对象。

***容器是轻量级的***。它们运行一个独立的进程，并且不会比任何其他正常的可执行文件占用更多的内存，因为容器在 Linux 上本机运行并共享主机的内核。

例如，使用 LXC（*Linux 容器*），我们可以改变扩展和运行应用程序的方式。LXC 项目使开发人员可以使用基本操作系统容器模板，并提供一套全面的容器生命周期管理工具。

我们有两种类型的容器：

1.  *Docker 容器*
2.  *Linux 容器或 LXC。*

我们将在接下来的文章中详细学习 docker 容器。现在，让我们简要讨论一下 LXC。

## 什么是 LXC - Linux 容器项目？

容器并不是一个新概念。Linux 以及 Docker 平台都在使用它。让我们在本节中比较 Linux 容器 ( *LXC* ) 和 Docker 容器。

下图显示了 LXC 和 docker 容器之间的比较。![4-LXC 和 Docker.png](https://www.toolsqa.com/gallery/Docker/4-LXC%20and%20Docker.png)

LXC是一种容器技术，为我们提供了各种轻量级的Linux容器。另一方面，Docker是一种基于容器的技术，我们可以把它看作是一个单一的应用程序虚拟化引擎。

我们不能将 Docker 容器视为像 LXC 那样的轻量级 VM。这是因为它们主要限于单个应用程序。

我们可以登录LXC容器，把它当作操作系统，甚至可以安装应用和服务。它将像预期的机器一样工作。但是我们不能为 Docker 容器做这样的事情。这意味着我们不能像在 LXC 中那样登录到 Docker 容器并像在 Linux 容器中那样工作。因此，虽然我们可以将 LXC 本身视为一台机器，但 Docker 并非如此。

Docker 不支持服务、守护进程、Syslog、cron 作业等。但是 LXC 拥有所有这些。

### ***我们什么时候应该选择 LXC 或 Docker 容器化？***

关于容器以及我们应该选择哪种方法，没有正确或错误的方法。这一切都取决于用户。docker 方法是独一无二的，需要自定义方法。最后，我们找到了从安装、运行到扩展容器每个阶段完成任务的docker方式。

同时，LXC 为我们提供了广泛的能力和自由来构建和运行我们的容器。

## 我们什么时候应该使用容器化？

我们使用容器的一些原因是：

-   *容器为应用程序提供逻辑打包机制。此外，我们可以从应用程序运行的环境中抽象出应用程序。*
-   *基于容器的应用程序可以部署在任何地方，无论目标环境是开发人员的笔记本电脑、公共云还是私有中心。这是因为应用程序与其环境分离。*
-   *容器允许开发人员创建与其余应用程序隔离并且可预测和在任何地方执行的环境。*
-   *基于容器的应用程序是可移植的，而且效率更高。它还可以更好地利用机器资源。*

## 容器化与虚拟化

尽管容器和虚拟机都允许我们在主机内运行多个操作系统，但虚拟机会在主机上创建许多来宾操作系统，正如我们从前面部分的图表中看到的那样。另一方面，容器化不会创建多个操作系统。相反，它为每个应用程序创建大量容器。

下表显示了容器和 VM 之间的这些差异。

| ***容器***                                     | ***虚拟机 (VM)***                                |
| ---------------------------------------------- | ------------------------------------------------ |
| 在主机上创建多个容器                           | 它在主机上创建多个来宾操作系统 ( *OS )。*        |
| 容器很轻。                                     | VM 是重量级的。                                  |
| 除了执行应用程序之外，容器不会占用额外的内存。 | 由于 VM 共享主机的大部分资源，因此内存开销很大。 |
| 容器更便携、更快，并且更有效地扩展。           | 虚拟机速度较慢且效率较低。                       |

## 关键要点

-   *在容器出现之前，部署应用程序然后对其进行维护是一个漫长而繁琐的过程，并且经常会导致错误。*
-   *很难跟踪错误，尤其是在涉及太多机器的大型系统中。*
-   *虚拟化部分克服了这些问题，能够在单个主机上运行多个操作系统。但是在这种情况下性能是一个大问题。*
-   *容器解决了所有这些问题。容器将应用程序二进制文件、它们的依赖项和其他所需文件捆绑到一个图像中。*
-   *每当我们需要主机上的应用程序时，我们都会将此映像部署到容器中。*
-   *当应用程序中断或出现任何其他问题时，我们可以直接更换另一个副本。*
-   *此外，由于容器是独立的，就资源共享而言，宿主机的压力不大，而且性能更快。*
-   *Linux 容器 (LXC) 以及 Docker 应用程序主要使用容器。*