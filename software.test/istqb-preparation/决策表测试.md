## 什么是决策表测试？

我们经常测试动作是多个输入组合的基础的应用程序。例如，如果你正在申请贷款，那么获得贷款的资格将取决于几个因素，例如年龄、月薪、所需贷款金额等。因此，这些组合被称为业务逻辑，应用程序功能正是基于这些组合工作。决策表是一种黑盒测试技术，用于测试这些复杂的业务逻辑。它是输入条件和结果操作的表格表示。此外，它显示了原因和影响。因此，这种技术也被称为因果表。

| 条件        | 第一个输入 | 第二输入 | 第三输入 |
| ----------------- | ---------------- | -------------- | -------------- |
| 有薪水吗？      | 是             | ñ            | 是           |
| 月收入 > 25000  | ñ              | 是           | 是           |
| IT 退货可用吗？ | 是             | ñ            | 是           |
| 行动        |                  |                |                |
| 贷款资格        | ñ              | ñ            | 是           |

因此，这是一个简单的决策表，其中薪水、月收入和IT 回报是输入条件。除了上述之外，它们的组合导致最终行动(贷款资格)。

测试组合可能是一项挑战，尤其是在组合数量巨大的情况下。此外，测试所有组合实际上是不可行的，因为它不具有成本效益和时间效益。因此，我们必须满足于只测试一小部分组合。也就是说，这项技术的成功取决于我们对组合的选择

因此，让我们深入研究实际示例并查看创建决策表的方法和最佳实践。

### 如何创建决策表？

决策表适用于输入条件和操作。也就是说，我们创建了一个表，其中最上面的行是输入条件，同样地，下面的行是结果动作。同样，这些列对应于这些条件的唯一组合。

#### 决策表的常用符号

-   对于条件
    -   Y 表示条件为真。我们可以将其描述为T或1。
    -   N 表示条件为 False。我们也可以将其称为F或0。
    -   -这意味着条件无关紧要。我们可以将其表示为N/A。
-   对于行动
-   X表示应该采取行动。我们也可以将其称为Y或T或1。
-   空白表示不应发生操作。我们也可以将其表示为N或F或0。

现在我们已经清楚了符号，让我们考虑下面的场景。

考虑一个要求用户在线填写个人贷款申请的银行应用程序。根据输入，应用程序将实时显示贷款是否会获得批准、拒绝或需要访问分行进行进一步的文件和讨论。假设贷款金额为5L。除此之外，我们不会更改它以降低此场景的复杂性。

因此，该应用程序具有以下业务规则：

-   如果你受薪并且你的月薪大于或等于 75k，那么你的贷款将被批准。
-   如果你是受薪的并且你的月薪在 25k 到 75k 之间，那么你需要去分行做进一步的讨论。
-   如果你受薪并且你的月薪低于 25k，那么你的贷款将被拒绝。
-   如果你没有薪水并且你的月薪大于或等于 75k，那么你需要访问分行进行进一步讨论。
-   如果你没有薪水并且你的月薪低于 75k，那么你的贷款将因此被拒绝。

我们遵循四个步骤来创建决策表。随后，让我们根据上述场景来看看这些步骤。

第 1 步 - 确定所有可能的条件

因此，可能的条件如下：

-   首先，这个人是否有薪水。
-   第二，申请人的月薪。

第 2 步 - 识别系统中可能发生的相应动作

因此，可能的行动是：

-   贷款是否应获批准(可能值为 Y 或 N)
-   如果贷款被拒绝(可能的值 Y 或 N)
-   是否应要求申请人提供进一步的文件和讨论(可能的值 Y 或 N)

第 3 步 - 生成所有可能的条件组合

这些组合中的每一个构成决策表的一列。首先，让我们看看每个条件有多少变化：

-   条件 1 -此人是否受薪 - 2 种变化：Y 或 N
-   条件 2 -申请人的月薪 - 3 种变化：<25k，25k - 75k 和 >75k

随后，基于此，我们的总组合将变为 23 = 6

-   第一种组合：薪水 = 是，月薪 < 25k
-   第二种组合：薪水 = 是，月薪 25k - 75k
-   第三种组合： 薪水 = 是，月薪 >75k
-   第四种组合：薪水 = 否，月薪 < 25k
-   第 5 种组合：薪水 = 否，月薪 25k - 75k
-   第 6 种组合： 薪水 = 否，月薪 >75k

此时，我们的决策表将如下所示：

| 条件           | 组合#1 | 组合#2 | 组合#3 | 组合#4 | 组合#5 | 组合#6 |
| -------------------- | ------------ | ------------ | ------------ | ------------ | ------------ | ------------ |
| 有薪水吗？         | 是         | 是         | 是         | ñ          | ñ          | ñ          |
| 月收入 < 25k       | 是         | 那         | 那         | 是         | 那         | 那         |
| 月收入 25k - 75k   | 那         | 是         | 那         | 那         | 是         | 那         |
| 月收入 >75k        | 那         | 那         | 是         | 那         | 那         | 是         |
| 行动           |              |              |              |              |              |              |
| 贷款获批           |              |              |              |              |              |              |
| 贷款被拒绝         |              |              |              |              |              |              |
| 进一步的文档和访问 |              |              |              |              |              |              |

第 4 步 - 根据条件组合确定操作

随后，下一步将根据为系统定义的业务逻辑识别每个组合的操作。

-   第一种组合-行动 = 贷款被拒绝
-   第二次组合 -行动 = 进一步的文档和访问
-   第三次组合 -行动 = 贷款已批准
-   第 4 种组合 -行动 = 贷款被拒绝
-   第 5 种组合 -行动 = 贷款被拒绝
-   第 6 次组合 -行动 = 进一步的文档和访问

在此之后，我们的最终决策表将如下所示：

| 条件           | 组合#1 | 组合#2 | 组合#3 | 组合#4 | 组合#5 | 组合#6 |
| -------------------- | ------------ | ------------ | ------------ | ------------ | ------------ | ------------ |
| 有薪水吗？         | 是         | 是         | 是         | ñ          | ñ          | ñ          |
| 月收入 < 25k       | 是         | 那         | 那         | 是         | 那         | 那         |
| 月收入 25k - 75k   | 那         | 是         | 那         | 那         | 是         | 那         |
| 月收入 >75k        | 那         | 那         | 是         | 那         | 那         | 是         |
| 行动           |              |              |              |              |              |              |
| 贷款获批           | 那         | 那         | 是         | 那         | 那         | 那         |
| 贷款被拒绝         | 是         | 那         | 那         | 是         | 是         | 那         |
| 进一步的文档和访问 | 那         | 是         | 那         | 那         | 那         | 是         |

现在我们已经创建了决策表，下一步是什么？因此，我们必须使用这个决策表来为这些组合中的每一个生成测试用例。这些动作将是我们的预期输出。随后，我们会将其与实际结果进行比较，以通过或失败[测试用例](https://blog.testlodge.com/what-is-a-test-case-in-software-testing/)。

除了上述之外，决策表测试的典型最小覆盖标准是表中的每个决策规则至少有一个测试用例。也就是说; 它通常涉及涵盖所有条件组合。除此之外，我们将覆盖率测量为至少一个测试用例测试的决策规则数除以决策规则总数。因此，我们将其表示为百分比。

### 陷阱：

总而言之，我们已经看到，当我们必须测试复杂的业务规则时，决策表测试非常有用。但是，与其他所有技术一样，决策表也存在我们应该知道的缺陷。

-   捕获所有组合和动作 - 首先， 确保我们已捕获所有输入组合和动作通常具有挑战性。换句话说，大型系统中有几种组合很容易被遗漏。除此之外，我们应该记住，决策表的成功完全取决于我们正确捕捉这些组合的能力。
-   冗余组合——其次， 如果我们只按照排列，决策表也可能引入冗余组合。例如，如果条件的数量是六个，并且每个条件可以取三个值。结果，我们的总组合将变为 3 3 3 3 3 3 = 729 ！你认为我们可以在测试用例中涵盖所有这些组合吗？除非有无限的时间和金钱，否则这几乎是不可能的！那么在这种情况下我们该怎么办呢？任何决策表的最低要求是每个条件的变化至少被覆盖一次。因此，如果你忽略所有排列，则有六个条件，每个条件有三个变化。反过来，这意味着 18 种组合(63) 至少可以涵盖这些变体中的每一个。此外，你的一个组合也有可能涵盖多个条件。因此，我们可以进一步减少组合。此外，在选择这些组合时，我们需要确保所有操作的选择至少发生一次。

例如，如果你查看我们之前的示例，你是否意识到组合 4 和 5 是多余的？换句话说，没有必要同时保留两者。更重要的是，业务规则是说非受薪人员的薪水低于75k，并且不需要进一步分割！

-   边界和边缘条件 - 最后， 假设我们已经处理了所有正确的事情和陷阱。在我们之前的示例中，一个测试条件是 Salary <25k，另一个是 Salary 在 25k - 75k 之间。仅应用决策表，你可以将输入值作为 20k 和 50k。反过来，这将满足决策表的要求。但是，如果你还记得的话，我们会在边界条件中得到更多错误。事实上，这里完全没有！除此之外，由于这里涉及到一个范围，我们也可以使用等价分区以及边界值。如果你想知道为什么我们会在边界条件中得到更多错误，请阅读我们关于边界值分析的文章。此外，你还可以了解如何将等价分区与边界值一起应用。

此外，仅靠决策表不足以捕捉所有缺陷。因此，我们应该尽可能将其与边界值和等价划分技术一起使用。

在我们前面的示例中，对于 25k 输入，Salary 的输入条件可以是 24999、25000 和 25001。

但是，即使你提供相同的输入，当系统行为发生变化时会发生什么？例如，如果你多次输入错误的密码，你将收到一条提示你的密码不正确的消息。但是，一旦你的用户 ID 被锁定，你将收到一条不同的消息，你将无法再访问你的帐户。最后，即使输入条件保持不变，这一切也会发生。因此，你现在会发现我们无法使用决策表来处理这种情况。因此，我们将需要学习另一种称为状态转换测试的技术，该技术将涵盖此类情况。更多内容在下一个教程中！