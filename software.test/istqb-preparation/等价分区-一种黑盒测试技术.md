## 什么是等价分区？

等价分区是一种适用于所有测试级别的黑盒测试技术。我们大多数不知道这一点的人仍然在没有意识到的情况下非正式地使用它。但是有明确的规则和最佳实践可以使它更有用和更科学。

该技术背后的想法是将一组测试条件分成可以被视为相同的组或组。分区通常发生在测试对象上，包括输入、输出、内部值、时间相关值和接口参数。等价分区也称为等价类分区。它适用于某些假设：

-   系统将以相同的方式处理分区内的所有测试输入变化。
-   如果输入条件之一通过，则分区内的所有其他输入条件也将通过。
-   如果输入条件之一失败，则分区内的所有其他输入条件也将失败。

等价划分的成功和有效性在于上述假设的合理程度。我们将在文章的后半部分通过这些假设成立或失败的实际示例详细讨论这一点。

### 如何进行等价分区？

现在我们对等价分区有了一个清晰的认识，让我们讨论如何有效地进行分区。

考虑一下你正在填写健身房会员资格的在线申请表。获得会员资格最重要的标准是什么？当然是年龄！大多数健身房的年龄标准为 16-60 岁，你可以在不需要任何监督的情况下独立获得会员资格。如果你查看下面的会员表格，你需要先填写年龄。之后，根据你是否在16-60之间，你可以走得更远。否则，你将收到无法获得会员资格的消息。

![健身房形式](https://toolsqa.com/gallery/ISTQB%20Certification/1.gym_form.webp)

如果我们要测试这个age字段，常识告诉我们需要测试16-60之间的值，小于16的值，以及大于60的值。很容易弄清楚，但不太明显的是我们需要测试多少组合才能说该功能安全工作？

-   <16 有 0-15 的 15 种组合，如果你测试负值，则可以添加更多组合
-   16-60有45种组合
-   \>60 有 40 个组合(如果你只取到 100 个)

我们应该测试所有这 100 多种组合吗？一定！如果我们拥有世界上所有的时间，那么成本根本不是问题。实际上，我们永远无法做到这一点，因为测试时间很短。

此外，我们需要确保创建具有最大测试覆盖率的最小测试用例。这就是测试技术发挥作用的地方。让我们看看等价分区如何解决这个问题。

等价分区的第一步是将输入值划分(分区)为有效和无效分区的集合。继续相同的示例，我们的分区将如下所示 -

![等价划分](https://toolsqa.com/gallery/ISTQB%20Certification/2.Equivalence%20Partitioning.webp)

有效分区是被测试的组件或系统应该接受的值。此分区称为“有效等价分区”。

Invalid Partitions 是被测试的组件或系统应该拒绝的值。此分区称为“无效等价分区”。

那么知道了这些分区之后我们应该怎么做呢？该技术的前提是假设分区内的所有值都将以相同的方式运行。因此，16-60 之间的所有值都将以相同的方式表现。任何小于 16 和大于 60 的值也是如此。因此，我们只测试每个分区中的 1 个条件，并假设如果它有效/无效，则其余条件的行为方式相同。

我们在这种情况下的测试条件可能是：

-   输入年龄 = 5
-   输入年龄 = 20
-   输入年龄 = 65

如果你看到，这 3 个测试条件将涵盖 100 多个其他情况下不可能的条件。通过应用这种技术，我们显着减少了测试用例，但覆盖率仍然很高。

如果需要，这些分区可以进一步划分为子分区 -让我们通过扩展 Gym 成员资格的相同示例来理解它。假设你是 16-20 岁或 55-60 岁，在提交会员表格时还需要附上你的年龄证明。在这种情况下，我们的分区将如下所示 -

![等价分区技术示例](https://toolsqa.com/gallery/ISTQB%20Certification/3.Equivalence%20Partitioning%20Technique%20Example.png)

VP1、VP2 和 VP3 都是基于附加要求的有效子分区。那么我们的测试条件现在如何呢？

-   输入年龄 = 5
-   输入年龄 = 18
-   输入年龄 = 30
-   输入年龄 = 58
-   输入年龄 = 65

这五个条件将涵盖我们对年龄字段的所有要求。当然，你可以根据需要使用每个分区中的任何其他值。

我们需要确保我们的分区是唯一的并且不重叠。你采用的每个值都应该只属于一个分区。

当我们使用无效的等价分区时，它们的测试应该单独进行，而不是与其他分区或负输入结合。例如，如果你有一个接受 5-15 个字符 (az) 的名称字段。如果你尝试输入abc@ ，则会出现错误，但我们不知道错误是因为我们输入了四个字符，还是因为我们使用了“ @ ”。因此，结合两个无效分区或负值，我们最终掩盖了实际的根本原因。

为了达到 100% 的覆盖率，我们应该确保我们的测试用例覆盖所有已识别的分区。我们可以通过至少一个值测试的分区数除以识别的分区总数来衡量等效分区测试覆盖率。

### 陷阱

既然我们知道了等价划分有多么有用，让我们试着理解它的一些陷阱。

等价分区的成功取决于我们创建正确分区的能力。听起来很简单吧？如果你深入挖掘，你会意识到我们正在将应用程序作为一个黑盒进行测试。因此，我们创建分区的能力限制了需求中的内容。我们不了解设计以及开发人员会编写什么代码。

如果我们以 Gym 为例 -假设开发人员按照以下逻辑编写-

如果(年龄 > 16 和年龄 <60 )

{ 允许用户提交表单}

你看到这里的问题了吗？要求说年龄应该大于或等于16。如果我们按照分区规则，我们可能会错过检查16作为值。此外，分区不适合其他负值，例如输入非数字字符(@、abc 等)。因此，虽然分区可以帮助我们最小化测试用例以最大化覆盖率，但我们需要注意它并没有涵盖成功测试应用程序所需的所有组合。

它结束了我们关于等价划分的讨论。

后续文章将讨论使用边界值分析等技术来掩盖单独使用分区的一些缺陷。