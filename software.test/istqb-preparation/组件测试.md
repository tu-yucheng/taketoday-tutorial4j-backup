## 什么是单元/组件测试？

根据[ISTQB](https://www.istqb.org/)，组件测试是对单个硬件或软件组件的测试。这些单元中的错误检测简单且耗时较少，因为该软件包含多个单元/模块。但是，一个单位的产出可能会成为另一单位的投入。因此，如果一个单元产生的错误输出作为第二个单元的输入，那么它也会产生错误输出。如果第一个单元包含未更正的错误，则所有集成软件组件都可能产生意外输出。因此，所有软件单元的测试都是使用组件测试独立进行的，以避免这种情况。

以下是组件测试的一些关键注意事项：

-   软件应用程序的单元测试的性能发生在应用程序的开发(编码)期间。
-   开发人员通常执行单元测试。
-   在 SDLC 中，单元测试是在集成测试之前执行的第一级测试。
-   组件测试可以是由开发人员执行的[白盒或黑盒测试技术。](https://www.toolsqa.com/software-testing/white-box-and-black-box-testing/)  大多数文章将组件测试与组件集成测试混为一谈。组件测试发生在单个组件/单元上。而组件集成测试发生在涉及两个组件时，其中一个组件充当[存根](https://www.toolsqa.com/blogs/differences-between-stubbing-and-mocking/)或驱动程序。

![测试金字塔 - 单元测试和组件测试级别](https://toolsqa.com/gallery/ISTQB%20Certification/1.Testing%20Pyramid%20-%20Unit%20Test%20&%20Component%20Testing%20Level.jpg)

[你可以在我们的文章“集成测试](https://www.toolsqa.com/software-testing/integration-testing/)”中详细了解组件集成测试。

### 组件测试的目标是什么？

组件测试的目标包括：

-   降低风险：首先，它验证应用程序的每个单元。开发人员找出代码中的错误并修复它。因此，它从根本上减少了风险的机会。
-   验证组件的功能和非功能行为是否符合预期：第二个目标是确认组件的功能和非功能属性是否正常工作。换句话说，它确保它们的设计和规格符合预期。它可能包括功能性(例如，计算的正确性)和非功能性特征(例如，搜索内存泄漏)。
-   建立对组件质量的信心：第三，由于组件测试是在单元级别上进行的，因此大多数错误都会在自己编码时被检测和删除。它增强了对产品的信心，即在进一步测试中将有更少的错误。
-   查找组件中的缺陷：其主要目标是查找源代码中的错误。此外，它还验证程序中使用的函数、控制流、数据结构等。
-   防止缺陷逃逸到更高的测试级别： 最后，在组件测试中，开发人员检测并消除编码错误。因此，它减少了更高级别测试中错误的存在。

组件测试通常与系统的其他部分隔离开来。它主要依赖于[SDLC 模型](https://www.toolsqa.com/software-testing/software-development-life-cycle/)和系统，可能需要mock 对象、服务虚拟化、harness、stub 和驱动程序。组件测试可以涵盖功能(例如，计算的正确性)、非功能特性(例如，搜索内存泄漏)和结构属性(例如，决策测试)。

在迭代开发模型(例如，敏捷)中，构建(代码更改)的频率非常高。因此，新版本总是存在破坏现有功能的风险。因此，组件测试对于确保开发人员在将代码发送给测试团队之前发现其代码中的任何缺陷变得至关重要。最佳实践是自动化组件测试并在开发人员每次签入新代码时运行它们。

### 组件测试的测试依据是什么？

测试基础是编写测试用例和测试分析所需的信息或文档的来源。测试的基础必须定义良好且结构充分，以便可以快速识别测试用例源自的测试条件。

例如，对于组件测试，测试依据可以如下：

-   每个组件的详细设计
-   每个组件的代码块
-   定义组件如何从上游组件接收数据的数据模型。以及它将如何将数据传递给下游集成组件。
-   此外，它还包括定义组件架构的组件规范。

### 组件测试的测试对象是什么？

测试对象描述了一个测试级别应该测试什么。它指的是组件、集成组件或整个系统。

对于组件测试，测试对象可以如下：

-   组件、单元或模块： 单个开发人员创建的每个组件或单元都应由同一开发人员进行单元测试。
-   代码和数据结构：这可能包括最佳编码实践，并确保代码不会破坏其他一些共享组件。
-   类：这包括测试每个类，并确保使用正确的面向对象原则。例如，对于银行应用程序，使用封装至关重要，因此另一个类不能直接访问一个类中的任何数据。它可以最大限度地减少对应用程序的安全威胁。
-   数据库模块：数据库保存在用户界面中输入的数据(例如，新客户注册)。因此，数据库也应该与前端一起在组件测试中进行测试。

### 组件测试中的典型缺陷和失败是什么？

组件测试用于验证软件编码过程中产生的代码，它负责评估特定源代码单元的正确性。其中识别出的典型缺陷如下：

-   不正确的功能：通常会导致发现错误的功能。例如，当客户在亚马逊网站上应用折扣券时应该返回折扣值的组件没有返回任何折扣值。
-   数据流问题：一个组件经常将一些数据传递给另一个集成组件，而这种数据流往往会导致缺陷。例如，当客户应用折扣代码时返回折扣值的折扣组件只接受字母数字字符。创建这些折扣的组件是创建带有特殊字符的折扣代码。另一方面，如果折扣组件使用这些折扣代码，则会导致数据流问题。
-   不正确的代码和逻辑：它识别逻辑的任何问题。例如，当购物车中有三件商品时，亚马逊网站上的“买二送一”逻辑有效。但是，当购物车中有四件东西时，它就不起作用了。   在组件测试期间记录的缺陷会在那里修复，并且没有针对单元测试缺陷遵循的正式缺陷管理流程。当根本原因分析未决时，如果缺陷很复杂且难以立即修复，开发人员仍然可以记录缺陷。例如，开发人员正在开发一个组件。然而，在组件测试期间，他发现了一个关键缺陷，导致他的任务溢出到下一个 sprint。在这种情况下，需要记录缺陷。反过来，这可以让 Scrum Master 或 Dev Leads 了解关键缺陷的识别，并传递需要时间才能修复的信息。

### 何时以及由谁进行组件测试？

-   它发生在集成测试之前。
-   这是在系统上执行的第一级测试。
-   开发人员通常在代码传播到更高设置之前在其本地环境中进行组件测试。
-   有时，根据适当的风险级别，不同的程序员执行组件测试，从而引入独立性。

### 组件测试的方法和职责

通常，编写代码的开发人员执行组件测试。他们应该在继续开发另一个组件之前进行此测试。一旦在组件测试中发现缺陷；开发人员可以在移动到另一个组件之前修复所有这些，或者他可以在修复和开发之间交替进行。[测试驱动开发 (TDD)](https://www.toolsqa.com/cucumber/test-driven-development-tdd/)是测试优先方法的一个示例(在开发之前先编写测试)。尽管 TDD 的起源是极限编程，但其他形式的敏捷也使用它。

测试驱动开发中遵循的步骤：

1.  创建测试：在 TDD 中，第一步是创建失败的测试用例。例如，如果你正在创建一个登录组件，你将编写一个测试用例，说明输入有效的用户 ID 和密码以成功登录。
2.  运行测试以检查测试是否失败：测试用例将在执行时失败，因为编码仍然不完整。
3.  编写代码：开发人员编写代码以确保测试用例通过。代码的目标是通过测试用例，这是代码的唯一重点。
4.  运行测试：如果测试用例通过，开发者将继续下一个特性；否则，他将着手重构代码。
5.  重构代码：如果测试用例失败，则需要修改代码。在某些情况下，测试用例会通过，但可能会出现代码重构再次发生的性能问题。
6.  重复循环：重复整个过程(步骤 1-5)，直到代码重构以通过测试用例。

### 单元测试工具

有几种自动化工具可用于帮助进行组件测试。我们将在下面提供一些示例：

-   Jtest： Parasoft Jtest 通过提供一组工具(如静态分析、单元测试、代码覆盖率等)来加速 Java 软件的开发，从而最大限度地提高质量并最大限度地降低业务风险。通过自动化单元测试的这些耗时方面，它使开发人员可以专注于业务逻辑并创建更有意义的测试集。
-   Junit： Junit 是用于 Java 编程语言的开源测试工具。它提供断言来识别测试方法。该工具首先测试数据，然后将其插入代码片段。
-   NUnit : NUnit 是一个所有 .net 语言都广泛使用的单元测试框架。它是一个开源工具，允许你手动编写脚本。它支持基于并行运行的数据的测试。
-   JMockit： JMockit 是一个开源组件测试工具。它是一个具有线路和路由指标的代码覆盖率工具。该工具提供线路覆盖、路线覆盖和数据覆盖。
-   EMMA： EMMA 是一个开源工具包，用于分析和报告用 Java 语言编写的代码。Emma 承认覆盖类型，例如方法、行、基本块。它的基础是Java。因此，它没有外部库依赖，可以访问源代码。
-   PHPUnit : PHPUnit 是一个供 PHP 程序员使用的单元测试工具。取一小部分称为单元的代码并分别测试每一个。该工具还允许开发人员使用预定义的确认方法来确认系统以某种方式运行。

相信到目前为止，你已经清楚地了解了组件测试及其在确保产品整体质量方面的重要性。它确保“每个人都拥有质量”，而不仅仅是测试团队。