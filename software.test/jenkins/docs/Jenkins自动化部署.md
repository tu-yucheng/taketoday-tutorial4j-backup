我们知道部署是[软件开发生命周期](https://www.toolsqa.com/software-testing/software-development-life-cycle/)的重要组成部分之一，使用它可以使应用程序/组件可用于测试(通过部署在测试服务器上)并最终提供给最终用户(通过部署在生产服务器上) ). 然而，随着发布频率的增加，手动部署所有这些发布变得非常麻烦，因此迫切需要自动化部署。作为CI/CD管道 中最常用的集成和部署工具之一，Jenkins 提供了根据特定触发器和条件自动执行这些频繁部署的功能。因此，我们称它们为Jenkins自动化部署。让我们更详细地了解 Jenkins 自动化部署的概念，并通过涵盖以下主题中提到的详细信息，了解如何在Jenkins的帮助下实现同样的目标：

-   什么是自动化部署？
    -   为什么需要自动化部署？
-   如何使用Jenkins实现自动化部署？
    -   如何安装部署插件？
    -   以及，如何向 Jenkins 作业添加部署步骤？

## 什么是自动化部署？

自动化部署是一种实践，它允许我们在从初始开发到生产的各个开发阶段自动或半自动地完全交付代码。自动化部署使部署更加高效和可靠。此功能尽可能自动化，以确保代码从开发到生产的路径中没有损坏的功能。

自动化部署需要一种称为“部署管道”的东西——从GIT等版本控制环境中获取代码并自动将其提供给最终用户的过程。

根据跨环境的自动化覆盖级别，我们可以将自动化部署分为以下方法或类别：

-   持续集成：使用持续集成方法，我们每天集成代码更改。每个集成都将被自动验证和测试以检测可能的错误。
-   持续交付：持续交付是使构建或代码随时准备部署的做法。我们可以将持续交付视为持续集成的扩展，其中它自动发布到暂存环境。使用持续交付，我们可以随时确保构建的“生产就绪”版本。
-   持续部署：使用持续部署方法，我们完全自动化部署管道的整个过程。使用这种方法，我们可以自动将源代码中的每个小更改部署到生产环境中。虽然这种方法是最快的部署方法，但它也会因错误而导致停机。

### 为什么需要自动化部署？

我们讨论了自动部署。现在，出现一个问题，为什么我们要自动化部署？自动化部署对我们有帮助的原因有很多。所以下面，我们讨论这些原因：

-   减少出错的可能性：当我们手动部署代码时，很容易出错。此外，纠正错误和重复部署代码会损害员工士气。因此，自动化部署过程可以显着减少错误。
-   节省时间：自动化部署可以节省时间。手动部署是一个非常耗时的过程，通常会占用开发人员和测试人员的大量时间，否则我们可以更好地利用这些时间。所以当我们使用自动化部署时，我们会在特定的时间安排构建，从而节省时间。
-   一致性和可重复性：我们只需要配置一次自动化部署，然后每次发布时流程都是一致的。由于这种一致性，我们可以诊断错误并减少故障。

## 如何使用Jenkins实现自动化部署？

要使用 Jenkins 实现自动化部署，我们需要按照以下步骤进行：

1.搭建持续集成服务器

-   首先选择一个现有的服务器，比如 Jenkins。
-   从 GIT 等源代码管理链接到源代码，以便构建应用程序。它将设置第一个构建。
-   确保每次签入源代码管理时，都会触发构建。

2. 设置测试套件

-   我们需要为我们添加的每个测试套件设置一个单独的构建。然后我们将每个测试套件链接到构建。当测试套件在构建之后执行时，我们可以看到错误，因为有问题的代码将在第一个识别出它的测试处停止并且不会继续进行。

3.增加一个部署步骤

-   作为部署步骤，我们设置一个运行脚本的构建，以将应用程序部署到持续集成服务器上的暂存或测试环境。但在此之前，请确保构建仅在所有测试都通过后才运行。

重新升级步骤 1 和步骤 2，我们已经在之前的文章中介绍过。在本文中，我们将进一步介绍一旦我们创建构建并在其上执行一组测试用例，我们就可以将该构建部署到特定服务器上。为了完成这个任务，Jenkins 提供了各种插件；我们将介绍其中一个插件的设置和详细信息，并完成设置以在 tomcat 服务器上部署应用程序。但是，首先，让我们看看如何在 Jenkins 中实现自动化部署？

### 如何安装部署插件？

[Jenkins](https://www.jenkins.io/)为我们提供了许多插件，我们可以使用这些插件在成功构建应用程序后将构建文件传输到相应的应用程序或 Web 服务器。例如，“部署到容器”插件。这个特定的插件采用war 或 ear 文件，然后在构建结束时处于运行状态

我们必须按照给定的步骤来使用这个插件：

第 1 步：转到管理 Jenkins，然后管理插件。选择/选择可用选项卡并搜索“部署到容器”插件。

![检查部署容器插件](https://www.toolsqa.com/gallery/Jenkins/1.Check%20for%20Deploy%20a%20container%20plugin.png)

在这里我们看到搜索到的插件不可用。如果它可用，那么我们安装它并单击返回首页。

现在它不可用，我们再次在“已安装”选项卡下搜索它。我们可以在下面看到列出的插件：

![安装了“部署容器”插件](https://www.toolsqa.com/gallery/Jenkins/2.'Deploy%20a%20container'%20plugin%20installed.png)

如果插件安装未完成，请按照屏幕上的说明进行安装。

### 如何向 Jenkins 作业添加部署步骤？

一旦插件的设置/安装完成，我们就可以通过将 war/ear 文件部署到容器来运行构建。为此，请执行以下步骤：

第 1 步：转到你创建的构建项目，然后单击 面板左侧的Configure选项。

第 2 步：下一步是在配置页面上向下滚动 并单击“ 添加构建后操作” 按钮。选择 将 war/ear 部署到容器选项。

![自动部署设置](https://www.toolsqa.com/gallery/Jenkins/3.Settings%20for%20Automated%20Deployment.png)

在上面的屏幕中，我们选择“ Deploy war/ear to a container ”选项，然后单击“ Save ”按钮。

第 3 步：在 Deploy war/ear to a container部分，我们输入需要部署文件的服务器信息。我们可以在下面的屏幕上看到它。

![将 war/ear 文件部署到容器以进行自动部署](https://www.toolsqa.com/gallery/Jenkins/4.Deploy%20war%20ear%20file%20to%20container%20for%20Automated%20Deployment.png)

在这里连同其他详细信息，我们选择适当的容器(上面屏幕中的 Tomcat)，然后提供其凭据和 URL。

第 4 步： 单击“ 保存” 按钮。

第 5 步：一切完成后，我们转到所选项目的第一个屏幕，然后选择“立即构建”。如下所示。

![构建项目 - 将自动部署作为构建后步骤](https://www.toolsqa.com/gallery/Jenkins/5.Build%20project%20-%20having%20automated%20deployment%20as%20post%20build%20step.png)

上述步骤确保容器在成功构建后具有所有必需的文件。因此，正如我们所见，自动化部署是后置步骤之一，一旦上述构建的所有任务/步骤成功，将确保构建部署在目标服务器上。

## 关键要点

-   我们通常会安装一个插件“ Deploy to a container ”来实现自动化部署。
-   然后我们将 war/ear 文件部署到容器中并将其与我们的 Jenkins 主服务器相关联。
-   然后我们安排构建以检测源代码中的每个更改并触发自动构建。