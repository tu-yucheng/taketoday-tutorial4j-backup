## 1. 概述

在本教程中，我们将讨论操作系统中的内存管理技术：反向分页。

我们将介绍这种技术的工作过程。最后，我们将探讨反向分页技术的优点和缺点。

## 2.倒页

反向分页是一种内存管理技术，它使用[辅助内存](https://en.wikipedia.org/wiki/Computer_data_storage)作为主[虚拟内存](https://www.baeldung.com/cs/virtual-memory)的后备存储。它提供了一种在虚拟内存的[物理地址](https://en.wikipedia.org/wiki/Physical_address)不能直接映射到存储设备的系统中管理虚拟内存的方法。

当程序试图访问未映射到[物理内存的](https://www.baeldung.com/cs/physical-vs-virtual-memory)[虚拟地址](https://www.baeldung.com/cs/virtual-memory-address)空间的一部分时，操作系统使用[页表](https://en.wikipedia.org/wiki/Page_table)将该虚拟地址映射到辅助存储中的页面。页表本质上是一个带有页标识符的映射表。

当我们使用反向分页时，辅助存储中的每个页面都映射到主存储中的多个页面。当程序从虚拟内存中请求页面时，操作系统首先查找页表以确定虚拟地址对应的页面。

一旦操作系统提取了虚拟地址和物理地址之间的映射信息，它就会将目标页面从二级存储到主存储。

换句话说，操作系统将虚拟地址反转为物理地址。此外，操作系统将目标页面的物理地址映射到所请求程序页面的主虚拟地址。

## 三、工作程序

现在让我们详细谈谈反向分页技术是如何工作的。

反向分页是一种用于计算机内存管理的技术，用于提高从内存访问数据的速度。此外，在反向分页中，我们创建一个数据库或索引，将虚拟地址映射到内存中的物理地址。

它允许系统使用它的虚拟地址快速查找一段数据的物理地址，然后可以直接访问它。它不同于[传统的分页](https://en.wikipedia.org/wiki/Memory_paging)，系统必须首先搜索页表才能找到一段数据的物理地址。

倒排页表由两个表组成：页表和页表映射或[倒排页表](https://en.wikipedia.org/wiki/Page_table)。页表包含有关主存储中每个页面的信息。页表映射是一个表，其中包含有关辅助存储中每个页面的信息。

页表映射也称为倒排页表。反向分页的工作原理是将存储在[非易失性存储器](https://en.wikipedia.org/wiki/Non-volatile_memory)中的页面映射回主虚拟内存。我们需要将页表和倒排表存放在高速内存如[RAM](https://www.baeldung.com/cs/registers-and-ram)中：

![倒页表](https://www.baeldung.com/wp-content/uploads/sites/4/2022/12/Inverted-pagetable.drawio-2.png)

反向分页组织页表，其中包含在相应页上执行的进程的逻辑页号 (P) 和进程 ID (PID)。我们将 (PID, P) 对转发到倒排页表所在的内存，以响应内存引用。

在我们转发元组之后，内存访问倒排表以搜索匹配项。假设我们在表中的条目 E 处找到了匹配项。然后，相应的物理地址将包含条目 E，我们在其中找到匹配项和偏移量 D。

## 4.优点和缺点

反向分页提供了许多好处，例如减少分页操作、在任务之间实现更快的上下文切换、通过消除磁盘读写来提高系统性能，以及改善功耗。

反向分页允许操作系统将页面从主虚拟内存映射到辅助存储中的页面。操作系统不必在主存储和辅助存储之间交换页面。因此，反向分页有助于操作系统减少分页操作。

此外，可以使用已映射到主虚拟内存中的相同页面换出和引入任务。它避免了需要额外的 I/O 操作来从辅助存储读取页面的内容。因此，反向分页可以实现任务之间更快的上下文切换，这在操作系统的高效性能中起着至关重要的作用。

反向分页支持更快的上下文切换和更少的 I/O 操作。反过来，这会导致更快的任务执行和更好的系统性能。此外，由于我们需要执行的 I/O 操作较少，因此功耗也较低。

具有广泛的优点，它也有几个缺点，包括高存储成本、增加页表的大小、增加页表查找和高复杂性。

虽然反向分页减少了分页操作并提高了系统性能，但它增加了虚拟内存的存储成本。在这种技术中，我们将辅助存储中的每个页面映射到主虚拟内存中的多个页面。

我们使用页表将主虚拟内存中的页面映射到辅助存储中的页面。如果我们不能在页表中容纳可用的虚拟页面，操作系统需要找到一种方法来映射剩余的虚拟页面。它可能涉及额外的分页操作，导致上下文切换速度变慢和系统性能下降。

每次程序尝试访问未映射到物理地址的虚拟地址时，操作系统都需要将该地址映射到辅助存储中的页面。因此，它会导致额外的页表查找，这可能会减慢程序的执行速度。

此外，反向分页会导致[页面替换算法](https://www.baeldung.com/cs/fifo-page-replacement)变得不那么有效，因为页表并不总是按照最近使用的页面的顺序排序。此外，它的实现比其他分页方案更复杂，使其维护和调试更具挑战性。

现在让我们看一下总结反向分页技术优缺点的表格：

![由 QuickLaTeX.com 呈现](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-6de405a54b2192f8ca0deade7a17a493_l3.svg)

## 5.总结

在本教程中，我们讨论了一种内存管理技术：反向分页。我们解释了反向分页在操作系统中的工作方式。

最后，我们介绍了反向分页技术的优缺点。