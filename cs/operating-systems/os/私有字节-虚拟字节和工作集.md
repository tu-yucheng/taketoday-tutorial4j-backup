## 1. 概述

在本教程中，我们将讨论操作系统中与内存相关的三个概念：私有字节、虚拟字节和工作集。

最后，我们将讨论它们之间的核心区别。

## 2.私有字节

专用字节是应用程序在执行期间或之前请求的内存量的合理近似值。具体来说，当进程完全耗尽其私有内存时，私有字节表示操作系统分配给进程的 RAM 量。然而，私有字节集的一个重要方面是它总是指示分配的内存，而不是进程使用的内存。

进程利用私有字节集从操作系统请求 RAM。虽然，进程可能会也可能不会使用整个分配的内存。我们不在私有字节集中包含[内存映射](https://www.baeldung.com/cs/memory-mapped-vs-isolated-io)文件。它可以由物理内存和磁盘内存组成。

我们可以使用私有字节集来监控和分析私有内存的任何持续增长。例如，应用程序中不需要的无限循环中的分配请求可能会导致系统[内存泄漏](https://www.baeldung.com/cs/memory-allocation)。我们可以通过监视应用程序私有字节集的持续增加来识别内存泄漏。

在私有字节集中，进程不与其他进程共享请求的内存。此外，进程在执行期间不会使用整个请求的内存。此外，一个进程的私有字节包括它的[页面文件](https://en.wikipedia.org/wiki/Memory_paging)使用。页面文件是操作系统长时间未使用的硬盘内存的保留部分。

因此，私有集实际分配的内存是私有字节集使用的内存和页面文件内存的总和：

![rytrhytr.drawio-1](https://www.baeldung.com/wp-content/uploads/sites/4/2022/07/rytrhytr.drawio-1.drawio-1.png)

## 3. 工作集

在应用程序执行期间，我们可以将工作字节集视为当前存在于物理内存中的进程的页面。工作集包含 RAM 中由特定进程分配的最新页面。

但是，如果一个进程请求一个以前没有加载到物理内存中的页面，就会发生错误。该错误导致系统出现[页面错误](https://www.baeldung.com/cs/cache-tlb-miss-page-fault)。[此外，我们可以使用页面错误处理程序](https://en.wikipedia.org/wiki/Page_fault)来探索丢失的页面。尽管如此，在找到丢失的页面后，我们可以将其包含在工作集中。因此，在这种情况下，工作集的总大小将增加新添加页面的大小。我们可以将页面错误分为两类：硬页面错误和软页面错误。

我们可以通过读取请求错误页面的进程创建的页面文件或内存映射文件来解决硬页面错误。系统读取后备存储文件的内容以检索所需页面的内容。检索后，我们将页面添加到工作集中。

软页面错误不需要读取后台存储文件。它可以在多种情况下发生。让我们讨论其中的一些。假设一个页面正在另一个进程的另一个工作集中执行。在这种情况下，可能会发生软页面错误。此外，离开进程的工作集后处于转换中的页面也可能导致软页面错误。

如果一个进程使用其中一个工作集页面完成，则该页面将从该集中删除，而不会影响其余进程。如果一个页面不是任何工作集的一部分，它被称为过渡页面，直到它被请求或修改用于其他目的。

与私有字节集不同，工作集可以包括非分页私有字节和内存映射文件。

## 4.虚拟字节

虚拟字节集是指分配给进程的[虚拟内存地址空间。](https://www.baeldung.com/cs/virtual-memory-address)它促进了使用的自由，其中唯一的进程访问每个地址空间。虚拟地址不代表当前的物理内存位置。然而，每个进程都伴随着一个[页表](https://en.wikipedia.org/wiki/Page_table)，有助于将[虚拟地址](https://www.baeldung.com/cs/virtual-memory-address)转换为相应的[物理地址](https://www.baeldung.com/cs/virtual-memory-address)。当一个进程请求一个地址时，系统会根据页表返回一个物理地址。

[我们可以使用辅助存储和虚拟空间](https://www.baeldung.com/cs/virtual-memory-vs-swap-space)来扩展物理 RAM 。该虚拟内存超出了 RAM 的容量，以获取比实际实内存更多的地址空间和引用地址。让我们举个例子。在 32 位 Windows 用户模式下，一个进程最多可以使用 2GB。[但是，我们可以通过修改Boot.ini文件](https://en.wikipedia.org/wiki/NTLDR)将分配的内存扩大到3GB 。

虚拟字节集可以包括非分页专用字节、内存映射文件和磁盘上的数据。最后，虚拟字节集是工作集、私有字节和备用列表的组合：

![rytrhytr.drawio-1](https://www.baeldung.com/wp-content/uploads/sites/4/2022/07/rytrhytr.drawio-1.drawio.png)

## 5. 差异

我们可以将虚拟字节集定义为工作集和私有字节的总和。此外，私有字节集是进程分配的内存和页面使用内存的总和。因此，私有字节集是工作集的超集。此外，虚拟字节集是私有字节集和工作集的超集：

![套](https://www.baeldung.com/wp-content/uploads/sites/4/2022/07/sets.png)

下面我们来看看三组的对比：

![由 QuickLaTeX.com 呈现](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-ed40f1ab5a3260e8aa492a51572f9918_l3.svg)

## 六，总结

在本教程中，我们探讨了操作系统中一些与内存相关的概念：私有字节、虚拟字节和工作集。

最后，我们介绍了它们之间的核心区别。