## 1. 概述

链接和加载是在程序执行中起着举足轻重作用的两种工具。链接旨在通过组合汇编程序生成的目标代码来生成程序的可执行模块。另一方面，加载程序将这些可执行模块加载到主内存中以供执行。

在本教程中，我们将探讨这些概念及其变体。

## 2.链接

链接是将一个程序的所有模块或功能连接起来以供程序执行的过程。它需要多个目标模块并将它们组合成一个目标文件。链接器，也称为链接编辑器，从汇编器中获取目标模块并为加载器形成可执行文件。因此，顾名思义，链接是将数据和代码片段收集和维护到单个文件中的过程。

目标模块的链接在[编译](https://www.baeldung.com/cs/how-compilers-work)和加载时完成。当源代码被翻译成机器代码时，编译时链接就完成了。加载时链接是在加载程序将程序加载到内存中时完成的。

链接根据完成时间分为两种类型——静态链接和动态链接：

![静态与动态链接](https://www.baeldung.com/wp-content/uploads/sites/4/2021/01/StaticVsDynamicLinking-1536x1223-1-1024x815.png)

例如，在上图中，在静态链接中，每个程序在编译时绑定到它的依赖库。然而，在动态链接的情况下，程序使用共享库，这些库在运行时链接到程序。

### 2.1. 静态链接

静态链接是在程序编译时完成的。它获取目标文件的集合和命令行参数，并生成加载和执行的完全链接的目标文件。

### 2.2. 动态链接

动态链接是另一种旨在减少静态链接缺点的技术。使用静态链接，用户最终会在各种可执行文件中重复的函数或例程。因此，静态链接变得低效。例如，几乎每个程序都需要printf()函数。因此，它的副本存在于所有可执行文件中，这会浪费虚拟内存和文件系统中的空间。

在动态链接方法中，链接器不会将例程到可执行文件中。请注意，该程序依赖于库。当程序实际执行时，链接器将程序中的函数调用绑定到磁盘中存在的共享库。

## 3.加载

加载是将程序从辅助内存加载到主内存执行的过程。

动态加载是计算机程序在运行时将库加载到内存、检索变量和函数地址、执行函数以及从内存中卸载程序的技术。它通常用于实现软件插件。例如，Apache Web Server 使用这种技术在运行时加载动态共享对象 ( .dso ) 文件。

## 4.加载与链接

先讨论一下链接和加载的关系：

![加载和链接](https://www.baeldung.com/wp-content/uploads/sites/4/2021/01/LoadingAndLinking-1528x2048-1-764x1024.png)

首先，汇编器或编译器将源程序翻译成目标模块。链接器然后使用此目标模块和其他模块来准备链接模块。加载程序使用链接模块和其他系统库来生成二进制内存映像。因此，程序执行过程使用链接器和加载器的产品。

通常，一个程序可以由多个模块组成，根据程序的执行情况，并不是所有的模块都可以同时存在于内存中。动态加载为我们提供了按需加载模块的能力。

例如，在 Java 中，如果需要访问类，我们可以使用[ClassLoader的实例来动态加载它。](https://www.baeldung.com/java-classloaders)此外，对于较大的应用程序，不可能同时将所有模块加载到内存中。因此，在这种情况下，动态加载是一种方便的技术。

动态链接的工作方式非常相似，但有细微差别。应用程序模块由多个功能组成，这些功能共同提供了模块所提供的功能。通过动态链接，我们使用对系统中函数定义可用的库的引用。有关函数定义所在的库的信息存储在存根中。

## 5.总结

在这篇简短的文章中，我们讨论了计算机应用程序中链接和加载的各个方面。

我们介绍了链接的过程及其各种类型。随后，我们讨论了动态加载的过程及其目的。

最后，我们提供了动态加载和动态链接的比较。