## 1. 概述

在本教程中，我们将讨论操作系统中使用的忙等待的概念。我们将研究定义忙等待、给出示例以及使用它的目的。我们还将回顾它的好处和存在的问题，并提供有关如何解决这些问题的建议。

## 2. 什么是忙等待？

忙等待，也称为自旋或忙循环，是一种[进程](https://www.baeldung.com/cs/inter-process-communication#1-what-is-a-process) [同步](https://www.baeldung.com/cs/semaphore#process-synchronization)技术，其中进程/任务等待并不断检查条件是否满足，然后再继续执行。在忙等待中，进程执行指令来测试进入条件是否为真，例如计算机系统中[锁](https://www.baeldung.com/java-concurrent-locks)或资源的可用性。

对于资源可用性，请考虑进程需要特定程序的资源的场景。但是，该资源当前正在使用中且暂时不可用，因此该进程必须等待资源可用才能继续。这就是所谓的忙等待，如下图所示：

[![忙等](https://www.baeldung.com/wp-content/uploads/sites/4/2021/08/Busywaiting.svg)](https://www.baeldung.com/wp-content/uploads/sites/4/2021/08/Busywaiting.svg)

在操作系统中有两种一般的等待方法：首先，进程/任务可以在消耗处理器的同时不断检查条件是否满足——忙等待。

其次，进程可以等待而不消耗处理器。在这种情况下，当条件满足时，进程/任务将被警告或唤醒。后者被称为睡眠、阻塞等待或睡眠等待。

## 3. Busy Waiting 什么时候使用？

忙循环通常用于实现操作系统中的[互斥。](https://www.baeldung.com/cs/what-is-mutex#mutex-explained)互斥可防止进程同时访问共享资源。一个进程被授予对其[临界区](https://www.baeldung.com/cs/semaphore#1-critical-section-problem)资源的独占控制权，而不受其他进程的相互排斥干扰。临界区是必须避免并发访问的程序代码的一部分。

## 4. 忙等待的问题

在某些操作系统中，忙等待可能是低效的，因为循环过程是对计算机资源的浪费。此外，系统在等待时处于空闲状态。如果手头的任务/进程的优先级较低，这尤其浪费。在这种情况下，本可以用于完成高优先级任务的资源会被忙于等待的低优先级任务占用。

在大多数操作系统中实现的忙等待效率低下的变通解决方案是使用延迟功能。也称为睡眠系统调用，延迟函数将忙于等待的进程置于非活动状态一段指定的时间。在这种情况下，资源不会被浪费，因为进程处于“休眠”状态。延迟函数如下图所示：

![由 QuickLaTeX.com 呈现](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-f7c2eb140d521c4a6c69360406bac64f_l3.svg)

休眠时间结束后，进程被唤醒继续执行。如果仍然不满足条件，则增加休眠时间，直到满足条件为止。

另一种方法是[修改](https://educatech.in/solution-for-busy-waiting-problem/)等待过程的定义，以适应带有[信号量](https://www.baeldung.com/cs/semaphore)的阻塞进程。处于忙等待状态的进程被阻塞并放置在不消耗资源的等待队列中。一旦满足条件，进程将重新启动并放入就绪队列。

## 5. 忙碌等待的可取特征

尽管效率低下，但如果等待时间短且无关紧要，忙等待可能有利于互斥。此外，忙等待可以快速简单地理解和实施。

在某些操作系统中，忙等待有利于实现[自旋锁](https://en.wikipedia.org/wiki/Spinlock)。自旋锁在试图访问共享资源的进程上强制执行自旋/等待循环。即它强制互斥。一旦自旋锁被释放，进程将继续其执行过程。自旋锁通常用于共享资源数量不足以引起争用的操作系统中。

然而，就像忙等待一样，当等待时间很长时，自旋锁被认为是一个坏主意。

## 6。总结

在本文中，我们讨论了操作系统中使用的忙等待。我们已经审查了导致繁忙等待的条件，以及现有的替代方案。最后，我们讨论了使用忙等待的好处和问题。