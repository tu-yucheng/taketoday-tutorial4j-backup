## 1. 概述

在操作系统中，应用程序依赖事件来执行功能。因此，操作系统属于事件驱动模块范例。当操作系统执行某些程序或应用程序时，可能会在操作系统中发生事件。事件触发程序的执行并将操作系统的状态从用户模式更改为内核模式。

在本教程中，我们将讨论操作系统中两种流行的事件类型：陷阱和中断。我们将探讨这两个事件的基本原理，并强调它们之间的核心区别。

## 2. OS Trap简介

陷阱是由用户进程中的异常触发以执行功能的[同步中断。](https://en.wikipedia.org/wiki/Synchronization_(computer_science))无效内存访问、被零除或断点等异常情况会触发操作系统中的陷阱。

陷阱将操作系统的模式更改为[内核例程](https://en.wikipedia.org/wiki/Kernel_(operating_system))。在这里，操作系统执行一些操作并将控制权返回给它之前正在执行的进程。在陷阱期间，与用户代码相比，进程的执行被设置为高优先级。

此外，陷阱处理程序是同步的。当操作系统检测到陷阱时，它会暂停用户进程。一旦[系统调用](https://en.wikipedia.org/wiki/System_call)完成，操作系统就会恢复并继续执行用户进程：

![gfdsgdg 副本](https://www.baeldung.com/wp-content/uploads/sites/4/2021/07/Copy-of-gfdsgdg.png)

此外，可以将陷阱视为[CPU 中断处理程序](https://en.wikipedia.org/wiki/Interrupt_handler)。操作系统保存堆栈指针，注册内存，然后可以再次恢复之前的执行。

让我们举个例子。假设用户在操作系统上运行程序。程序中有打印语句：

```c
printf(“%sn”, str);
```

操作系统执行此语句并触发打印功能。此外，打印功能在监视器中显示代码返回的字符串。因此，这是一个陷阱的例子。

操作系统以高优先级执行打印语句。一旦操作系统遇到这条语句，它就会切换到内核模式。OS执行完毕后，模式切换回用户模式。

## 3. 操作系统中的中断基础

中断是需要操作系统即时关注的硬件或软件信号。它通知处理器一个关键进程需要紧急执行。在这种情况下，当前的工作过程被中断。

所有现代计算机都是中断驱动的。操作系统在单个应用程序中启动一系列指令。此外，指令的执行一直持续到它完成或接收到中断信号。[此外，称为中断服务例程 (ISR)](https://en.wikipedia.org/wiki/Interrupt_handler)的特定总线控制线处理 I/O 设备中的中断。

CPU 包含一个特定的中断引脚，称为用于中断的 INT 引脚。INT 引脚将键盘、网卡等硬件设备与 CPU 连接起来。当我们按下键盘上的一个键时，就会产生一个中断。随后，操作系统更改上下文并调用键盘中断处理程序。执行完成后，切换回之前的流程：

![gfdsgdg](https://www.baeldung.com/wp-content/uploads/sites/4/2021/07/gfdsgdg.png)

通常，多个硬件设备使用中断控制器共享一个 INT 引脚。为了确定哪个设备产生了中断，处理器联系中断控制器。此外，处理器根据与中断控制器的通信执行相关的中断处理程序，如键盘或 USB 中断处理程序。

通常，中断可以从硬件或软件设备发生。I/O 操作完成后，我们可以观察到硬件中断。另一方面，当应用程序结束或寻求特定的操作系统服务时，就会发生软件中断。

## 4. 陷阱和中断的区别

现在我们了解了操作系统中陷阱和中断的基本原理。让我们讨论这两个概念之间的一些核心区别：

![由 QuickLaTeX.com 呈现](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-b7a0d03e907a6ab4b5eada389d422374_l3.svg)

## 5.总结

在本教程中，我们探讨了操作系统中的陷阱和中断概念。我们讨论了基础知识，并在表格中展示了它们之间的核心区别。