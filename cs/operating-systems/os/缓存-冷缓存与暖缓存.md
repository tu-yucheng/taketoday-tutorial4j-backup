## 1. 概述

在本教程中，我们将研究冷缓存和暖缓存。 我们的目标是了解系统采用冷缓存或暖缓存的主要区别和潜在后果，定义优缺点。

首先，我们将简要回顾一下缓存，记住它的用途和最常见的好处。因此，我们将专门研究冷缓存和温缓存的类别，突出它们最相关的特征。然后，我们将看到一些预热缓存的技术。最后，我们将系统地比较所研究的两种缓存类别。

## 2. 计算机内存和缓存

由于当前计算机处理数据的方式的特点，访问内存是一项必要但通常代价高昂的操作。

当然，有些记忆比其他记忆更快。例如，访问主存储器(Random Access Memory)比访问辅助存储器(如磁盘)要快。

然而，我们在主内存组件和次要内存组件之间也有不同的性能。一般来说，内存访问性能越好，价格越高，最复杂的是将它们集成到计算机系统中。

因此，为了解决这种情况，我们[在计算机系统中有一个内存层次结构](https://www.baeldung.com/cs/registers-and-ram#the-need-for-a-memory)。从昂贵和最快的存储器到便宜和最慢的存储器，我们有寄存器、高速缓存、其他主存储器(随机存取存储器、只读存储器)、固态存储器和其他几种辅助存储器(磁盘、磁带) .

特别是， [高速缓存](https://www.baeldung.com/cs/cache-memory) 是非常靠近计算机系统处理器分配的快速存储器。 由于架构限制和价格，高速缓存通常比其他主存储器小。

然而，缓存是为保存处理器经常使用或可能很快会被请求的数据而定制的。因此，缓存过程包括识别此类数据以将其加载到缓存中。

在计算机系统执行期间，有一些策略可以选择数据加载或替换到高速缓冲存储器中。 然而，当计算机系统启动时，缓存是干净的或有不相关的数据是事实。因此，当我们使用该系统时，它会填充有用的数据并加速内存访问。

这个加载数据的过程将冷缓存与热缓存区分开来，我们将在接下来看到。

## 3. 冷缓存和温缓存

正如我们之前所讨论的，高速缓存是分配在计算机系统处理器附近的快速存储器。但是，缓存通常比其他主存储器小得多。因此，我们必须仔细决定在其中分配哪些数据。

在这种情况下初始化缓存是一个巨大的挑战：我们应该只接受它在初始状态下是空的，还是应该尝试用可能可请求的数据填充缓存？

前面的问题没有确定的答案。保持缓存为空将导致多次缓存未命中(查询没有所需数据的缓存)。然而，尝试推断数据请求并 先验地填充缓存是 有代价的。如果我们有正确的推论，这个成本只会补偿。

反过来，如何初始化(或不初始化)高速缓存的决定决定了它们的冷暖类别：

-   冷缓存：处于冷状态的缓存是空缓存或填充了陈旧数据。这意味着高速缓存不会加速内存访问，直到它逐渐自然地加载频繁需要的数据
-   热缓存：考虑到计算机系统的当前状态，预热缓存包含有价值的数据。这意味着我们期望它有很多缓存命中(在缓存内存中找到所需的数据)

下图在较高层次上描述了一些与冷缓存和温缓存相关的常见事件：

![暖冷](https://www.baeldung.com/wp-content/uploads/sites/4/2022/08/Warm-Cold.png)

需要强调的是，冷缓存和温缓存适用于除计算机内存之外的其他缓存类别，例如内容分发网络中的内容缓存。

尽管热缓存是可取的，但预测计算机系统请求的数据并不容易。我们将在下一节中研究一些流行的高速缓存预热过程。

## 4.缓存预热

缓存预热过程用高请求概率数据填充冷缓存。存在多种缓存预热技术。因此，我们拥有专为计算机系统缓存量身定制的预热技术，以及针对不同类别缓存(例如内容缓存)的其他技术。

由于异构场景有不同的需求，因此很难确定缓存预热的核心技术。但是，专注于计算机系统的高速缓存，我们可以引用一些传统的加热技术：

-   预取元数据：计算机系统将通常用于系统早期执行的元数据填充到冷缓存中
-   预取元数据和数据：如果某些特定数据已被高概率使用，计算机系统可能会将其与元数据一起加载到缓存中
-   预热缓存：对于多缓存方案，计算机系统可以从已经预热的缓存中数据以填充冷缓存

当然，预热缓存有很多好处。其中，我们可以引用对处理器请求的快速响应，这会影响整个计算机系统的性能。

此外，如果我们考虑内容交付网络的内容缓存，预热内容缓存将使客户端更快地获得所需资源，提高他们的满意度，从而改善用户体验 (UX) 指标。

但是，我们应该谨慎使用缓存预热。做得好的升温过程给计算机系统带来了很多好处，但无论如何它们确实有代价。

因此，用计算机系统不需要的数据预热高速缓存意味着执行无用的操作，并为高速缓存中的数据替换创建更复杂的场景。在这种情况下，预热缓存对系统没有好处。

## 五、系统总结

在某些情况下，内存访问是计算机系统的瓶颈。快速存储器尽可能靠近处理器，使用专用总线，而且通常很昂贵。

计算机系统中最快的内存类型之一是高速缓存。 缓存很小，我们使用它们来保存处理器经常使用的数据。我们还可以推断处理器将很快需要哪些数据并将其加载到缓存中。

考虑到所请求的数据(或初始状态)，缓存存储器的一个可能分类是它的状态：冷缓存和热缓存。

在这种情况下，冷缓存表示空内存或充满已弃用数据(处理器不再请求)的内存。 在更新之前，冷缓存会产生大量缓存未命中。

另一方面，暖缓存采用一些策略来初始化并始终保持数据更新。因此，我们希望通过预热缓存获得大量缓存命中，从而提高计算机系统的整体性能。

下表总结了冷缓存和温缓存的一些特征：

![由 QuickLaTeX.com 呈现](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-29d0e90ab5875317f7e5c3a7068fd34c_l3.svg)

## 六，总结

在本教程中，我们研究了冷缓存和温缓存。首先，我们简要回顾了计算机系统内存，特别是讨论了高速缓存。因此，我们检查了冷缓存和暖缓存的类别。然后我们探索了一些流行的缓存预热算法。最后，我们系统总结了冷暖缓存内存的对比。

我们可以得出总结，缓存是计算机系统中至关重要的内存部分。 但是，冷缓存并不代表内存访问的许多性能改进。因此，在绝大多数情况下，预热过程对于更好地利用此内存是必要的。