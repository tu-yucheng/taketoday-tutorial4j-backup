## 1. 概述

我们在日常生活中使用许多不同的文件类型，例如文本文件、图像文件和音乐文件。

在本教程中，我们将了解文件的工作原理，以及计算机如何使用文件系统处理它们的组织。

## 2. 什么是文件和文件格式？

文件是一系列位、字节或记录。其含义由文件的作者和用户定义。每个文件都有一个存储或检索它的逻辑位置。文件中的数据以某种方式组织起来，我们称之为文件格式。我们也可以创建自己的格式，但是，使用 JPEG、PNG 和 TXT 等现有标准最简单也是最好的。基本上，一个文件包含元数据和有效负载。让我们看看位图 (BMP) 格式，以及它在下一节中的元数据是如何工作的。

### 2.1. 位图格式

在我们准确读取数据之前，我们应该知道一些细节，例如比特率，是否是单轨。所以，它实际上是关于数据的数据，我们称之为元数据。下面我们来看看位图格式的元数据：

![元数据 bm 1](https://www.baeldung.com/wp-content/uploads/sites/4/2021/10/metadata_bm-1.png)

正如我们所见，位图的元数据包括一些重要的值，如总文件大小、图像宽度、图像高度和颜色深度。与位图格式一样，所有其他文件格式(如 TXT、PNG、PPT、ZIP)都有元数据。他们都是一样的。他们有一长串数字，这些数字以二进制格式存储在存储设备上。文件格式对于读取和理解其中的数据具有重要作用。

## 3、如何存储文件？

我们已经了解了文件的工作原理，现在我们将继续了解计算机如何存储这些文件。无论底层存储单元是磁带、鼓还是磁盘，硬件和软件抽象都允许我们将存储视为存储值的长线容器。

当计算机只执行一次计算时，整个存储系统就像一个大文件。在早期的存储系统中，数据直接从存储开始，并按照输出创建的顺序加载。重复此过程，直到存储单元已满。然而，随着存储和计算技术的进步，一次存储多个文件变得实用且有益。

在那种情况下，背靠背存储文件是第一个想法，这个想法是可行的。这就像将个人 ID 连续存储在一个整数数组中，并且没有存储有关个人 ID 大小的信息。那样的话，存储的数据就没有意义了。这就是为什么计算机必须知道文件的开始和结束位置。存储单元没有该操作的特定部分。他们只是存储很多位。

### 3.1. 目录文件、碎片和碎片整理

为了处理这个问题，我们需要有一个特殊的文件来记录其他文件的开始和结束位置。虽然我们称它为许多其他名称，但最广为人知的是那个目录文件。

目录文件保留存储中所有其他文件的名称，即文件的开始和结束位置。它还存储有关这些文件的元数据以及它们的长度。当我们要添加文件或删除文件时，我们必须更新目录文件中的信息。该目录系统是文件系统的一小部分，文件系统是操作系统的一部分，管理所有存储的文件。

当我们尝试向某些文件添加一些数据时，这种单级系统可能会出现问题。因为如果不覆盖存储单元中的下一个文件，将没有空间执行它。因此，现代操作系统中的现代文件系统有两种方法论。第一个是他们将文件存储在块中。这种方法为修改节省了一点空间，它被称为[slack space](https://en.wikipedia.org/wiki/Glossary_of_digital_forensics_terms#S)。它还使所有文件数据共享一个共同的大小。这简化了管理。文件系统执行的第二件事是允许将文件分成几块并存储在几个块上。

我们称之为[碎片化](https://en.wikipedia.org/wiki/Fragmentation_(computing))。虽然这对于磁带等许多存储技术来说可能是一个令人头疼的问题，但要在短时间内打开大文件，碎片整理技术应运而生并解决了这个问题。计算机执行的是它实际数据并尝试以正确的顺序存储它们。碎片整理后，我们可以打开我们的文件。

### 3.2. 文件层次系统

到目前为止，我们假设所有文件都在同一个目录中，但是当然，将所有文件都放在同一级别是不切实际的。这实际上就像现实世界中的文档，将相关文件一起存储在文件夹中非常有用。然后我们可以把相关的文件夹放在一起放到其他文件夹中。这称为[文件层次结构系统](https://en.wikipedia.org/wiki/Filesystem_Hierarchy_Standard#FHS_compliance)，我们的计算机使用的是什么。我们可以在下图中看到它的一个例子：


![fhs](https://www.baeldung.com/wp-content/uploads/sites/4/2021/10/fhs-1024x646-1.png)

## 4.文件系统

[文件系统](https://tldp.org/LDP/sag/html/filesystems.html)是操作系统用来跟踪磁盘或分区上的文件的一组方法和数据结构。通过使用文件系统，存储单元中的数据可以被操作系统解释。除此之外，它只是我们不知道其开始和结束位置的一大部分数据。

有许多不同类型的文件系统。让我们看一下一些类型的文件系统。

### 4.1. 磁盘文件系统

磁盘文件系统具有在短时间内随机访问磁盘存储介质上的数据的能力。磁盘文件系统的例子有很多，例如[FAT](https://en.wikipedia.org/wiki/File_Allocation_Table)、[NTFS](https://en.wikipedia.org/wiki/NTFS)、[HFS](https://en.wikipedia.org/wiki/Hierarchical_File_System)、[UFS](https://en.wikipedia.org/wiki/Unix_File_System)和[ZFS](https://en.wikipedia.org/wiki/ZFS)。

光盘也是磁盘文件系统的一员。[ISO 9660](https://en.wikipedia.org/wiki/ISO_9660)和[UDF](https://en.wikipedia.org/wiki/Universal_Disk_Format)是 CD、DVD 和蓝光光盘的常见格式。

### 4.2. 闪存文件系统

闪存文件系统考虑了闪存设备的独特功能、性能和限制。尽管闪存设备可以使用磁盘文件系统作为底层存储介质，但最好使用专门为闪存设备实现的文件系统。

### 4.3. 数据库文件系统

另一种文件系统是基于数据库的文件系统。文件不是按层次组织管理，而是通过文件类型、作者和主题等属性来标识。

### 4.4. 网络文件系统

通过网络文件系统提供对[服务器上文件的访问。](https://www.baeldung.com/cs/client-vs-server-terminology)程序可以使用本地接口创建、管理和访问远程联网机器上的文件和目录。网络文件系统包括用于 FTP 和 WebDAV 的类似文件系统的客户端。

### 4.5. 磁带文件系统

磁带文件系统是一种磁带格式和文件系统，旨在将文件存储在磁带上。它们大多采用磁带格式。磁带是连续的存储单元，访问随机数据所需的时间比磁盘长得多。这使得通用文件系统的创建和维护变得困难。

尽管存在这些问题，IBM 还是可以为磁带开发一个文件系统，并将其称为[线性磁带文件系统](https://en.wikipedia.org/wiki/Linear_Tape_File_System)。他们将该系统作为开源 IBM 线性磁带文件系统 - 单驱动器版 (LTFS-SDE) 发布。

## 5.总结

文件系统使我们能够隐藏存储在磁盘上的原始位。它们实际上允许我们将数据视为有序且易于访问的文件。

在本文中，我们描述了什么是文件和文件格式，还详细介绍了计算机如何将文件存储在存储单元中。我们还提到了文件系统，并提供了有关不同类型文件系统的详细信息。