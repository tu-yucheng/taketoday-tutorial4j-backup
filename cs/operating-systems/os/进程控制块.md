## 1. 概述

计算机系统同时执行多个程序。这使我们能够实现更好的吞吐量和用户体验。运行多个程序的概念是由操作系统中的进程实现的。

在本教程中，我们将讨论进程控制块 (PCB) 的概念，它包含对进程运行有用的信息。

## 2. 流程概念

[进程](https://www.baeldung.com/java-process-api)是一个正在执行的程序。例如，我们可以编写一个 Java 应用程序并将其保存到磁盘中。这被认为是一个程序和一个被动实体。但是，当我们执行程序时，操作系统会创建一个 Java 进程。进程在执行过程中是一个活动实体。

![处理内容](https://www.baeldung.com/wp-content/uploads/sites/4/2020/06/ProcessContent-1-189x300-1.png)

上图表示一个流程及其组件。在左侧，我们正在显示内存——文本部分从较低的内存偏移量开始。进程的堆和堆栈部分可以根据进程的内存需求增长。

## 3.过程控制块

进程控制块代表操作系统中的一个进程。PCB 也称为任务控制块。它是 与特定流程相关的信息存储库。

它包含各种信息，例如：

### 3.1. 过程状态

进程状态表示进程在操作系统中的状态。进程可以处于新建、就绪、运行、等待或终止状态。

### 3.2. 程序计数器

一个进程包含多条指令，这些指令由 CPU 线性执行。程序计数器 (PC) 指示要为此进程执行的下一条指令的地址。

### 3.3. CPU寄存器

寄存器是一小段内存，可以包含进程的状态信息。根据计算机体系结构，寄存器的大小和类型可能有所不同。它们包括累加器、变址寄存器、条件代码信息、通用寄存器和堆栈指针等等。

如果在运行过程中发生中断，则 CPU 寄存器存储进程的状态信息。这允许进程在调度程序安排它再次运行时继续。

### 3.4. 附加统计

-   CPU 调度信息：调度程序调度要执行的进程。它决定了 CPU 执行进程的标准。一个进程包含几个参数，例如进程优先级、调度队列信息和其他各种调度参数
-   内存管理信息：一个正在执行的进程需要内存，并且需要维护一些与内存相关的统计信息。其中包括基址和限制寄存器信息、页表和段表等
-   会计信息：会计信息衡量各种簿记数据。使用的 CPU 时间量、时间限制、帐号、作业或进程号等
-   I/O状态信息：该信息包括分配给进程的I/O设备列表、打开文件列表等

## 4. PCB在上下文切换中的作用

PCB 在进程的上下文切换中起着至关重要的作用。

有时，中断信号或操作系统调用等多种因素会中断正在运行的进程，并且该进程会抢占其执行。发生这种情况时，操作系统会将当前执行统计信息保存在进程的 PCB 中。这确保流程执行在下一次恢复。

让我们看一下上下文切换期间发生了什么：

![ProcessContent 上下文切换](https://www.baeldung.com/wp-content/uploads/sites/4/2020/06/ProcessContent-Context-Switch-1-300x284-1.png)

让我们分解一下：

1.  一开始，进程P0正在运行，出现中断
2.  作为响应，操作系统保存P0的上下文并停止执行
3.  操作系统然后加载另一个进程P1的PCB并开始执行
4.  过了一会儿，P1也收到中断
5.  作为响应，操作系统保存P1的 PCB 上下文并停止执行
6.  然后操作系统加载P0的 PCB 并从之前的状态恢复执行

## 5.总结

在本文中，我们讨论了进程的进程控制块。

首先，我们介绍了进程的概念以及PCB在操作系统中管理进程状态的作用。然后，我们讨论了进程控制块的各种组件及其作用。

最后，我们讨论了进程控制块在进程上下文切换中的作用。