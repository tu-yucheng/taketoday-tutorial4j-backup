## 1. 概述

大多数现代计算机系统都使用进程的概念，让我们可以随时执行多项任务。并且，由于多个进程同时执行，它们通常需要出于各种原因相互通信。

在本教程中，我们将讨论操作系统进程、进程类型、进程间通信 (IPC) 和各种模式。

## 二、工艺概述

在讨论 IPC 之前，让我们了解操作系统进程的概念及其相关细节。

### 2.1. 什么是流程？

我们编写执行指定任务的计算机程序。程序在执行时是一个进程。然而，程序不仅仅是程序源代码。进程是一个活动实体，它包含除程序源代码之外的各种附加组件。一个进程包含一个进程栈来存储函数参数、局部变量等临时数据，一个数据段用来存储全局变量，一个运行时动态分配的堆内存。

### 2.2. 过程控制块

[进程控制块](https://www.baeldung.com/cs/process-control-block)代表操作系统中的一个进程。进程控制块包含与进程相关的各种信息，例如进程状态、程序计数器、CPU 寄存器详细信息、内存管理信息等。它充当包含属于进程的所有详细信息的存储库。

### 2.3. 过程状态

一旦流程开始执行，它会根据执行阶段更改其[状态：](https://www.baeldung.com/cs/process-lifecycle)

![流程状态转换](https://www.baeldung.com/wp-content/uploads/sites/4/2021/01/ProcessStateTransition-1024x570-1.png)

上图演示了一个进程的状态转换图。

-   New：最初，当进程被创建时它处于一个新的状态
-   就绪：一旦进程准备好在处理器中执行，它就会进入就绪状态
-   运行：一旦进程在处理器中执行，它就处于运行状态。任何时候一个处理器中只能有一个进程处于运行状态。如果有中断，进程将进入就绪状态
-   等待：在执行过程中，如果进程需要执行一些额外的事件，例如输入/输出访问，它就会进入等待状态。事件完成后，流程进入就绪状态
-   已终止：一旦进程完成执行，它就终止了

## 3. 流程类型

在计算机系统中并发执行的进程有两种类型——独立进程或协作进程。

如果一个进程不能影响或受计算机系统中执行的任何其他进程的影响，则该进程是独立的。此外，任何不与任何其他进程共享数据的进程也是一个独立进程。

如果一个进程可以影响计算机系统中执行的其他进程或受其影响，则该进程正在协作。因此，任何与其他进程共享数据的进程都是协作进程。

## 4.进程间通信(IPC)

### 4.1. 什么是 IPC？

协作进程需要相互通信以交换数据和信息。进程间通信是进程间通信的机制。

### 4.2. 需要 IPC

现在让我们讨论一个进程需要与其他进程通信或共享数据的几个原因。以下是几个原因：

-   信息共享：多个用户可能需要访问同一条信息(例如共享文件)。因此，需要有一个可以并发访问共享信息的环境
-   计算加速：通常一个任务被分成几个子任务来加速它的执行。这也需要相关进程交换与任务相关的信息
-   模块化：大多数时候，应用程序都是以模块化方式构建的，并分为单独的进程。例如，Google Chrome 网络浏览器为每个新标签生成一个单独的进程

## 五、进程间通信方式

进程可以通过两种模式相互通信——共享内存和消息传递。顾名思义，共享内存区域在进程之间共享一块共享内存。另一方面，消息传递让进程通过消息交换信息。让我们在后续部分中详细探讨这些内容。

### 5.1. 共享内存

通过共享内存模型进行的进程间通信需要通信进程建立共享内存区域。通常，想要通信的进程会在自己的地址空间中创建共享内存区域。希望与此进程通信的其他进程需要将其地址空间附加到此共享内存段：

![共享内存](https://www.baeldung.com/wp-content/uploads/sites/4/2021/01/SharedMemory-1024x993-1.png)

上图演示了IPC的共享内存模型。进程A和进程B建立共享内存段，通过共享内存区交换信息。

默认情况下，操作系统会阻止进程访问其他进程的内存。共享内存模型要求进程同意移除此限制。此外，由于共享内存是基于进程之间的协议建立的，因此进程还负责确保同步，以便两个进程不会同时写入同一位置。

### 5.2. 消息传递

尽管共享内存模型对进程通信很有用，但它并不总是合适和可实现的。例如，在分布式计算环境中，交换数据的进程可能驻留在不同的计算机系统中。因此，建立用于通信的共享内存区域并不简单。

消息传递机制为通信过程提供了一种替代手段。在这种模式下，进程在底层操作系统的帮助下通过消息相互交互：

![消息传递](https://www.baeldung.com/wp-content/uploads/sites/4/2021/01/MessagePassing-1431x1536-1-954x1024.png)

在上图中，两个进程 A 和 B 通过消息传递相互通信。进程 A 向操作系统(内核)发送消息 M。然后这个消息被进程 B 读取。

为了成功地交换消息，进程之间需要有通信链路。有几种技术可以用来建立这些通信链路。以下是这些机制的简要概述：

-   直接通信：在这种模式下，每个进程明确指定接收者或发送者。例如，如果进程 A 需要向进程 B 发送消息，它可以使用原语![发送(B，消息)](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-57f3851b9267f84d41b851f7a1ab1944_l3.svg)
-   间接通信：在这种模式下，进程可以通过邮箱交换消息。邮箱是保存消息的容器。例如，如果 X 是邮箱，则进程 A 可以![X](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-996ff7036e644e89f8ac379fa58d0cf7_l3.svg)使用原语向邮箱发送消息![发送(X，消息)](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-db4ea05bbeb6a9a0a9b2c1f5225c1a74_l3.svg)
-   同步：这是对直接和间接通信的扩展，带有附加的同步选项。根据需要。进程可以选择在发送或接收消息时阻塞。此外，它还可以异步通信，没有任何阻塞
-   缓冲：交换的消息驻留在临时队列中。这些队列的容量可以是零、有界和无界

IPC 的一个经典例子是生产者-消费者问题。生产者是产生数据的应用程序/进程。消费者是使用生成的数据的应用程序/进程。生产者和消费者进程可以决定之前讨论过的任何机制来相互通信。

## 六，总结

在本文中，我们讨论了计算机系统进程和它们之间的各种通信机制。

我们介绍了进程、PCB 和进程状态的概念。然后我们讨论了进程通信的两种主要技术——共享内存和消息传递。

最后，我们提供了使用 IPC 概念的生产者-消费者的示例。