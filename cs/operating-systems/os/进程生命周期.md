## 1. 概述

在本教程中，我们将讨论操作系统中进程的生命周期。

## 2. 什么是流程？

在操作系统中，进程是当前正在执行的计算机程序的实例。因此，具有活动状态的计算机程序是一个进程。例如，用户正在打开网络浏览器进行网络冲浪或使用某些音乐播放器应用程序播放音乐。

当我们想同时运行多个进程时，进程以顺序方式执行。例如，我们有四个进程![A B C D](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-d5376a48d0042b63d0591f521be08ab0_l3.svg)。

让我们看看流程执行的概念模型：

![1-3](https://www.baeldung.com/wp-content/uploads/sites/4/2021/01/1-3.png)

这里流程框的大小代表流程的执行时间。OS根据执行时间和进程开始时间从左到右开始执行进程：

![2-3](https://www.baeldung.com/wp-content/uploads/sites/4/2021/01/2-3.png)

在我们继续之前要注意的重要一点是过程和程序是不同的。程序是存储在操作系统内存中的可执行文本文件。当我们执行文本文件时，它就变成了一个进程。程序包含一些命令和指令，这些命令和指令是为执行某些特定任务而编写的。进程实际上是在操作系统中执行这些任务。

进程和程序之间的另一个根本区别是多个用户可以使用相同的文本运行同一个程序，但是程序文件的每次执行都会创建一个具有唯一进程 ID 的不同进程。

## 3.流程布局

当一个程序被用户执行时，它变成一个进程并加载到操作系统的主内存中。在主存内部，一个隐含的进程布局有四个部分：栈、堆、数据段和文本段。每个部分都包含一些与流程相对应的信息：

![3-4](https://www.baeldung.com/wp-content/uploads/sites/4/2021/01/3-4.png)

[堆栈](https://www.baeldung.com/java-stack-heap)存储临时数据，例如局部变量和函数参数。在进程运行期间，它需要内存。[堆](https://www.baeldung.com/java-stack-heap)是动态分配给一个进程的内存。数据部分存储初始化的全局变量和静态变量。下一节包含编译的程序代码。

## 4. 进程的属性

进程包含各种属性。这些属性存储在[进程控制块 (PCB)](https://www.baeldung.com/cs/process-control-block)中，也称为任务控制块。一些重要的属性是进程 ID、进程状态、CPU 调度信息、I/O 信息、会计信息、内存管理信息等。

每个进程都可以用进程 ID 唯一标识。它有助于将一个过程与另一个过程区分开来。在整个运行期间，每个进程在特定时刻都有一些与其相关联的状态。进程状态显示进程在特定运行时的状态。

每个操作系统可能使用不同的[调度算法](https://en.wikipedia.org/wiki/Scheduling_(computing))。操作系统根据调度算法执行进程。CPU 调度信息包含有关操作系统当前使用的调度的信息。每个进程都需要一些 I/O 设备来执行。I/O 设备的详细信息存储在 I/O 信息属性中。

在执行进程时，了解与会计相关的信息(如用于进程执行的 CPU 数量、执行 ID)至关重要。进程还包含有关操作系统[内存管理的信息。](https://en.wikipedia.org/wiki/Memory_management_(operating_systems))

## 5. 流程生命周期

当用户执行一个流程时，它会在终止之前经历几个阶段。这些阶段可能因操作系统而异。常见的流程生命周期可以有两个、五个或七个状态。

### 5.1. 两国模式

最简单的流程生命周期模型只包含两种状态：运行和不运行。所以在这个模型中，一个进程要么在 CPU 上运行，要么不运行：

![4-2](https://www.baeldung.com/wp-content/uploads/sites/4/2021/01/4-2.png)

当一个新进程被创建时，进程进入未运行状态。最初，该进程存储在一个名为[dispatcher](https://en.wikipedia.org/wiki/Scheduling_(computing))的程序中。当调度程序意识到 CPU 空闲时，它允许进程移动到 CPU。当调度程序允许进程使用 CPU 时，进程进入运行状态。

当CPU空闲时，[CPU调度](https://www.baeldung.com/cs/process-control-block)器负责选择一个进程发送给CPU。CPU 调度程序根据操作系统使用的调度方案选择进程。

### 5.2. 五国模式

五状态流程生命周期是两状态模型的扩展版本。当所有处于未运行阶段的程序准备好执行时，双态模型有效地工作。但在某些操作系统中，由于某些 I/O 操作不可用，某些进程可能还没有准备好进入运行状态。可以通过将未运行状态拆分为两种状态来解决此类问题：

![5-3](https://www.baeldung.com/wp-content/uploads/sites/4/2021/01/5-3.png)

start 或 new 状态表示进程刚刚被创建。该程序在调度程序中，等待移入主内存。一旦进程进入主内存，它就会将状态从开始更改为就绪。

当进程在主内存中等待 CPU 时，它就处于就绪状态。当 CPU 空闲时，进程将移至 CPU 以进一步执行。

如果进程处于运行状态，那么它当前正在 CPU 中执行。

在 CPU 中完成执行后，进程可能不会进入终止阶段。相反，它可能会等待某些 I/O 操作的完成，或同步信号等。在这种情况下，进程会进入等待阶段。当 CPU 再次空闲时，进程进入就绪状态。进程从就绪状态进入运行状态。

最后，当进程完成执行或由于某种原因可能被用户中止时，它进入终止阶段。

### 5.3. 七国模式

五态模型的扩展版本是七态模型。这个模型中新增了两个状态：suspend ready和suspend wait。先看状态图：

![6-2](https://www.baeldung.com/wp-content/uploads/sites/4/2021/01/6-2.png)

有时，处于就绪状态的进程可能会从主内存中交换出来，CPU 调度程序会将处于挂起就绪状态的进程移动到外部存储中。只要进程被移入主内存，进程就可以转换回就绪状态。

由于缺少主内存，处于等待状态的进程可能会被移动到辅助存储中。然后进程进入挂起等待阶段。从这个阶段开始，进程可以回到等待阶段，也可以进入挂起就绪阶段。

## 六，总结

在本教程中，我们学习了操作系统中进程的生命周期。我们展示了三个过程生命周期模型并进行了详细描述。