## 1. 概述

套接字是使不同进程能够相互通信的网络资源。特别是，使用套接字的应用程序有多个操作来管理其生命周期。这些操作的示例有绑定、侦听、发送、接收和关闭。

在本文中，我们将了解套接字绑定操作的主要概念并了解其工作原理。

## 2.套接字基础

套接字是启用两个进程之间通信的端点。这种通信与进程在何处运行无关。 此外，我们强调基于 TCP/IP 的网络上下文中的套接字称为网络套接字或互联网套接字。 在这种情况下，套接字在 TCP/IP 堆栈的传输层和应用层之间执行。

插座主要分为三种类型：

-   [数据报：使用用户数据报协议 (UDP)](https://www.baeldung.com/cs/udp-vs-tcp)创建进程间通信的套接字。这样，数据报套接字就可以实现简单的 IP 通信，而无需在进程之间建立任何连接。
-   [Stream：使用传输控制协议 (TCP)](https://www.baeldung.com/cs/udp-vs-tcp)启用进程间通信的套接字。因此，流套接字需要执行三次握手来连接进程并提供具有特定消息传递保证的通信。
-   Raw：无论传输层协议如何，从网络接口读取网络流量的套接字。原始套接字的典型用途是开发数据包嗅探器。

该类型定义了与套接字通信相关的属性。这样，对特定类型的选择可能会改变某些套接字的生命周期操作的工作方式。这些操作的示例是绑定(在下一节中详细讨论)、[关闭和关闭](https://www.baeldung.com/cs/sockets-close-vs-shutdown)。

最后，需要注意的是，除了定义类型之外，打开套接字还需要指定协议族。这些协议族是建立套接字地址的决定因素，影响绑定操作。我们将在下一节中看到有关协议系列的更多详细信息。

## 3.套接字绑定

打开后，创建了一个套接字，但没有分配任何地址。因此，绑定操作负责为套接字建立特定地址。

在执行绑定操作之前，我们应该在打开套接字时根据为套接字定义的协议族选择合适的地址。接下来，我们引用最常见的套接字协议系列并展示构成它们地址的数据。

-   AF_INET：协议族，指的是 Internet 协议版本 4 (IPv4)。因此，使用此协议系列打开的套接字与 IPv4 地址和端口号绑定。
-   AF_INET6：协议族，指的是 Internet 协议版本 6 (IPv6)。在这种情况下，套接字地址类似于 AF_INET 地址。因此，它也由一个 IP 和一个端口号组成，但 IP 为版本 6 格式。
-   AF_LOCAL：支持进程间本地通信的协议族。该协议族不在 IP 上执行。因此，使用 AF_LOCAL 创建的套接字绑定到由空终止文件路径名组成的地址。
-   AF_PACKET： 用于直接在设备级别(OSI 第 2 层或 TCP/IP 第 1 层)处理原始数据包的协议系列。 通过这种方式，地址通常是套接字应从中捕获网络流量的网络接口。

在定义了套接字的协议族之后，我们就可以将其与地址绑定。我们在下图中说明了先前提出的协议系列的绑定操作的执行：

![套接字绑定](https://www.baeldung.com/wp-content/uploads/sites/4/2021/08/SocketBinding.png)

### 3.1. 绑定用法的某些方面

实际上，在绑定套接字之前，应考虑部署场景中的几个操作方面。例如，在[服务器/客户端模型](https://www.baeldung.com/cs/client-vs-server-terminology)中，绑定操作在大多数情况下仅在服务器端显式执行。一旦服务器等待通信，我们作为客户端期望它以静态且可知的地址进行响应。相反，服务器在开始通信时接收客户端地址。因此，没有必要对客户端执行显式绑定。

我们可以举出先前出现的场景的一个例外：响应从特定地址通信的客户端的服务器。在这种情况下，客户端也必须执行显式绑定。

最后，还有一些具有特殊特征的地址用于绑定套接字。例如，绑定到 IP 0.0.0.0 的 AF_INET 套接字或绑定到 ::/0 IP 的 AF_INET6 套接字通常会监听每个可用的网络接口。此外，操作系统将为绑定在端口 0 的网络套接字动态定义一个合适的端口。

## 4。总结

在本文中，我们了解了套接字绑定操作。首先，我们回顾 了套接字的基本概念。然后，我们研究了套接字绑定的要求和特点。

由于它建立套接字地址，我们可以得出总结，绑定操作对于启用进程间通信至关重要。