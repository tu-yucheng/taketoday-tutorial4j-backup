## 1. 概述

在本教程中，我们将研究防火墙。特别是，我们专注于了解无状态和有状态防火墙之间的异同。

首先，我们将简要回顾一下防火墙，解释它们的目标和一般操作。因此，我们将研究无状态和有状态防火墙，关注它们的具体特性和运行能力。最后，我们将系统地回顾和比较这两种防火墙类别。

## 2. 防火墙简述

随着时间的推移和互联网在各地的普及，通过数字环境提供的运营和服务的数量也越来越多。

反过来，这种情况会增加通过网络执行和交换的增值操作和敏感数据的数量。它自然会引起网络犯罪分子的注意，他们旨在出于非法目的访问这些操作和数据。

因此，保护企业和个人网络是保护私有系统安全的有效方式。控制进出我们系统的网络流量的一种方法是使用防火墙。

简而言之，[防火墙](https://www.baeldung.com/cs/firewalls-intro)是为检查网络流量而定制的网络功能，根据某些标准决定转发或阻止它。这样，我们可以将防火墙视为安全网络实体。

例如，一些防火墙检查数据包标头，阻止特定 IP 集的流量。另一个例子包括检查数据包有效载荷的防火墙，寻找某些签名来阻止来自特定应用程序的流量。

由于工作方式不同，因此我们有多种类型的防火墙。下面介绍了其中一些防火墙类型。

-   数据包过滤防火墙：最直接的防火墙，它们转发或阻止数据包考虑通常应用于数据包标头的一组预定义规则
-   下一代防火墙：结合其他安全方法(例如[防病毒](https://www.baeldung.com/cs/antiviruses)和深度数据包检测)来识别和阻止恶意流量的数据包过滤防火墙
-   [代理](https://www.baeldung.com/cs/proxy-vs-reverse-proxy)防火墙：设计用于在网络流量的应用层运行的防火墙，充当系统间连接的中介

除了前面介绍的防火墙类型外，我们还有两个相关的类别：无状态和有状态。在以下部分中，我们将看到这些类别中防火墙的特征。

## 3.无状态防火墙

无状态防火墙的主要特征是独立处理每个接收到的数据包。 这意味着防火墙不会考虑先前处理数据包的结果或连接详细信息来处理特定的传入或传出数据包。

总之，无状态防火墙根据网络管理员通常选择的预定义规则处理数据包。这些规则永远不会因网络流量和连接的上下文而改变。 因此，无状态防火墙对通过系统的所有数据包均等地应用它们。

需要强调的是，由于无状态防火墙不是面向连接的，因此在一般情况下它们定义的规则比有状态防火墙多得多。

这是因为无状态防火墙必须为系统中的传入和传出数据包定义规则，这与有状态防火墙(在下一节中讨论)不同，后者可以指定连接规则。

下图举例说明了无状态防火墙的操作：

![无状态2](https://www.baeldung.com/wp-content/uploads/sites/4/2022/07/Stateless2.png)

如上图所示，无状态防火墙的操作非常简单。当数据包到达防火墙时，它会按照优先级从高到低的顺序检查阻塞规则和转发规则。因此，防火墙会执行与数据包匹配的第一条规则的相应操作，而忽略任何其他优先级较低的规则。

尽管简单的网络安全解决方案，无状态防火墙如今仍然非常重要。例如，通常有无状态防火墙控制转发到其他网络功能的网络流量，从而构成网络服务链。

最后，由于无状态防火墙仅旨在匹配传入和传出数据包的预定义模式和规则，因此它们通常比有状态防火墙更具性能(例如，关于吞吐量)。因此，在合适的时候，使用它们可以避免网络中的瓶颈。

## 4.状态防火墙

在几个方面，我们可以将有状态防火墙视为无状态防火墙的演变，因为无状态防火墙无法有效应对现代威胁，例如欺骗性消息。

通过这种方式，状态防火墙可以监控连接的多个阶段及其网络流量。因此，状态防火墙知道进入系统的给定数据包属于哪个流，以及该流的相应连接的状态。

有了前面提到的功能，状态防火墙将数据交换的逻辑信息保持在流中，并且可以避免非逻辑网络流量转发。我们来看两种常见的非逻辑流量转发场景：

-   在不发送请求的情况下接收响应：描述网络流量欺骗攻击的场景。恶意实体欺骗可靠来源的数据包并将其发送到旨在访问该系统或获取某些数据的系统
-   在没有收到请求的情况下发送响应：一个典型的场景，描述了使用一个已经受损的实体对另一个实体进行[DDoS 攻击。](https://www.baeldung.com/cs/dos-vs-ddos-attacks)在这种情况下，受感染的实体会发送对从未完成的请求的响应

由于无状态防火墙不保留有关流、连接及其请求和响应的信息，因此它们无法处理上述情况。

对于无状态防火墙，匹配转发或阻止规则就是一切。 因此，如果恶意流量符合转发规则，无论逻辑上是否有效，都会转发。

反过来，在状态防火墙中，逻辑转发是相关的。因此，状态防火墙保留信息以跟踪连接。通过这种方式，它可以识别给定的响应是否对应于先前的有效请求。同样，它可以检测请求是否来自逻辑上有效的来源。

下图描述了状态防火墙的操作：

![有状态的](https://www.baeldung.com/wp-content/uploads/sites/4/2022/07/Stateful.png)

## 五、系统总结

由于现有攻击的多样性和复杂性，确保网络环境的安全是一项巨大的挑战。因此，使用安全解决方案来避免网络威胁已成为现代必需品。

这些安全解决方案包括防火墙。 我们有多种类型和类别的防火墙。一个非常相关的防火墙类别涉及它们保留了多少有关传入和传出网络流量以及系统中已建立连接的信息。

在这种情况下，我们可以将防火墙分为无状态和有状态。

无状态防火墙不会保留有关系统中数据流和连接的数据。因此，它将传入/传出系统的每个数据包评估为一个特定且独立的元素。

然而，状态防火墙保留有关流和连接的信息，并使用它来评估每个数据包。因此，除了匹配规则外，状态防火墙还会验证网络流量在逻辑上是否一致。

下表比较了无状态和有状态防火墙的一些特征。

![由 QuickLaTeX.com 呈现](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-7093bf971819ac5642a9d47370ebaff6_l3.svg)

## 六，总结

在本教程中，我们研究了无状态和有状态防火墙。 最初，我们回顾了防火墙，观察了一些相关的概念和分类。因此，我们专注于理解无状态和有状态防火墙。最后，我们对这几类防火墙进行了比较系统的总结。

我们可以得出总结，防火墙在网络安全中起着至关重要的作用。因此，选择最佳的防火墙类型和类别对于在特定情况下从中获得最大收益至关重要。