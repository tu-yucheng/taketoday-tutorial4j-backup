## 1. 概述

[SSH](https://www.baeldung.com/cs/ssh-intro)和[SSL](https://www.baeldung.com/java-ssl)是加密协议，用于加密和授权通过 Internet 发送的数据。这两种协议有很多共同点，但它们的目的不同。

在本教程中，我们将详细描述它们并进行比较。

## 2.SSH

SSH 用于通过[TCP/IP](https://www.baeldung.com/cs/popular-network-protocols)网络保护与远程服务器的连接。它允许通过终端控制服务器。它是名为 Telnet 的旧协议的继承者。与 Telnet 不同，SSH 连接是加密的。它通常用于各种目的，例如，在机器上远程工作、安全数据传输、管理远程数据库或使用电子邮件提供商。

SSH 在客户端-服务器或服务器-客户端架构中工作。在 SSH 应用程序和 SSH 服务器之间建立连接。SSH 提供两种身份验证方式来连接到远程服务器：

-   通过公钥
-   通过密码或密码

让我们看看它们是如何工作的。

### 2.1. 验证

通过公钥进行的身份验证依赖于加密的非对称技术。它使用两个[密钥](https://www.baeldung.com/java-digital-signature#keypair_management)的密钥对，公钥和私钥。

私钥保存在客户端，应安全存储，切勿共享。它用于解密和签署数据。私钥的暴露可能允许未经授权的人访问与公钥关联的机器。

相反，公钥可以自由共享。服务器将公钥存储在专用文件中。公钥以只有关联的私钥才能解密的方式加密数据。因此，使用该功能，服务器能够对客户端进行身份验证。因此，只有拥有相关私钥的客户端才能向服务器进行身份验证。

这种身份验证方法比使用密码或口令提供更高级别的安全性。此外，使用 SSH 密钥提供了在 SSH 服务器上实施单点登录机制的可能性。

第二种身份验证方式是使用密码或口令。它比 SSH 密钥技术简单且安全性较低。用户应使用复杂且足够长的密码。否则，它们可能容易受到暴力破解等流行攻击，甚至容易被猜到。综上所述，两种方式都可以用来验证SSH连接。虽然大多数情况下都推荐使用公钥身份验证，但它提供了最强的安全级别。

### 2.2. 建筑学

SSH 由三层组成。其中第一个是传输层。它负责加密、压缩和数据完整性。此外，它维护会话。在一小时或 1 GB 的传输数据之后，重新分配连接参数，例如，再次交换 SSH 密钥。

第二个是身份验证层。身份验证层在传输层之上工作。它提供并处理身份验证方法。换句话说，它向服务器验证客户端。我们在上一节中描述了身份验证方法。

最后一层是连接层。它管理连接通道的属性和配置。主要有三种通道类型，即： [shell](https://www.baeldung.com/spring-shell-cli)、 direct-tcpip和forwarded-tcpip。

现在，让我们看看 SSH 数据包的结构：

![编译流程示例第 4-1 页](https://www.baeldung.com/wp-content/uploads/sites/4/2021/03/Compilation-Flow-Example-Page-4-1.svg)

SSH 数据包包含五个字段。第一个，长度，是一个四字节的字段，以字节为单位指定数据包长度，不包括 HMAC 值和长度字段本身。

第二个字段，填充长度，以字节为单位描述了随机填充的长度。有效载荷字段包含有用的数据，并且具有可变大小。

下一个字段是填充。它应该由随机字节组成，并且具有任意长度。该字段的最大大小为 255 字节。填充提供了针对某些类型威胁的额外保护，例如时间分析攻击。

最后一个字段是 MAC(消息验证码)。MAC是在消息鉴权协商后计算出来的。因此，最初，它没有。

## 3.SSL

SSL(安全套接字层)是一种通用网络协议，可在服务器和最终用户之间提供安全连接和加密数据传输。最著名的 SSL 协议用法是在[HTTPS](http://baeldung.com/spring-boot-https-self-signed-certificate)协议中。例如，在进行在线支付时，我们都经常使用 HTTPS。使用 HTTPS 的网站使用 SSL 证书进行保护。它确保信用卡号码等机密数据免受任何攻击或暴露。

换句话说，SSL旨在通过使用密码加密和身份验证机制来保护Internet网络中的数据传输。

使用 SSL 具有三个核心优势：

-   加密——保护传输的数据免于暴露
-   身份验证——确保传输的数据来自正确的服务器
-   数据完整性——保证传输的数据在传输过程中没有改变或丢失

### 3.1. 证书

在浏览未使用 SSL 证书的网站时，数据将使用纯文本发送。因此，数据很容易被潜在的攻击者捕获和读取。另一方面，当 www 服务器上安装了 SSL 证书时，服务器与客户端(例如网络浏览器)之间的通信是安全和加密的。此外，只有认证机构才能颁发 SSL 证书。

SSL 证书工作流依赖于非对称加密。在上一节中，我们已经提到了它的基本原理。WWW 服务器存储私钥。公钥与在进入网站时收到 SSL 证书的客户共享。数字证书持有公钥。连接是使用称为[SSL 握手](https://www.baeldung.com/cs/tcp-protocol-syn-ack)的机制建立的。

让我们看看它是如何工作的：

![编译流程示例第 5 页](https://www.baeldung.com/wp-content/uploads/sites/4/2021/03/Compilation-Flow-Example-Page-5.svg)

客户端发起 SSL 握手。它发送服务器所需的规范，包括 SSL 版本、压缩方法、密码套件和会话相关数据。这个初始阶段通常称为“客户端问候”。

第二阶段称为“Server Hello”。在此期间，服务器验证双方可以处理的最高版本的 SSL 协议，并选择一种可能的压缩和加密方法。然后，服务器用该信息回答客户端。

在下一步中，客户端对服务器进行身份验证。因此，它验证服务器 SSL 证书。身份验证成功后，客户端根据密码创建预主密钥，并使用服务器的私钥对其进行解密。然后，它将它发送到服务器。服务器收到该预主密钥并使用其私钥对其进行解密。现在，双方都可以生成对称加密的主密钥。

最后，双方交换信息，从现在开始，这些信息将被加密。

### 3.2. 建筑学

让我们简要定义一下 SSL 协议的体系结构。它由四个子协议组成。其中第一个是 Record 协议。它确保传输数据的安全性和完整性。通常，它负责拆分数据，将它们包装在专用标头中，并创建称为记录的对象。记录可以被加密、压缩、提供MAC码，并通过TCP协议传输。

第二个协议称为警报协议。它的主要目的是通知传输过程中发生的错误。最关键的一个是 SSL 握手协议。它管理我们在上一节中描述的 SSL 握手过程。最后，还有一个 Change Cipher 协议。它包含一条只有一个值的消息。它只负责设置会话的状态。

## 4. SSH 与 SSL

我们已经描述了 SSH 和 SSL 协议的基础知识。现在，让我们比较它们并指出不同之处。

首先，SSH协议加密了两台机器之间的通信。它的主要目的是在通过网络从另一台计算机远程操作服务器时提供安全通信。另一方面，SSL 协议对客户端和服务器之间的通信进行加密。客户端通常是 Web 浏览器。SSL 协议的主要目标是保护数据，尤其是机密数据免受任何攻击或暴露。

SSH协议可以称为远程协议。它使用密码或私钥和公钥提供身份验证。相比之下，SSL协议可以称为安全协议。它通常使用数字证书来验证客户端和服务器。下一个区别是 SSH 协议的工作依赖于网络隧道。而SSL 协议是基于数字证书的。

最后，SSL 协议广泛用于网上银行、电子商务、社交媒体、医疗保健和所有其他处理机密数据的服务。但是，SSH 协议被网络行业采用，并用于终端访问、文件传输、隧道应用程序、建立 VPN 等特定情况。

## 5.总结

在本文中，我们详细描述了 SSH 和 SSL 协议的核心原理并进行了比较。它们在功能方面有很多共同点，但也存在一些差异。最重要的区别是它们是为不同的目的而设计和使用的。