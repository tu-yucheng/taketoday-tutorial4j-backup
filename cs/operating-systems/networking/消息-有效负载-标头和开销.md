## 1. 概述

当我们作为人类交流时，我们是在向其他人传递信息。让我们举一个对话的例子。为了正确地传递信息，我们必须说出来。但是，我们可以使用多种支持资源来提高我们的沟通质量。

这些支持资源的例子包括与我们交谈的人保持眼神交流，根据情况假设适当的语调，以及在我们需要强调一些重要话题时做出手势。当然，这些资源增加了传输信息的负载，但它们与使我们的信息清晰相关。

通过电信网络，设备每天交换多条消息。与我们的通信类似，这些设备使用许多通信资源来保证消息正确到达目的地。

在本教程中，我们将研究在计算机网络中传输的消息的格式和数据。 首先，我们将简要回顾一下计算机如何通过网络进行通信。因此，我们将深入探讨计算机消息的一般格式，特别是分析有效载荷、报头和开销的概念。

## 2. 概述计算机通信

在计算机网络中，通信包括从一个设备向另一个设备发送和接收消息。在这种情况下，发送消息的计算机必须正确处理它们。此外，发送方必须包括所有必需的资源，以使接收方能够处理消息。

通常，[网络协议](https://www.baeldung.com/cs/popular-network-protocols)负责保存源地址和目标地址以及计算机通信中所需的资源。因此，通信中涉及的每个设备，从计算机到网络功能，例如路由器、代理和交换机，都必须识别和处理这些协议。

这些协议期望的信息包含核心消息，形成[数据包和帧](https://www.baeldung.com/cs/osi-packets-vs-frames)。这些数据包和帧又具有特定的位置来安排每个采用的协议和核心消息本身的信息，从而创建标准的消息结构。我们将在以下部分中探讨此消息结构。

## 3.消息的一般结构

一般而言，我们可以将数据包和帧细分为两部分：标头和有效载荷。 首先，标头包含允许将数据包从起点路由到终点并将其传送到适当应用程序的信息。然而，有效负载是源期望目标接收和使用的消息内容。

下图显示了一个抽象数据包，我们将在本节中使用它来研究通过网络传输的计算机消息的结构：

![一般信息](https://www.baeldung.com/wp-content/uploads/sites/4/2021/11/GeneralMsg.png)

抽象数据包由 UDP over IPv4 数据包组成。为了简单起见，我们不会在示例中考虑链路层寻址(帧)和应用程序报头。

## 4.标题

在计算机网络中，标头是位于帧或数据包开头的补充信息。 通常，标头的结构遵循协议。因此，在标题的给定位置，预定数据必须可用。

为了通过计算机网络进行通信，[OSI](https://www.baeldung.com/cs/osi-model)或 TCP/IP 模型的每一层都提供了不同的协议。反过来，每个协议都有一个特定的标头。我们可以在下面看到一些流行的协议和有关它们各自标头的信息：

-   以太网：一种数据链路协议(OSI 的第 2 层，TCP/IP 的第 1 层)。以太网头(802.3 标准)有 14 个字节
-   ARP：数据链路协议(OSI 的第 2 层，TCP/IP 的第 1 层)。ARP 标头大小根据网络中使用的其他协议而变化。在最常见的情况下，ARP over Ethernet/IPv4，标头有 28 个字节
-   IPv4：一种网络协议(OSI 的第 3 层，TCP/IP 的第 2 层)。IPv4 头最少 20 字节，最多 60 字节
-   IPv6：一种网络协议(OSI 第 3 层，TCP/IP 第 2 层)。IPv6 具有 40 字节的固定长度标头
-   TCP：传输协议(OSI 的第 4 层，TCP/IP 的第 3 层)。IPv6报头最少20字节，最多60字节
-   UDP：传输协议(OSI 的第 4 层，TCP/IP 的第 3 层)。UDP 有一个固定长度的 8 字节头

因此，考虑到我们的标准示例，我们有两个标头：网络层的 IP 标头和传输层的 UDP 标头。我们在下图中突出显示这些标头：

![标头](https://www.baeldung.com/wp-content/uploads/sites/4/2021/11/Headers.png)

## 5.有效载荷

在我们的场景中，有效负载是源发送到目的地的数据。 以这种方式，数据包的有效负载不包含在数据包末尾插入的标头或可能的标志(根据所采用的协议按需插入结束标志)。

此外，数据包和帧可以具有固定或可变长度的有效载荷。固定长度的有效负载始终具有相同的字节数。因此，没有必要添加补充信息来定义有效载荷的开始或结束位置。但是，如果发送方的消息长度小于有效负载固定长度，则会发生有效负载浪费。

相反，可变长度的有效载荷使数据包或帧适应发送方的消息长度，从而避免了有效载荷浪费。但是，需要补充信息来指示有效载荷的范围。

最后，数据包或帧的一般有效载荷是发送方的消息。但是，如果我们逐层分析有效载荷，则上层协议的标头是下层协议有效载荷的一部分。例如，IP 报头是以太网负载的一部分。同样，UDP 报头是 IP 负载的一部分。

在我们的标准示例中，下图突出显示了数据包的一般和面向层的有效负载：

![有效载荷](https://www.baeldung.com/wp-content/uploads/sites/4/2021/11/Payload.png)

## 6.开销

通常，在计算中，开销是指对计算资源(例如处理、内存或带宽)的任何过度使用。 在我们的特定情况下，开销是补充信息所需的额外内存，这些信息使给定消息能够从起点传输到终点。

总之，在实践中，我们可以通过获取用于标头和结束标志的字节总数来计算帧或数据包的开销。这意味着将与所使用的网络协议直接相关的字节数相加。

因此，在我们的标准示例数据包中，开销由 IP 和 UDP 标头的字节定义。下图显示了这种开销：

![开销 1](https://www.baeldung.com/wp-content/uploads/sites/4/2021/11/Overhead-1.png)

## 七、总结

在本文中，我们研究了在计算机网络中传输的消息的一般结构。 首先，我们概述了有关计算机通信的一些相关概念。然后，我们深入研究了计算机消息的结构。我们的重点是理解标头、有效负载和开销的概念，从而在特定案例研究中观察它们。

我们可以得出总结，帧和数据包的结构除了承载发送者的消息外，还支持使它们能够传输的无数信息。这样，不同的网络协议可以在同一个数据包或帧中共存，例如，允许正确寻址、路由和保护消息。