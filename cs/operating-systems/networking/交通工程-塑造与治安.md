## 1. 概述

在本教程中，我们将研究流量工程(具体来说，流量整形和流量监管)。当前，在线提供多种服务和资源。因此，通过核心网络的流量大幅增加。

因此，在这种情况下，提供商可以采用流量工程技术来保持所提供服务的质量。在这些技术中，我们有流量整形和流量监管。

在下一节中，我们将从广义上研究什么是流量工程。因此，我们将重点了解流量整形和监管，并讨论一些流行的实施方式。最后，我们在系统总结中比较流量整形和监管时概述了最相关的概念。

## 2.交通工程

总之，我们可以将流量工程视为在计算机网络中提供服务质量 (QoS) 的一种策略。 因此，随着互联网的快速传播，关于流量工程的讨论和提案变得更加频繁和中肯。

然而，在研究流量工程之前，我们必须定义我们上下文中 QoS 的含义：QoS 是一组技术和机制，用于控制网络流量并为网络服务实施预定义策略和最低性能参数。

因此，在实践中，我们可以通过控制数据包的转发方式(例如，使用软件定义网络)或者甚至作为在提供网络服务的服务器中运行的应用程序来实现具有[网络功能(虚拟化或非虚拟化)的流量工程。](https://www.baeldung.com/cs/network-function-virtualization)

存在多种流量工程技术。一些最受欢迎的是：

-   整形：带宽建模技术，通过排队和延迟某些数据包来管理网络流量
-   监管：带宽建模技术，通过丢弃传入网络流量的某些部分来管理网络流量
-   调度：带宽建模技术，使用异构转发策略将网络流量排入不同队列 
-   Washing：数据包建模技术，丢弃数据包中的数据部分，这些数据对于服务器的处理不是强制性的

因此，在以下部分中，我们将探讨流量整形和监管技术，检查实施策略和工作细节。

## 3.流量整形

流量整形是一种带宽建模技术，可将网络流量负载保持在可接受的水平。反过来，网络管理员和操作员定义计算系统或服务的适当流量负载水平意味着什么。

然而，这个决定取决于几个方面。其中，我们可以引用可用带宽、计算系统的流量处理能力，以及运行在它们上的服务在给定时间内可以处理的请求数量。

因此，在配置和部署流量整形机制后，它可以通过三种方式作用于网络流量：转发、延迟或丢弃。让我们看看流量整形机制何时采取以下每一项操作：

-   转发：网络流量负载在最大负载下
-   延迟：网络流量超过最大负载，机制队列有空闲槽
-   Dropping : 网络流量超过最大负载，机制队列没有空闲槽

这样，我们可以假设流量整形机制使用队列来延迟超出的流量。

是的，没错！流量整形器并不像监管者(我们将在下一节中看到)或 [防火墙](https://www.baeldung.com/cs/firewalls-intro)那样主要丢弃网络流量。它首先尝试通过排队来延迟超出的流量。

因此，当网络流量负载低于定义的最大值时，流量整形器会将排队的流量转发到其原始目的地。

有多种类型的流量整形器。最受欢迎的是令牌桶整形器和漏桶整形器。

### 3.1. 令牌桶整形器

在令牌桶整形器中，我们使用用于保存令牌的桶抽象。因此，为了转发帧数据包，我们将从桶中使用令牌(通常，一个令牌表示一个字节)。

桶以线性间隔填充预定义数量的令牌。我们称之为利率。 此外，桶有它可以保留的最大令牌数，我们称之为突发。

下图描述了令牌桶整形器背后的一般思想：

![TBS](https://www.baeldung.com/wp-content/uploads/sites/4/2022/10/TBS.png)

这样，当数据包到达时，如果桶中有足够的令牌，整形器就会转发数据包。如果没有，但队列中有空闲槽，则整形器将数据包排入队列。否则，采取丢弃动作。

最后，如果桶有令牌并且队列在一个速率间隔后有数据包，则整形器使用这些令牌来转发排队的数据包。

### 3.2. 漏桶整形器

漏桶整形器，类似于令牌桶整形器，也在其策略中采用桶的抽象。但是，它不会保存用于转发数据包的令牌桶，而是保存数据包本身。

从技术上讲，桶是一个队列。反过来，桶中的数据包以 FIFO 顺序以恒定速率转发(它们从桶中“泄漏”)。 此外，桶具有最大尺寸，也称为突发。

下图显示了漏桶整形器的表示：

![位置服务](https://www.baeldung.com/wp-content/uploads/sites/4/2022/10/LBS.png)

这样，如果传入网络流量速率高于泄漏速率，则整形器将数据包保留在桶中。然而，如果桶已经满了，数据包就会被丢弃。

最后，如果传入流量速率低于泄漏速率并且桶中有存储的数据包，则转发它们，并且桶逐渐变空。

## 4. 流量监管

流量监管与流量整形有很多相似之处。 在这些相似之处中，我们可以引用对带宽进行建模以将网络流量负载保持在可接受水平的目标。

但是，流量监管机制不会对网络流量进行排队和延迟转发，而是会立即丢弃超出的流量。

此外，流量监管机制只执行两个动作：转发和丢弃。

因此，与流量整形规则相比，流量监管的一般规则更加直接：如果传入流量速率低于允许的最大值，则转发所有流量；如果传入速率高于允许的最大值，则丢弃超出的流量。 

我们确实有流量监管机制的异构实现。然而，令牌桶监管是最常见的一种。

### 4.1. 令牌桶监管

令牌桶监管机制的工作方式类似于已经讨论过的令牌桶整形器。因此，这意味着它也适用于以预定速率填充令牌的突发大小桶。

该机制使用令牌来转发传入的网络流量。 然而，与令牌桶整形器不同，管制机制没有队列。

下图在较高层次上描述了通用令牌桶监管机制：

![待定生产计划](https://www.baeldung.com/wp-content/uploads/sites/4/2022/10/TBP.png)

需要强调的是，如果没有队列，监管机制会在桶用完令牌后立即开始丢弃传入流量。

## 五、系统总结

随着计算机网络(主要是因特网本身)的普及，在线提供的资源和服务的数量大幅增加。

由于这种情况，跨这些网络的网络流量也增加了。因此，供应商需要采用创新的解决方案，以保持他们的活动具有高质量的服务和体验。

交通工程是这些创新解决方案之一。特别是，流量整形和管制是此上下文中最知名的技术。

整形和监管都旨在对给定服务可用的带宽进行建模，并确保传入的网络流量不超过特定限制。

但是，整形和监管机制在它们之间存在一些相关差异，下表总结了这些差异：

![由 QuickLaTeX.com 呈现](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-b6c9624e5ea3600e99c4d138876f6c35_l3.svg)

## 六，总结

在本教程中，我们通过流量整形和监管技术研究了流量工程。首先，我们研究了一些关于流量工程的背景概念。因此，我们专门研究了流量整形和监管。最后，我们在系统总结中比较了这些技术。

我们可以得出总结，随着对计算机网络的需求越来越大，流量工程已经成为资源和服务提供商关注的焦点。因此，与流量工程相关的技术，特别是流量整形和监管，是解决这一需求并保持服务持续在线和高质量工作的绝佳选择。