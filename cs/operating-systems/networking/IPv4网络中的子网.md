## 1. 概述

互联网协议 (IP) 是现代计算机网络中最相关的协议之一。 该协议为机器提供逻辑地址，使它们能够相互通信。多年来，IP 有多个版本和变体，例如 IPv4、IPv6 和 IPsec。但是，由于早期采用，IPv4 仍然是最受欢迎和广泛采用的。

IPv4 的一个基本特征是可以将一个大网络划分为多个较小的网络，这些网络称为子网。 子网是合乎逻辑的，旨在通过减少促进其管理和减少流量开销来提高网络性能。

在本教程中，我们将研究 IPv4 协议的子网。首先，我们将简要回顾一下 IPv4 的主要概念。此外，在这篇评论中，我们将特别分析 IPv4 地址的结构。因此，我们将深入研究 IPv4 的子网，详细说明它们的工作原理，计算特定子网的地址范围，并识别 IPv4 地址类别。

## 2. IPv4 简要回顾

在当前的网络中，IP 使不同的连接设备能够通过网络进行通信。该协议存在于[OSI 模型](https://www.baeldung.com/cs/osi-model)的第三层和 TCP/IP 模型的第二层。 特别是第四版 IP (IPv4) 在 Internet 上被广泛采用。 因此，在本节中，我们将回顾 IPv4 的一些特性。然而，值得注意的是，其他版本的 IP，例如 IPv6 和 IPsec，也在当前网络中发挥着重要作用。

简而言之，IPv4 协议将消息从源地址发送到用 IPv4 地址表示的目的地。因此，在核心网络上完成的路由例程会根据这些地址适当地传递消息。但是，IPv4 地址并不一定代表单个设备。接收特定消息的设备数量取决于所采用的寻址方法。在IPv4中，支持的[寻址方式](https://www.baeldung.com/cs/multicast-vs-broadcast-anycast-unicast)有单播(一对一通信)、多播(一对多通信)和广播(一对多通信)。

[IPv4 地址](https://www.baeldung.com/cs/ipv4-vs-ipv6) 由为每个连接的设备静态或动态定义的四个八位字节(32 位)组成 。 因此，总共有 43 亿个可能的地址。 但是，IPv4 的应用除了源地址和目的地址之外，还需要额外的信息才能在网络上进行通信。此信息与源地址和目标地址一起构成了 [IPv4 标头](https://www.baeldung.com/cs/ipv4-datagram)。因此，IPv4 标头至少有 20 个字节来描述几个强制字段，例如版本、长度、分段偏移量、生存时间、校验和和地址。 

## 3. IPv4 子网

子网包含一种有效分配 IP 地址的方法，从而避免地址浪费并为网络运营商提供更好的管理能力。 换句话说，子网将 IPv4 寻址空间分段以精确地满足特定的地址需求。然而，随着 IETF 于 1993 年发布的 RFC 1517，子网的现代概念出现了，其中提出了无类域间路由 (CIDR)。1993 年之前，IP 地址的分配只考虑五类：A、B、C、D 和 E。

IPv4 类将寻址空间划分为三个静态子网。第一个子网考虑 A 类，它使用 IPv4 地址的第一个八位字节表示网络，其他八位字节表示主机地址。因此，第二个子网由 B 类定义，使用第一和第二个八位位组来建立网络，而第三和第四个八位位组指示主机。最后，最后一个子网属于 C 类，使用网络定义中的前三个八位字节和最后一个八位字节来指定主机。D 类和 E 类又包括分别用于多播和研究目的的特定地址。

下表总结了有关 IPv4 地址类别的信息：

![由 QuickLaTeX.com 呈现](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-77cfad2214dcead18927a115aedcda93_l3.svg)

CIDR 发布后，这五个类仍然是一个参考，但 IPv4 地址的划分和分配变得更加精确，我们将在下面的小节中看到。

## 4.无类域间路由

IETF 提议将 CIDR 作为一种策略来处理 B 类 IPv4 地址的快速耗尽和路由表的过载。在CIDR之前，如果某个公司需要几千个地址，它应该要求B类的地址范围(一个网络)。但是，该公司将收到65534个地址，并且可能会浪费其中的多个地址。然而，使用 CIDR，B 类网络可以细分为几个地址减少的子网，更好地满足特定公司和其他组织的要求。

CIDR 采用可变长度子网映射策略。IPv4 使用的最传统的 CIDR 表示法由 0 到 32 范围内的数字组成，通常称为网络掩码，位于 IPv4 地址之后。将 IPv4 地址与 IPv4 地址分开的符号是斜杠 (/)。

总之，网络掩码代表 IPv4 地址的位数，从定义网络的第一个八位字节的第一位开始。因此，(32 - 网络掩码编号)的结果是位数，从最后一个八位字节的最后一位开始，用于寻址网络中的主机。网络掩码具有二进制 32 位表示，其中网络位的值为 1，主机位为 0。网络掩码的二进制表示用于[计算子网的 IPv4 地址范围](https://www.baeldung.com/cs/get-ip-range-from-subnet-mask)。

下图描述了 CIDR 表示法的示例：

![CIDR](https://www.baeldung.com/wp-content/uploads/sites/4/2021/10/CIDR.png)

需要注意的是，我们可以将 IPv4 地址类映射到 CIDR 表示法。 A、B 和 C 类的网络掩码分别为 /8、/16 和 /24。D 类和 E 类又包含映射到不同网络掩码的地址。

## 5.总结

在本文中，我们了解了 IPv4 网络中的子网。首先，我们简要回顾了 IPv4，概述了它的用途和特点。然后，我们研究了 IPv4 中的子网。我们探索了 IPv4 地址的传统分类，并遵循了向用于定义子网的 CIDR 策略的过渡。最后，我们比较了传统的 IPv4 分类和 CIDR 策略。

我们可以得出总结，子网对于当前 IPv4 网络的管理至关重要。因此，通过子网，可以有效地探索和正确分配 IPv4 的寻址空间。