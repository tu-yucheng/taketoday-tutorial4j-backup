## 1. 概述

超 [文本传输协议](https://www.baeldung.com/cs/rest-vs-http#what-is-http)(HTTP) 是一种广泛使用的通信协议。该协议自 90 年代以来一直在 Internet 上用于实现分布式超媒体信息系统。

为此，HTTP 提供了几种标准方法。这些方法具有 HTTP 系统开发人员必须尝试的属性和目标。但是，某些 HTTP 方法具有非常相似的特征。因此，在将它们编程到 HTTP 系统之前，我们应该仔细分析这些类似的 HTTP 方法。例如，PUT 和 PATCH 的方法具有类似的特性，可能会让我们感到困惑。但是，正如我们将在本文中看到的，它们并不相同。

在本教程中，我们将探索 PUT 和 PATCH HTTP 方法。首先，我们将回顾一下 HTTP。在这篇评论中，我们将特别关注可用的 HTTP 方法及其属性。因此，我们将深入研究 PUT 和 PATCH 方法，获取有关它们的详细说明和一些使用示例。最后，我们对这些方法进行了系统的总结。 

## 2.概述HTTP

HTTP 是一种应用层协议，使客户端和服务器能够通信和交换数据。在操作上，HTTP 在网络层基于 Internet 协议 (IP)，在传输层基于传输控制协议 (TCP)。此外，它采用请求/响应模型。因此，客户端发送请求并等待服务器响应。

简而言之，一个 HTTP 请求包含一个统一资源标识符 (URI) 和所需的方法。此外，如有必要，可以包括请求修饰符和正文内容。反过来，服务器响应包含成功或错误代码以及称为实体的有效负载。

### 2.1. HTTP 方法总结

HTTP 中的请求方法指示对特定资源执行的操作。存在九种方法，其中八种在 HTTP 1.1 的基本文档 ( [RFC 7231](https://datatracker.ietf.org/doc/html/rfc7231#section-4) ) 的上下文中指定，另一种 (PATCH) 在特定文档 ( [RFC 5789](https://datatracker.ietf.org/doc/html/rfc5789#section-2) ) 中指定：

-   OPTIONS：描述资源支持的 HTTP 方法。此外，它通知这些资源选项、要求和参数
-   GET：用于接收有关资源的信息。这样，该方法既可以返回已经可用的数据，也可以触发服务器中的数据生成过程
-   HEAD：仅返回 GET 方法的 HTTP 标头的元信息。这意味着不提供实体的正文内容
-   POST：旨在在请求中发送资源的新实体。因此，服务器将接收到的实体从属于资源
-   PUT：将资源的封闭实体发送到服务器。如果该实体已经存在，则服务器更新其数据。否则，服务器创建一个新实体
-   DELETE：触发资源实体的删除。请求必须通知目标实体
-   TRACE：一种具有调试目的的方法。它将整个请求返回给客户端。通常，网关和代理测试使用此方法
-   CONNECT：用于隧道通信。例如，与支持 SSL 的网站建立连接很有用 
-   PATCH：允许修改资源的实体。因此，它可以应用于仅更改实体数据的特定部分

### 2.2. HTTP 方法属性

HTTP 方法有两个相关的属性：安全性和幂等性：

-   安全：如果一个方法不打算执行一个操作而不是在请求时进行信息检索，那么该方法是安全的。我们可以将安全视为由于方法的处理而不会对服务器产生副作用。但是，如果无论如何发生副作用，它们只是结果，而不是用户的要求。按照惯例，OPTIONS、HEAD 和 GET 是安全方法
-   幂等性：这个属性意味着服务器多次处理同一个请求的副作用等同于处理一次请求。因此，GET、HEAD、PUT、DELETE、OPTIONS 和 TRACE 是幂等方法

## 3.PUT方法

客户端使用 PUT 方法将资源的实体设置到 HTTP 服务器中。 此设置过程又可以以两种形式发生：

-   该实体不存在，服务器为请求的资源创建一个新实体，并用成功代码 201 响应给客户端
-   该实体已经存在；服务器更新实体并向客户端响应成功代码 200 或 204。此外，如果在处理 PUT 请求时发生错误，服务器应使用正确的错误代码响应客户端，通常是 4xx 或 5xx

让我们考虑一个注册保管箱出租人的简单示例。因此，代理人收集有关出租人的信息并发布特定存款箱的首次注册：

![POST2](https://www.baeldung.com/wp-content/uploads/sites/4/2021/11/POST2.png)

一段时间后，保管箱被转移给另一个出租人。于是，代理收集新出租人的信息，并通过一个PUT方法更新存款箱的所有数据：

![PUT2](https://www.baeldung.com/wp-content/uploads/sites/4/2021/11/PUT2.png)

值得注意的是，PUT 方法使用请求中提供的准确信息设置实体。这样，请求必须包含整个实体，而不仅仅是特定字段。但是，一旦保管箱转移给新出租人，预计所有个人信息(或至少大部分)都会发生变化。因此，PUT 非常适合这种情况。

## 4.补丁方法

PATCH 方法将部分修改应用于资源的实体。 PATCH 方法以原子方式执行请求的更改。这意味着如果服务器不能满足所有请求的更改，它不会修改目标实体。这样，如果请求执行成功，服务端返回成功码204给客户端。否则，服务器返回错误代码。

要查看 PATCH 方法使用的具体场景，让我们考虑上一节中提供的示例的一个新案例。一段时间后，保管箱的新出租人更改了她的电子邮件地址。因此，她将新的电子邮件地址告知保管箱代理。反过来，代理通过 PATCH 方法在出租人登记册中执行更新：

![修补](https://www.baeldung.com/wp-content/uploads/sites/4/2021/11/PATCH.png)

与 PUT 方法不同，PATCH 方法允许对实体的特定字段进行数据更新。在我们的示例中，保管箱出租人仅更改了电子邮件信息，而使其余的登记册数据保持不变。因此，PATCH 方法非常适合处理此特定更新。

## 5. PUT 与 PATCH

在某些情况下，很难决定使用 PUT 还是 PATCH。 发生这种情况是因为在这些情况下，PUT 和 PATCH 似乎都达到了相同的最终结果。例如，让我们考虑第三部分中显示的 PUT 请求。在这种特殊情况下，请求 PATCH 方法而不是 PUT 方法将提供等效的结果：请求实体的所有字段都已更新。但是，根据定义，PUT 是幂等的。因此，PUT 是比 PATCH 更具容错性的选项，使其成为所考虑情况的更好选择。

但是，在某些情况下，只需更改请求的方法就会产生不同的结果。例如在第四节的场景中请求PUT方法而不是PATCH会产生信息丢失。在这种情况下，PUT 方法将使除电子邮件数据之外的所有内容都从实体中删除。因此，只有 PATCH 方法足以满足此特定请求案例的目标。

采用 PUT 或 PATCH 方法的决策应考虑它们的特定特性。因此，下表列出了一些可以在此过程中提供帮助的特征：

![由 QuickLaTeX.com 呈现](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-ca2d7abee80de1d1037dfd030493e165_l3.svg)

## 六，总结

在本文中，我们了解了 PUT 和 PATCH 的 HTTP 方法。 最初，我们对 HTTP 协议进行了简要回顾。然后，我们通过理论描述和实例深入分析了PUT和PATCH方法。最后，我们比较了 PUT 和 PATCH 以概述每个更适合的场景。

我们可以得出总结，PUT 和 PATCH 方法有很多相似之处。但是，它们具有在实现 HTTP 服务器然后请求它时必须考虑的特定特征。