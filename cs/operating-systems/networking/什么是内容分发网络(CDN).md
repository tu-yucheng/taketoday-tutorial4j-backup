## 1. 概述

内容分发网络或内容分发网络 (CDN) 是一组服务器，它们在地理上分布在最终用户和网站的主机服务器之间，以提供更快的内容分发。

在本教程中，我们将了解 CDN 及其不同类型、它们的工作原理、优势以及它们可以提供的内容类型。

## 2. CDN 是如何工作的？

CDN 通过最小化内容到达最终用户所需的传输距离来加快内容交付速度。

CDN 由战略性地分布在全球各地的多个存在点 (PoP) 组成。每个 PoP 由多个缓存服务器(也称为边缘服务器)组成，它们缓存网站的内容并将其交付给附近的用户。

例如，如果没有 CDN，网络将如下所示：

![无CDN](https://www.baeldung.com/wp-content/uploads/sites/4/2022/08/Without-CDN-1.png)

但是对于 CDN，网络看起来像这样：

![使用 CDN](https://www.baeldung.com/wp-content/uploads/sites/4/2022/08/With-CDN-1.png)

边缘服务器将网站内容存储在硬盘驱动器 (HDD)、固态驱动器 (SSD) 或随机存取存储器 (RAM) 中。此外，更频繁请求的文件存储在更快的存储介质上。

## 3. 使用 CDN 的优势

使用 CDN 对网站所有者有很多好处。

### 3.1. 使网站加载速度更快

该网站的内容存储在位于全球各地的缓存服务器上。因此，每次终端用户发送请求时，内容都需要经过缓存服务器和终端用户之间的短距离传输，而不是源服务器和终端用户之间的长距离传输。因此，内容可以更快地交付给用户。

### 3.2. 可以处理更多用户

由于其分布式特性，CDN 服务器可以处理比源服务器更多的 Web 流量。结果，更多的用户可以同时访问该网站。

### 3.3. 网站内容更可用

在没有 CDN 的情况下，如果原始服务器出现故障，则在网站所有者修复问题之前，内容将变得不可用。但是如果我们在原始服务器宕机时使用 CDN，内容在边缘服务器上仍然可用，最终用户可以访问它。此外，如果一台或多台 CDN 服务器宕机，其他服务器可以替代它们。结果，内容更可用。

### 3.4. 降低托管成本

Web 托管提供商对传入和传出源服务器的数据量收费。但如果我们使用 CDN，由于内容存储在边缘服务器上，因此与源服务器之间传输的数据较少。因此托管成本降低了。

### 3.5. 更安全

[DDoS](https://en.wikipedia.org/wiki/Denial-of-service_attack) (分布式拒绝服务)攻击是一种尝试通过向源服务器发送来自多个来源的请求来使最终用户无法使用在线服务。但是，CDN 可以通过在边缘服务器之间分配大量请求来处理此类流量，从而减轻原始服务器的负载。

## 4. 什么时候不使用 CDN？

如果网站的大部分流量来自靠近服务器的用户，使用 CDN 实际上会降低网站的性能。

例如，如果我们经营一家小型企业，其网站允许用户在城市内本地互相送花，使用 CDN 意味着数据需要先通过 CDN 网络，然后到达用户。因此，内容传递速度会降低：

![小本生意](https://www.baeldung.com/wp-content/uploads/sites/4/2022/08/Small-Business-1.png)

## 5.内容类型

CDN 可以提供两种类型的站点内容：

### 5.1. 静态内容

静态内容是一种相同的内容，每次交付给用户时都保持不变。

小型作品集网站中的图像、视频和 HTML 文件是静态内容的示例。

老一代 CDN 只能提供静态内容。

### 5.2. 动态内容

动态内容是一种可以根据用户、他们的访问时间、他们的位置和其他因素而改变的内容。此外，动态内容可以在用户与之交互时发生变化。

例如，社交媒体和在线购物网站上传递的内容是动态内容。

与静态内容不同，动态内容是由源站脚本根据用户请求实时生成的。新一代 CDN 可以在边缘服务器内运行脚本并为最终用户生成动态内容。

## 6. CDN 类型

CDN有两种类型：

### 6.1. 推送CDN

在这种类型中，网站所有者需要将内容推送到 CDN 服务器。此外，网站所有者自己需要管理和更新存储在 CDN 服务器上的内容。所以这种类型需要更多的维护：

![推送CDN](https://www.baeldung.com/wp-content/uploads/sites/4/2022/08/Push-CDN-1.png)

### 6.2. 拉取CDN

在这种类型中，边缘服务器根据用户请求从源服务器拉取内容。后续用户将在 CDN 服务器上收到缓存的内容：

![拉取CDN](https://www.baeldung.com/wp-content/uploads/sites/4/2022/08/Pull-CDN-2.png)

这种类型的 CDN 需要较少的维护，因为 CDN 本身会从源服务器提取数据。然而，一个缺点是第一个发送网站内容请求的用户面临延迟，因为 CDN 需要从源服务器提取新数据。

## 七、总结

我们了解了 CDN 及其不同类型、它们的工作原理、优势以及它们可以提供的内容类型。