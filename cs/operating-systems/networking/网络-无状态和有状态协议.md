## 1. 概述

在本教程中，我们将通过示例讨论两种类型的协议：无状态和有状态。

最后，我们将介绍它们之间的核心区别。

## 2. 网络协议介绍

我们可以使用计算机网络中的 OSI 层来描述两个设备之间的通信。它包含 7 层，可帮助发送方将数据传递给接收方。为了传输数据，[OSI 模型](https://www.baeldung.com/cs/osi-model)中的层使用多种网络协议：

![有状态和无状态介绍](https://www.baeldung.com/wp-content/uploads/sites/4/2022/09/Intro-to-Stateful-and-stateless.drawio-1.png)

在网络中，我们可以将协议定义为一组指令，帮助网络内不同设备之间的数据传输。网络中主要有三个使用协议的领域：通信、安全和网络管理。协议的首要任务是让内部结构不同的设备能够高效地相互通信。

网络协议将大进程划分为小功能或任务。此外，我们在网络的每个级别执行部分任务，以使协议能够在网络中顺利运行。

现在，在将数据从一台设备传输到另一台设备时，某些协议不会存储有关正在传输的数据的任何信息。相反，一些协议会跟踪设备之间的所有流量。跟踪数据有助于在出现网络故障或其他中断时重新建立连接。

基于信息存储能力，我们可以将网络协议分为两大类：无状态和有状态。两者各有利弊，但是我们应该为我们的网络选择哪一种取决于具体的需求。让我们仔细看看这两个网络类别。

## 3.无状态协议

无状态协议是一种不依赖于计算机之间先前通信的通信类型。换句话说，无状态协议不会跟踪有关正在发送的数据包的任何信息。这是无状态和有状态协议之间的主要区别。

在无状态协议中，如果两台计算机之间的连接中断，一旦重新建立连接，计算机可以从中断的地方继续。无状态协议最适合简短和间歇性的通信。此外，无国籍通常并不意味着没有国家。它表明状态被保存在别处。无状态应用程序将其状态外部化，而不是将其保存在服务器上。

[我们一般在路由](https://en.wikipedia.org/wiki/Routing)中使用无状态协议。无状态协议的另一个常见用途是[网络地址转换 (NAT)](https://en.wikipedia.org/wiki/Network_address_translation)。在 NAT 中，我们为网络上的计算机分配一个[IP 地址。](https://www.baeldung.com/cs/ipv4-vs-ipv6)这是有益的，因为它降低了复杂性并提高了可伸缩性。

[防火墙](https://www.baeldung.com/cs/firewalls-intro)控制网络访问并防止未经授权访问系统和数据。由于防火墙过滤数据包，这些协议的无状态性质是理想的。

[HTTP](https://www.baeldung.com/cs/popular-network-protocols)是一种无状态协议，因为客户端和服务器仅在当前请求期间进行通信。由于协议的设计，无论是客户端还是服务端都不能保留通过请求各个网站获得的数据：

![HTTP 无状态完全](https://www.baeldung.com/wp-content/uploads/sites/4/2022/09/HTTP-Stateless-Full.drawio.png)

称为[用户数据报协议 (UDP)](https://www.baeldung.com/cs/udp-vs-tcp)的通信协议通常用于在应用程序之间提供低延迟和容错连接，是无状态协议的另一个示例。

## 4.状态协议

状态协议跟踪两台通信计算机之间的所有流量。换句话说，有状态协议会记住每个数据包发生了什么，以便它们可以在网络出现故障时快速重新传输数据包。

当两台计算机长时间通信时，例如使用[虚拟专用网络 (VPN)](https://www.baeldung.com/cs/vpn-traceable) ，我们通常使用状态协议。状态协议有利于网络管理员和网络工程师。它们允许快速重传数据。此外，网络故障期间的数据丢失少于有状态协议。

然而，这些协议比无状态协议更复杂，需要更多的处理能力。此外，状态协议在计算机参与短周期通信的情况下效果不佳。在短周期通信的情况下，每台计算机都必须建立大量信息才能重新建立连接。

有状态应用程序使用已保存的客户端会话数据来执行新事务。它仍然使用数据库进行后端存储。此外，它还在其运行的服务器上存储先前交互的数据。它可以在它有权访问的早期事务的上下文中执行后续事务。

有状态应用程序使用远程会话来保存它们的状态。为了保存状态，所有会话数据都必须保存在服务器上。远程会话是客户端-服务器的变体，旨在降低复杂性或促进客户端组件而不是服务器组件的重用。每个客户端在服务器上启动一个会话，使用多个服务器服务，然后结束会话。服务器是我们存储应用程序状态的地方。

[FTP](https://www.baeldung.com/cs/active-vs-passive-ftp)服务器是有状态应用程序的一个示例。与 FTP 服务器通信时，FTP 服务器的行为类似于有状态 Web 服务。由于 FTP 服务器知道用户的连接状态，因此并非每个请求都需要身份验证：

![文件传输协议](https://www.baeldung.com/wp-content/uploads/sites/4/2022/09/FTP.drawio.png)

## 5. 差异

现在让我们谈谈有状态和无状态协议之间的核心区别：

![由 QuickLaTeX.com 呈现](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-287b068edb978ddae00203cf61edb88c_l3.svg)

## 六，总结

在本教程中，我们讨论了两种类型的协议：无状态和有状态。

此外，我们还介绍了它们之间的核心区别。