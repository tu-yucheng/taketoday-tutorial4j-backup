## 1. 概述

负载平衡器是一种在多个服务器之间分配网络流量的设备或软件。它确保没有单个服务器被请求淹没，这可能导致延迟和停机。负载均衡器很重要，因为它们通过在多个服务器之间平均分配流量来提高应用程序的性能和可用性。这有助于防止瓶颈并改善整体用户体验。

在本教程中，我们将通过一个实际示例了解负载均衡器的工作原理。

## 2. 负载均衡器操作

现在让我们了解一个典型的负载均衡器如何使用实际场景处理大量请求。例如，考虑一个接收大量流量的网站。为了处理所有传入的请求，我们有多个能够为网站内容提供服务的[网络服务器。](https://www.baeldung.com/java-servers)为了在这些 Web 服务器之间平均分配传入流量，我们将使用负载平衡器。

负载均衡器充当“交通警察”。它位于 Web 服务器的前面，并将传入的请求路由到适当的服务器。当客户端(例如用户的 Web 浏览器)向应用程序发送请求时，负载均衡器首先接收该请求。负载平衡器然后使用负载平衡算法来确定哪个 Web 服务器应该接收请求。该算法考虑了诸如每个服务器的当前工作负载、服务器的容量和发送的请求类型等因素。

一旦负载均衡器使用路由算法决定了目标服务器，它就会转发请求。Web 服务器处理请求并将响应发送回负载平衡器。此外，负载平衡器将响应转发给客户端。此过程可确保任何人都无法直接访问 Web 服务器。负载均衡器是访问 Web 服务器并保护我们的基础设施的唯一公共端点：

[![负载平衡器](https://www.baeldung.com/wp-content/uploads/sites/4/2022/12/lb1-1024x624.png)](https://www.baeldung.com/wp-content/uploads/sites/4/2022/12/lb1.png)

因此，将负载均衡器放在这个位置允许它在 Web 服务器之间平均分配传入流量，这可以提高应用程序的性能和可用性。它还允许负载平衡器提供其他好处，例如增加的可扩展性和改进的安全性。

### 2.1. 路由算法

将流量路由到特定服务器的决定是使用路由算法做出的。有两种最流行的路由算法：循环法和最少连接数。

在循环方法中，负载平衡器将传入请求发送到每个服务器。考虑到我们有三台服务器，负载均衡器会将第一个请求发送到第一台服务器，第二个请求发送到第二台服务器，第三次请求发送到第三台服务器，然后开始循环。第四个请求将由第一个服务器提供服务，依此类推。这可确保每个服务器在一段时间内收到大致相等数量的请求。如果任何服务器发生故障转移，负载均衡器将确保不会将任何请求转发到该服务器。

在最少连接方法中，负载平衡器跟踪每个服务器具有的活动连接数。它将传入请求发送到活动连接最少的服务器。例如，考虑一个具有三个 Web 服务器和一个负载平衡器的 Web 应用程序。Web 服务器被命名为服务器 A、服务器 B 和服务器 C，它们各自具有以下数量的活动连接：

[![最少连接算法图解](https://www.baeldung.com/wp-content/uploads/sites/4/2022/12/lc-1024x724.png)](https://www.baeldung.com/wp-content/uploads/sites/4/2022/12/lc.png)

使用最少连接方法，负载均衡器会将请求转发到服务器 B，因为它具有最少的活动连接数。

## 3.负载均衡器的类型

通常，我们根据负载均衡器处理的流量类型对负载均衡器进行分类。负载均衡器的两个主要类别是第 4 层负载均衡器和第 7 层负载均衡器。

第 4 层负载平衡器在[OSI 模型](https://www.baeldung.com/cs/osi-model)的传输层运行，负责根据源和目标 IP 地址以及端口号分配传入流量。此外，这种类型的负载均衡器将流量分配给托管简单、无状态应用程序的服务器，这些应用程序不维护会话信息。这些也称为网络负载平衡器。

第 7 层负载平衡器，也称为应用程序负载平衡器，在 OSI 模型的应用层运行。他们负责根据请求的内容分配传入的流量。这使它们能够提供高级功能，例如应用程序级路由和[SSL/TLS](https://www.baeldung.com/cs/ssl-vs-tls)终止，这对于维护会话状态或需要基于内容的路由的更复杂的应用程序很有用。

我们还可以根据负载均衡器使用的技术类型对负载均衡器进行分类，例如硬件、软件或基于云的技术。此外，我们可以根据它们处理的流量范围将它们分类为全球或区域。

## 4. 优点和缺点

以下是使用负载均衡器的优缺点：

![由 QuickLaTeX.com 呈现](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-4befadb631980f69551b6bcd75da92d7_l3.svg)

## 5.总结

在本文中，我们将深入探讨负载均衡器的工作原理。此外，我们讨论了一些有助于分配负载的路由算法。

总之，负载均衡器是提高网络系统性能和可用性的重要工具。通过在多个服务器之间分配流量，负载平衡器确保没有单个服务器接收到过多的请求。