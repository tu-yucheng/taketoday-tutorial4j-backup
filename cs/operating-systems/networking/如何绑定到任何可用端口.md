## 1. 概述

在本教程中，我们将讨论套接字的基础知识以及如何将任何可用端口绑定到套接字。

## 2. 套接字介绍

计算机网络中的套接字是两个节点相互连接和通信的端点。此外，它还创建双向[FIFO](https://www.baeldung.com/cs/fifo-page-replacement)通信。此外，我们需要在通信的两端创建套接字连接。此外，套接字地址通常包含[IP 地址](https://www.baeldung.com/cs/networking-ip-vs-port)和[端口号](https://www.baeldung.com/cs/networking-ip-vs-port)。

通常，客户端-服务器应用程序使用套接字。在客户端-服务器应用程序中，服务器最初负责创建服务器套接字连接。因此，它连接到一个网络端口地址。另一方面，客户端也创建一个套接字连接并尝试连接到特定的套接字服务器。因此，客户端和服务器之间的数据传输在连接建立后立即开始。

套接字可以分为两类：数据报套接字和流套接字。数据报套接字是无连接的[UDP](https://www.baeldung.com/cs/udp-vs-tcp)套接字。因此，我们不需要建立任何连接来传输数据。数据报套接字的一个例子是邮箱。与数据报套接字相反，基于蒸汽的套接字是面向连接的流[TCP](https://www.baeldung.com/cs/udp-vs-tcp)套接字。因此，我们需要在传输数据之前建立连接。此外，它的工作原理与电话相同。

因此，服务器节点创建 TCP 或 UDP 套接字并在特定端口中侦听特定 IP 地址。接下来，服务器等待客户端连接。此外，客户端可以使用提供的远程 IP 地址、端口号和 TCP/UDP 协议信息连接到服务器。通常，所有主要操作系统都支持套接字。此外，套接字提供类似于计算机网络文件系统的文件描述符。

## 3. Socket编程基础

套接字编程是一种创建和连接套接字以在网络中发送数据的方法。让我们讨论套接字函数的一些基础知识及其在网络中的使用。

函数socket()创建一个新的套接字描述符。bind()函数将套接字附加到本地地址或端口。我们可以使用listen()来指示服务器套接字已准备好接收来自客户端套接字的连接。现在为了了解连接状态，我们使用accept()来提供确认。

一旦我们在客户端和服务器套接字之间建立了连接，我们就可以开始传输数据了。首先，我们使用send()将数据发送到远程机器。类似地，函数receive()用于从远程机器接收数据。最后，当数据传输完成后，我们使用close()来终止连接。

使用命令connect()，我们尝试使用远程 IP 地址和端口连接到服务器套接字。通常，它用于 TCP。但是，在 UDP 中，我们使用sendto()而不建立任何连接。因此，我们跳过 UDP 中的connect()命令。让我们看一下我们讨论的命令摘要：

![由 QuickLaTeX.com 呈现](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-6efc61d41880ee50fd35e53853b45198_l3.svg)

现在让我们看看使用 TCP 中的套接字函数的基于流的套接字连接：

![TCP套接字](https://www.baeldung.com/wp-content/uploads/sites/4/2022/03/TCPSocket.png)

在使用 UDP 协议的基于数据报的套接字连接的情况下，我们不需要使用connect()：

![UDPSocket2](https://www.baeldung.com/wp-content/uploads/sites/4/2022/03/UDPSocket2.png)

## 4.绑定命令

bind 命令将套接字附加到本地端口并保留该端口。此外，bind()函数将套接字描述符s_d作为输入并返回状态作为输出：

![由 QuickLaTeX.com 呈现](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-aadf4fc41f027357d1453a50243387dc_l3.svg)

输入套接字描述符s_d包含套接字流和用于建立套接字连接的协议信息。因此，在调用socket()之后调用 bind 命令以使用套接字描述符附加本地端口。

该命令在服务器端使用，以便客户端可以连接到绑定期间分配的特定端口。因此，服务器进程声明一个特定的端口，通过该端口它可以侦听客户端的请求。此外，绑定命令在同一台机器上本地工作。Bind 提供了一个在服务器中接收数据包的地址。

在这里，我们将服务器套接字绑定到端口 8323 上提到的 IP 地址。此外，绑定调用在 TCP 和 UDP 协议的情况下都是相似的。

## 5. 绑定端口的不同方式

在前面的示例中，我们将 TCP 或 UDP 套接字绑定到特定的硬编码端口 8323。但是，该端口可能已被使用。因此，绑定到硬编码端口并不总是好的。因此，我们可以将此任务委托给一个操作系统，该操作系统可以分配一个随机可用端口进行绑定。

此外，我们可以通过使用端口号 0调用bind()来绑定任何可用端口。因此，如果我们不指定固定端口号，操作系统会从可用端口中提供一个：

![由 QuickLaTeX.com 呈现](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-5dd5cf16ec0861bb6fe7588b2d56a39e_l3.svg)

此外，我们可以从一组可用的端口中生成一个随机端口号。因此，如果我们不想使用特定端口，我们可以使用随机分配的端口号进行通信：

![由 QuickLaTeX.com 呈现](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-31a03c37dd45c1a14e789246e0a734ec_l3.svg)

## 六，总结

在本教程中，我们讨论了套接字和套接字编程的基础知识。具体来说，我们探索了将套接字绑定到不同端口的不同方法。