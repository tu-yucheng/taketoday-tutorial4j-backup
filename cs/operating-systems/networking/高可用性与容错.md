## 1. 概述

在本教程中，我们将研究高可用性和容错之间的异同。 随着计算机网络的扩展和云计算的出现，网络服务在全球范围内流行起来。目前，网络服务已融入日常生活，随时随地都需要。

由于这种普及，提供商必须保持通过网络为客户持续提供服务。为此，这些提供商创建了最低服务可用性协议，并采用容错和恢复故障的技术。

但是，尽管相关概念，高可用性和容错性并不等同。因此，在下一节中，我们将了解背景概念。接下来，我们将特别探讨高可用性和容错。最后，我们将概述所研究的概念，并在系统总结中对它们进行比较。

## 2. 背景

虽然高可用和容错在技术上已经使用了很长时间，但真正推动它们进化的是云计算的普及。

[云计算](https://www.baeldung.com/cs/cloud-vs-distributed-computing#cloud-computing)实际上并不是什么新鲜事物。自 Internet 诞生之初就一直在讨论这个问题。然而，随着多个不同用户广泛创建和访问网络，云变得流行起来。

简而言之，云通过互联网提供多种计算资源。它使利益相关者能够在线托管服务，从而使它们可供多个客户使用。

需要强调的是，在云计算中提供资源可以通过不同的模型发生，例如[基础设施即服务、平台即服务和软件即服务](https://www.baeldung.com/cs/cloud-computing-saas-vs-paas-vs-iaas)。

然而，无论采用何种模式，利益相关者和客户的目标都是在他们需要的确切时刻访问所提供的服务。正是在这里发生了高可用性和容错性：保证网络服务的连续和正确运行。

但是，在讨论高可用性和容错的特殊性之前，让我们先看看它们的一个重要概念： 冗余。

冗余是部署系统组件副本(硬件和软件)的做法。这些副本对于服务的正常运行不是必需的，但对于保证其可用性、检测故障和缓解故障至关重要。

由于这些特征，我们将看到以下部分以多种方式探索冗余。

## 3.高可用性

高可用性指定旨在最大程度地减少系统或服务的停机时间的设计。 因此，高可用性的主要目标是保持这些系统和服务持续可用。

通常，我们通过服务在一年内保证在线和可用的时间百分比来衡量高可用性。最常见的可用性等级是：

-   90%(一九)：一九级代表每年最多停机 36.53 天(约一个月)
-   99%(两个九)：两个九类允许每年最多停机 3.65 天(几天)
-   99.9%(三个九)：三个九等级表示每年最多停机时间为 8.77 小时(几小时)
-   99.99%(四个九)：四个九类每年最多接受 52.6 分钟(不到一小时)的停机时间
-   99.999%(五个九)：五个九级每年最多允许停机 5.26 分钟(几分钟)

当然，还有更严格的高可用类。反过来，这些级别意味着每年的最大停机时间为秒(六个九及以上)或毫秒(八个九及以上)。但是，它们的实施具有挑战性，通常只考虑用于特定的敏感场景。

要计算给定系统的可用性等级，我们可以使用以下等式：

![可用性_{%} = (Elapsed_{time} - Inoperative_{time}) / Elapsed_{time}](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-b24746ff45b82e76397b3e4c57fadddf_l3.svg)

其中![无效_{时间}](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-c22049609f7e2b42f14215bfa4aca987_l3.svg) 表示总停机时间，我们可以假设![经过_{时间}](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-0f296b9803c9e70f38a5f22aee06da14_l3.svg)为：

![Elapsed_{time} = Operating_{time} + Inoperative_{time}](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-0bbb0547414984cea8c0759a637c782d_l3.svg)

天真地说，我们可以说高可用性系统中的 9 的数量越多，它就越好。但是，保证几个九是复杂的，并且意味着高昂的财务成本。因此，最好的高可用性类是满足提供商和客户之间建立的所有协议的类。

### 3.1. 实施高可用性系统和服务

通常，高可用性依赖于一组充当单个系统或服务的组件。 这些组件集通常称为高可用性集群。

高可用性集群在它们之间共享资源。例如，他们可以共享数据库和配置文件。因此，在故障情况或过载情况下，副本是数据一致的，以承担服务并尽快开始工作。

下图描绘了一个简化的高可用系统架构：

![哈](https://www.baeldung.com/wp-content/uploads/sites/4/2022/10/HA.png)

请注意，的系统和服务可能会保持备用模式，仅在主要系统因某种原因发生故障时才使用。通过这种方式，我们将系统故障和系统开始工作之间的时间视为无效时间(根据所需的高可用性等级，该时间往往很短)。

## 4.容错

容错性表示系统即使在发生故障时也能运行的能力。 此外，容错系统可以采用策略在其生命周期内恢复故障组件。

我们可以将故障视为组件的一种情况，这种情况会导致其行为与预期不同。因此，当出现故障时，我们将其称为错误，如果错误危及系统操作，我们就会发生故障事件。

但是，在谈论容错之前，我们应该了解它指的是哪些故障。简而言之，在这种情况下通常会探索三种主要的故障模型：

-   Fail-stop：指组件崩溃故障；组件崩溃意味着它停止工作
-   Fail-silent：指组件遗漏故障；一个组件的遗漏意味着它没有按预期响应(但不一定停止工作)
-   拜占庭：最通用的故障模型，指的是产生可能会或不会再次发生的意外错误的故障；这样，有时系统工作正常，但其他时候(对于相同的场景和输入)，它不

因此，容错系统首先设计用于检测和处理一定数量的故障(考虑到特定模型)，即使组件受损也能提供正确的结果。

由于所呈现的特征，我们期望容错系统具有高可靠性(确信系统按预期工作)、高可用性(保持系统连续运行，如前所述)和高可测试性(检测和诊断故障的能力)通过分析错误和故障)。

### 4.1. 实施容错系统

与高可用性系统类似，容错系统在大多数情况下依赖于协同工作的组件。反过来，这些组件不是作为一个单独的组件工作，而是独立运行，合作收敛到一个联合结果。

这样，容忍![F](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-f5844370b6482674a233a3063f762555_l3.svg)给定组件中的多个故障意味着系统中至少有![n](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-ec4217f4fa5fcd92a9edceba0e708cf7_l3.svg)副本。然而，数字![n](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-ec4217f4fa5fcd92a9edceba0e708cf7_l3.svg)取决于所采用的故障模型，但通常的值为![2f + 1](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-0a1844ac5481e9e57b0c4807f75273fc_l3.svg)和![3f + 1](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-159812ab532f5ea020c3b62ff50a191d_l3.svg)。

在所描述的场景中，所有副本都接收到相同的输入，并且应该处理并提出一个结果。于是，系统再将大多数副本找到的结果作为运算结果。

下图显示了容错 DNS 系统的一个简单示例：

![金融时报](https://www.baeldung.com/wp-content/uploads/sites/4/2022/10/FT.png)

除了前面描述的之外，容错系统还与冗余和多样性一起工作。

对于冗余，我们的意思是让副本准备好立即替换故障组件。然而，对于多样性，我们的意思是部署单个组件规范的不同实现，从而降低特定故障的可能性。

由于所有这些特性和要求，容错自然意味着具有高资本成本的复杂系统。

## 五、系统总结

在现代网络中，通常通过 Internet 在线提供多种服务。 在许多情况下，供应商需要为客户持续提供这些服务，即使是快速中断也可能导致灾难性后果和巨大的经济损失。

但是，保持联网服务持续可用是一项具有挑战性的任务。因此，已经提出了几种关于高可用性和容错的策略和技术来应对这一挑战。

但是，需要强调的是，高可用性和容错不是同一个概念。

高可用性是指一种系统设计，旨在最大限度地减少停机时间，无论发生停机的原因如何。反过来，即使出现一定数量的故障，容错系统也可以继续工作。

这样一来，容错系统并不一定就是高可用系统，高可用系统也不一定就是容错系统。但是，高可用性和容错性可以很好地协同工作以创建健壮的系统和服务。

下表比较了高可用和容错的一些特性：

![由 QuickLaTeX.com 呈现](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-7c4f698f15bfc3e713fee7f943fcb98d_l3.svg)

## 六，总结

在本教程中，我们研究了高可用性和容错。最初，我们研究了一些与高可用性和容错系统相关的背景概念。之后，我们看到了在当前网络系统中实现高可用性和容错的定义和要求。最后，我们在系统总结中比较了分析的系统设计。

我们可以得出总结，由于网络和互联网的普及和扩展，多种服务正在转移到网络世界。其中一些服务执行敏感操作，这些操作必须持续可用。在这样的背景下，高可用性和容错是非常适合这些服务的系统设计，从而使这些设计成为现代必需品。