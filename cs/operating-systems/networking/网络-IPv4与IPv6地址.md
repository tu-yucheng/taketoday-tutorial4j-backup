## 1. 概述

互联网[协议](https://www.baeldung.com/cs/popular-network-protocols)(IP) 负责将数据包从源设备传送到目标设备。该协议有两个版本——互联网协议版本 4 (IPv4) 和互联网协议版本 6 (IPv6)。在这两个版本中，IPv4 是最古老、使用最广泛的 IP 地址格式。IPv6 是 IPv4 的后继者，因为后者对其可以提供的 IP 地址数量有限制。

在本教程中，我们将介绍 Internet 协议、IPv4 和 IPv6 地址类型，并对这两种变体进行简要比较。

## 2.IP地址

Internet 协议地址称为 IP 地址，任何连接到 Internet 的设备都需要 IP 地址。它可以让我们识别设备或网络接口，还可以跟踪连接到互联网的设备的位置。打个比方，我们可以将 IP 地址比作某个地区的街道地址。有了地址，就可以寄信或到达目的地。设备中的 IP 地址执行类似的活动。

### 2.1. IP地址解析

IP 地址是一个数字标签，一旦设备连接到互联网进行通信，它就会附加到设备上，并且在网络上是唯一的。互联网使用[域名系统](https://www.baeldung.com/cs/dns-intro)(DNS) 让我们使用单词(即域名)而不是数字标签，因为单词更容易记住。

可以将 DNS 视为包含域名和 IP 地址之间映射的互联网地址簿。例如，一旦我们在浏览器 URL 中键入http://www.baeldung.com，浏览器就会要求 DNS 查找 Baeldung 的 IP 地址。DNS 返回 IP 地址，浏览器连接到提供的 IP 地址。

### 2.2. IP地址的类型

有两种方法可以为设备分配 IP 地址——静态和动态。

静态IP 地址在设备的网络配置中明确指定。顾名思义，配置的是静态IP地址，即使网络配置发生变化，它也不会改变。静态 IP 地址很有用，而设备的地址需要是静态的。

这有几个用例。例如，外部设备，用户可能需要知道设备的 IP 地址以便频繁通信。此外，可以有一个安全配置来将可以通过 VPN 或其他远程访问机制连接的 IP 地址列入白名单。

动态 IP 地址由网络分配给设备并随时间变化。有几种机制可以动态地将 IP 地址分配给设备。最常用的机制之一是动态主机配置协议 ( [DHCP](https://www.baeldung.com/cs/dhcp-intro) )。当设备连接到网络时，DHCP 会自动为设备分配 IP 地址。顾名思义，动态 IP 地址会随着时间的推移而变化，并且可以注意到分配给设备的不同 IP 地址。

## 3.IPv4

Internet 协议版本 4 (IPv4) 是第一个、最古老且使用最广泛的 IP 地址。ARPANET 于 1983 年在生产中使用了这种格式的 IP 地址。

### 3.1. IPv4 地址

它使用 32 位寻址方案来定义[IP 地址](https://www.baeldung.com/cs/get-ip-range-from-subnet-mask)。因此，它允许生成![2^{32}](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-aa395d5309b200ec5e25b7cd900585bd_l3.svg)地址(约 40 亿)。IPv4 地址采用 XXX.XXX.XXX.XXX 形式的点分十进制表示法来表示地址。XXX 可以是 0 到 255 之间的值。例如，IPv4 地址的示例是 172.16.254.1：

![IPV4对IPV6](https://www.baeldung.com/wp-content/uploads/sites/4/2021/02/IPV4vsIPV6-1024x718-1.png)

上图显示了 IPv4 地址的结构。每个 8 位(八位字节)以点分隔，并共同构成一个 32 位地址。

### 3.2. 碎片化

在将数据从源发送到目的地时，实际数据包可以分成多个较小的数据包。这种分段是根据网络层中定义的最大传输单元 (MTU) 完成的。这种将数据包拆分成更小块的过程称为 IP 分段。在 IPV4 寻址方案中，这种分段可以由发送方和中间路由器完成。分段的数据包然后由接收方组装。

## 4.IPv6

Internet 协议版本 6 (IPv6) 是Internet 协议的最新版本。它也被称为下一代互联网协议 (IPng)。IPv6 是一个相对较新的 IP 地址版本，与 IPv6 相比，它的使用仍然不广泛。

### 4.1. 需要 IPv6

需要引入下一版本的IP地址是为了缓解IPv4的缺点。IPv4 的主要问题是地址数量的限制和路由表的增长。![2^32](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-dec82649f222f890358f3c4ce069bf7d_l3.svg)IPv4 使用能够生成唯一地址的 32 位寻址方案。然而，随着网络通信对IP地址的需求不断增加，这个数量根本不够用。

### 4.2. IPv6地址

IPv6 使用 128 位寻址方案，能够生成![2^128](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-47829ddd6b9f295b927ff38f4be6a121_l3.svg)唯一地址 (3.403×10 38 )。这是一个非常大的数字，并且在可预见的未来被认为足够了。如此大量的 IPv6 地址允许为各种目的分配大块地址并聚合以实现高效路由：

![IPv6](https://www.baeldung.com/wp-content/uploads/sites/4/2021/02/IPV6-1024x690-1.png)

上图显示了 IPv6 地址的结构。IPv6 地址的长度为 128 位。每个 16 位用冒号 (:) 分隔。以下是IPv6地址各部分的含义：

-   2：Global Unicast Address Indicator，指的是将消息发送到由唯一地址标识的单个网络目的地
-   001：区域(AFRINIC、APNIC、ARIN、LACNIC、RIPE NCC)
-   0DB8：本地互联网注册机构 (LIR) 或互联网服务提供商 (ISP)
-   AC10：客户
-   FE01：子网
-   0000:0000:0000:0000：64 位扩展唯一标识符 (EUI-64)。这个唯一的 64 位 IP 版本 6 接口标识符 (EUI-64) 直接分配给主机，无需任何手动配置或动态主机配置协议

尽管 IPv4 和 IPv6 都提供 IP 地址，但它们无法相互通信。但是，两者可以在网络中共存。这被称为双栈。隧道是另一种方法，其中在允许发送封装的 IPv6 数据包的 IPv4 区域内创建隧道。

### 4.3. 碎片化

IPV6 寻址方案遵循不同的 IP 分段原则。在 IPV6 中，中间路由器不执行任何分段。如果需要分片，它总是由发送方主机完成。此外，在 IPV6 中，分段标头不是实际 IPV6 标头的一部分。如果需要进行分片，则作为扩展头插入到数据包中。

## 5. IPv4 与 IPv6

现在让我们比较一下 IPv4 和 IPv6 地址。下表总结了各种特性的比较：

| 特征        | IPv4                                                     | IPv6                                                         |
| ----------- | -------------------------------------------------------- | ------------------------------------------------------------ |
| IP 地址大小 | 具有 32 位地址大小                                       | 具有 128 位地址大小                                          |
| 寻址类型    | 数字地址类型。八位字节由点分隔                           | 字母数字地址类型。二进制位由冒号 (:) 分隔                    |
| 碎片化      | 由发件人和转发路由执行                                   | 由发件人执行                                                 |
| 地址配置    | 手动或通过[DHCP](https://www.baeldung.com/cs/dhcp-intro) | 通过 Internet 控制消息协议版本 6 (ICMPv6) 或 DHCPv6 进行无状态地址自动配置 |

## 六，总结

在本文中，我们介绍并比较了两种不同的 IP 地址类型——IPv4 和 IPv6。

我们介绍了 IP 地址及其在设备间网络通信中的用途。然后我们介绍了 IPv4，这是一种广泛使用且占主导地位的 IP 地址类型。随后，引入了 IPv6，即 IPv4 的后继者。

最后，我们根据几个特征对这些地址类型进行了比较。