## 1. 概述

[SemVer](https://semver.org/spec/v2.0.0.html)是一种流行的版本控制方案，大量开源项目使用它来传达版本发布中包含的更改。作为开发人员，了解如何在我们自己的项目中使用 SemVer 以及如何解释特定的版本更改对我们来说很重要。

本教程将提供 SemVer 规范主要概念的指南。

## 2. 为什么软件版本控制很重要？

软件版本控制帮助我们通过唯一的名称和/或编号来识别软件或软件包的状态。版本帮助开发人员跟踪他们正在使用的第三方软件或软件包的变化。

版本控制方案有多种类型，但其中一种流行的方案是 Tom Preston-Werner 在 2013 年提出的[语义版本控制 (SemVer)](https://semver.org/spec/v2.0.0.html)方案，用于指定应如何控制版本编号。

## 3. 什么是 SemVer？

在 SemVer 版本控制方案下，我们的版本控制将采用以下格式：

![截图-2021-03-06-at-20.27.22](https://www.baeldung.com/wp-content/uploads/sites/4/2021/03/Screenshot-2021-03-06-at-20.27.22-2048x715-1-1024x358.png)

其中 x、y 和 z 是整数，数值递增，分别表示 Major、Minor 和 Patch。

SemVer 规范假定使用此方案的项目[必须](https://tools.ietf.org/html/rfc2119)具有公共 API。基于此，让我们从左到右更详细地了解每个部分。

### 3.1. 主要的

当我们引入破坏 API 的新功能时，主版本应该增加，即，当我们向项目添加向后不兼容的更改时，增加此值。当这个数字增加时，我们必须将 Minor 和 Patch 数字重置为0。

例如，如果我们有一个版本为1.2.5的项目，并且我们在 SemVer 方案下引入了重大更改，我们必须将新版本号设置为2.0.0。

### 3.2. 次要的

当我们引入了改变我们的 API 但向后兼容的新功能时，我们应该增加我们的次要版本，即非破坏性更改。如果我们对项目的内部代码进行了实质性更改，我们也可以选择更改次要版本。

同样，当我们更改次要版本时，我们也应该将补丁版本重置为0。例如，更新项目的次要版本2.0.1会将其设置为2.1.0。

### 3.3. 修补

根据 SemVer 规范，我们为向后兼容的错误修复保留补丁更改。补丁更改不应涉及对 API 的任何更改。

### 3.4. 预发布和构建

在补丁版本之后，我们可以在版本中添加一些可选标签，例如预发布标签或内部版本号。

例如，要将一个包标记为预发布，我们必须在预发布标签后添加一个连字符，它可以是一个点分隔的标识符，例如，1.0.0-alpha.1告诉我们这个项目是一个1.0.0的预发布版本标记为alpha.1。预发布标签表明这个版本不稳定，如果我们使用它会有很高的风险。在考虑版本优先级时，预发布版本的优先级始终低于普通版本。

如果我们想要指示该版本的构建，我们可以在补丁(或预发布)之后添加一个以点分隔的构建标识符，并带有 + 号。例如，1.0.0-alpha.1+001。构建元数据不考虑优先级，因此我们可以认为仅构建号不同的两个版本具有相同的优先级。

## 4.开发SemVer

SemVer 规范保留主要版本0.xy用于开发目的。当开始一个新项目时，从0.1.0版本开始初始开发是有意义的，因为它当然会包含功能。SemVer 假定开发版本是不稳定的并且可以随时更改。

## 5. 为什么 SemVer 如此受欢迎？

SemVer 在过去几年中越来越受欢迎。以下是几个原因：

-   这是一个相当简单的方案，可以跟踪变化
-   我们可以通过比较版本立即判断发生了什么样的变化；是破坏性还是非破坏性变化
-   通过检查更新包是主要、次要还是补丁更改，我们可以立即了解我们在更新包时所承担的风险。我们应该始终努力检查我们的代码是否仍在运行，但是如果我们只用一个补丁更改来更新我们的包，我们可以相当有信心这不会破坏我们当前的实现。也就是说，如果包的提供者也勤奋地使用 SemVer
-   SemVer 帮助开发人员避免所谓的依赖地狱。当我们有共享其他依赖项的不同版本的依赖项时，就会发生依赖地狱。SemVer 提供了一种清晰的版本控制方式，可以帮助开发人员解决这些冲突。我们通常通过指定可以使用的可接受版本范围来做到这一点。[npm](https://docs.npmjs.com/cli/v7/configuring-npm/package-json#dependencies)以自动化方式大量使用它来管理在项目中安装 JavaScript 依赖项

## 6. 其他版本控制方案

有许多不同的版本控制方案在使用中。让我们简要地看一下其中的一些：

-   [CalVer——](https://calver.org/)该方案取决于发布日期。它不像 SemVer 方案那么具体，但被Python 包管理器[Pip和](https://pip.pypa.io/en/stable/news/)[Ubuntu等项目使用](https://en.wikipedia.org/wiki/Ubuntu_version_history)
-   [Python 版本控制方案](https://www.python.org/dev/peps/pep-0440/)——定义为识别 Python 发行版的方案。该方案使用五个部分，分别称为 epoch、release、pre-release、post-release 和 development
-   命名版本——一些项目选择用一个唯一的名字来命名他们的版本。例如，Android 有一个有趣的版本名称集合，它们以 Cupcake、Donut 和 Eclair 开头！ 如果需要，我们可以查看[完整的 Android 版本列表](https://en.wikipedia.org/wiki/Android_version_history)
-   [Spring 项目版本命名](https://www.baeldung.com/spring-projects-version-naming)——这是 Spring Framework 和 Sprint Boot 项目中的一种常用方法，并在 SemVer 上扩展了一些额外的标签，例如 RC 表示候选版本，BUILD-SNAPSHOT 表示开发版本

## 七、总结

SemVer 不是唯一的版本控制方法，但它很流行，尤其是在开源项目中。

本教程提供了使用和解释 SemVer 规范的快速指南。SemVer 是一种软件版本控制方案，它指定我们如何以有意义的方式对包进行版本控制。