## 1. 概述

在本文中，我们将讨论函数式编程。我们将定义它的基础和原则，然后将函数式编程与 OOP 进行比较。最后，我们将介绍一些流行的函数式编程语言。

## 2. 编程范式

让我们回顾一下两种基本编程范式的特征——命令式，OOP(面向对象编程)从中发展而来，声明式，它是函数式编程的基础。

### 2.1. 命令式编程

在命令式方法中，程序是改变其状态直到达到目标结果的一系列步骤。这种方法与[冯诺依曼计算机体系结构](https://en.wikipedia.org/wiki/Von_Neumann_architecture)密切相关，其中机器代码中的指令会改变全局状态。机器状态由内存内容和处理器注册表组成。大多数计算机使用此模型。

命令式程序的工作方式类似。赋值语句用于操作存储在内存中的数据。指令按特定顺序执行，并使用这些数据计算所需结果。命令式语言经常使用变量、循环和条件语句等元素。

总而言之，命令式编程最重要的特性是：

-   可变状态
-   逐步执行指令，以及
-   指令的顺序很重要

### 2.2. 声明式编程

声明式方法侧重于期望结果的最终条件，而不是实现它所需的步骤顺序。因此，声明式编写的程序不是一系列语句，而是结果对象应具有的一组属性声明。

声明式软件的特征是：

-   最终结果不依赖于任何外部状态
-   执行之间没有任何内部状态
-   确定性——对于相同的输入参数，程序总是产生相同的结果
-   执行顺序并不总是很重要——它可以是异步的

## 3. 函数式编程原则

函数式编程是声明式编程的一个子集。它还代表了一个独立的编程范例。在函数式编程方法中，开发人员通过组合和应用函数来创建程序。

在本节中，我们将定义函数式编程的核心原则。

为了举例，我们将使用[Scala](https://www.baeldung.com/scala-intro)编程语言。Scala 被认为是一种不纯的函数式语言。它允许我们同时使用 OOP 和函数式风格。然而，它是一种先进且流行的技术，对函数式编程感兴趣的人应该考虑一下。

### 3.1. 一流的功能

函数是函数式编程语言中的基本元素。在这种情况下，我们常说函数是一等公民。虽然，只有满足以下条件，我们才能说功能是一流的：

-   我们可以将一个函数作为参数传递给另一个函数
-   我们可以将一个函数赋给一个变量，就像我们可以将一个值赋给一个变量一样
-   一个函数可以返回另一个函数作为结果

让我们看一个 Scala 中一流函数的简单示例：

```scala
val sum = (a:Int, b: Int) => {a + b}
```

我们将一个将两个数字相加的函数分配给一个名为 sum的变量。

让我们再看一个一等函数的例子：

```scala
def calculation(fun:(Int, Int) => Int) {
  println(fun(10,5))
}
```

我们的计算函数打印作为参数传递的函数fun的结果。fun参数是任何接受两个数字作为参数并返回一个数字作为结果的函数。因此，我们可以将 加、减、乘、除等运算传递给计算。

### 3.2. 纯函数

我们可以说纯函数是数学函数的反映。它有两个基本属性——即引用透明性和无副作用。

第一个属性，引用透明性，意味着对于给定的输入，一个函数总是产生相同的结果，无论它被执行多少次。让我们分析一个将欧元货币转换为美元的简单示例：

```scala
def eurToUsd(eur: Double): Double = {
  eur  getUsdExchangeRate()
}
```

现在，让我们假设getUsdExchangeRate() 函数从一些外部 API 获取美元货币的汇率。众所周知，货币汇率不断变化。

由于函数getUsdExchangeRate()可以在每次执行时返回不同的值，我们也可以从我们的eurToUsd函数得到不同的结果，给定相同的eur输入值。因此，我们的eurToUsd函数不是纯函数。我们可以很容易地将它转化为纯函数：

```scala
def eurToUsdPure(eur: Double, exchangeRate: Double): Double = {
  eur  exchangeRate;
}
```

现在，满足了引用透明性要求。该函数对同一对参数返回相同的结果。例如，传递值10.0和1.5将始终返回15.0。

第二个属性，没有副作用，意味着函数的唯一目的是仅根据传递的参数计算结果。该函数不应改变它之外的任何状态。以下是一些副作用的例子：

-   将输出发送到控制台
-   通过网络发送数据
-   在函数范围之外改变变量
-   将数据写入磁盘

### 3.3. 高阶函数

高阶函数将另一个函数作为参数或返回一个函数作为执行结果。高阶函数广泛用于许多编程语言中。此类函数的著名示例是.map、.filter、.reduce和.forEach。

我们已经在我们的计算方法中看到一个函数将另一个函数作为参数。现在，让我们看一个返回另一个函数结果的函数：

```scala
def hello(name: String) = () => {
  val helloName = () => "Hello, " + name
  helloName()
}
```

在hello函数的范围内，我们定义了一个名为helloName的函数，我们将它作为结果从函数 hello返回。

### 3.4. 不变性

数据在创建后无法更改时是不可变的。 因此，我们无法修改现有值。我们需要创建一个全新的对象来使用新的值。从源代码的角度来看，不可变数据通常：

-   不公开允许更改其状态的方法
-   不能延长
-   不公开可变字段

让我们用一个具体的例子来分析这个概念。我们将看到 Scala 集合如何可变或不可变：

```scala
var mySet = scala.collection.mutable.Set[Int]()
```

我们定义了一个名为 mySet 的可变集。由于它的可变性，我们可以向集合中添加值：

```scala
mySet += 5
```

我们还可以更改集合的引用：

```scala
mySet = scala.collection.mutable.Set(9, 8, 7)
```

让我们看一个不可变集的例子：

```scala
val immutableSet = Set(1, 2)
```

我们无法向该集合添加项目或更改其引用。如果我们尝试，它会导致编译错误。唯一的方法是将具有新值的整个集合到另一个集合：

```scala
val newSet = immutableSet + 3
```

不变性有很多优点，包括：

-   线程安全——没有死锁或数据竞争，不需要同步数据
-   确保有效且恒定的状态——数据只能处于初始化状态
-   避免不必要的或不可预测的参考修改

## 4. 函数式编程与 OOP

### 4.1. 比较

在本节中，我们将了解 OOP 和函数式编程方法之间的区别。

| 功能方法：                                  | 面向对象方法：                          |
| ------------------------------------------- | --------------------------------------- |
| 1. 执行顺序并不总是很重要，它可以是异步的。 | 1. 一个特定的语句执行顺序是至关重要的。 |
| 2. 功能是基本的程序构建元素。               | 2. 对象是数据建模的主要抽象。           |
| 3. 它遵循声明范式。                         | 3. 它遵循命令式范式。                   |
| 4. 它着重于期望的结果及其最终条件。         | 4. 它着重于如何达到预期的结果。         |
| 5. 确保不变性；程序应该是无状态的。         | 5.状态变化是执行的重要环节。            |
| 6. 主要活动是编写新函数。                   | 6. 主要活动是构建、组合和扩展对象。     |

### 4.2. 哪一个更好？

那么一个重要的问题是，哪个更好，选择哪个？

OOP 就是关于尽可能多地反映真实世界对象的建模数据。OOP的核心要素是抽象、封装、继承和多态。函数式编程将程序的数据和行为分开。函数式编程的主要焦点是编写函数来执行特定任务。

当有一组固定的东西时，函数式编程语言通常表现得更好。随着程序的增长，我们可以为现有的东西添加新的操作。当对事物有一组固定的操作时，OOP 语言是一个不错的选择。在 OOP 方法中，我们可以通过添加实现现有方法的新类来扩展代码。

两种范例都有很多优点。因此，大多数现代编程语言都允许开发人员在单个代码库中使用这两种方法。在接下来的部分中，我们将介绍此类技术的一些示例。

## 5. 函数式编程语言

### 5.1. 斯卡拉

[Scala](https://www.baeldung.com/scala-intro)是一种结合了 OOP 和函数方法的通用编程语言。它提供了强大的静态类型系统并运行在 Java 虚拟机上。

### 5.2. 科特林

[Kotlin](https://www.baeldung.com/kotlin-intro)也是一种在 Java 虚拟机上运行的通用编程语言。此外，Kotlin 可以与 Java 完全互操作。

### 5.3. Clojure 语言

[Clojure](https://www.baeldung.com/clojure)是一种功能强大的纯函数式编程语言。它可以在 JVM、CLR (.NET) 和 Web 浏览器上运行。因此，我们可以使用它来开发前端和后端应用程序。

## 六，总结

在这篇文章中，我们讨论了函数式编程范例。我们定义了它的核心原则和可能性。然后，我们将其与流行的 OOP 范例进行了比较，并分析了两者的目的。最后，我们介绍了几个现代函数式编程语言的例子。