## 一、概述

序列化和反序列化是编程中的两个重要概念，可以让对象轻松存储、传输和重构。它们用于各种场景，例如将对象存储在数据库中、通过网络发送对象或在内存中缓存对象。

在本教程中，我们将讨论这两个概念。

## 2.连载

对象具有三个主要特征：身份、状态和行为。状态表示对象的值或数据。

序列化是将对象的状态转换为字节流的过程。然后可以将该字节流保存到文件、通过网络发送或存储在数据库中。字节流表示对象的状态，稍后可以重建以创建对象的新副本。

序列化允许我们保存与对象关联的数据并在新位置重新创建对象。

下面是序列化过程的描述：

![连载图片](https://www.baeldung.com/wp-content/uploads/sites/4/2023/02/Serialization-Image-2.jpg)

要序列化一个对象，程序员必须首先确定一种格式，然后使用适当的工具将对象转换为该格式。

### 2.1. 序列化格式

许多不同的格式可用于序列化，例如[JSON、XML](https://www.baeldung.com/jackson-convert-xml-json)和二进制。JSON 和 XML 是流行的序列化格式，因为它们是人类可读的，并且可以很容易地被其他系统解析。出于性能原因，通常使用二进制格式，因为它们通常比基于文本的格式读写速度更快。

## 3.反序列化

反序列化是序列化的逆过程。它涉及获取字节流并将其转换回对象。这是使用适当的工具解析字节流并创建新对象来完成的。在Java中，ObjectInputStream类可以用来反序列化二进制格式，[Jackson库](https://www.baeldung.com/jackson)可以用来解析JSON格式。

下面是反序列化的样子：

![序列化-反序列化-图](https://www.baeldung.com/wp-content/uploads/sites/4/2023/02/Serialization-Deserialization-Diagram.jpg)

## 4. 存储和传输

序列化和反序列化在编程中很重要，因为它们允许对象在不同系统之间轻松存储和传输。[这在对象必须在不同机器之间传输的分布式系统](https://www.baeldung.com/cs/distributed-systems-guide)或对象必须在[网络服务器](https://www.baeldung.com/cs/application-server-vs-web-server)和网络浏览器之间发送的网络应用程序中特别有用。

例如，Web 应用程序允许用户创建和保存文档。当用户保存文档时，应用程序需要将文档的状态存储在数据库中。

为此，应用程序必须首先将文档对象序列化为字节流，然后将字节流存储在数据库中。稍后，当用户想要打开文档时，应用程序必须从数据库中检索字节流。它首先将字节流反序列化为文档对象，然后将文档显示给用户。

## 5.注意事项/缺点

### 5.1. 表现

序列化和反序列化在计算上可能很昂贵，尤其是对于大型或复杂的对象。将对象转换为字节并返回可能需要大量的时间和资源，这会影响系统的性能。

### 5.2. 平台和语言依赖

序列化和反序列化可以是平台和语言相关的。不同的编程语言和平台可能有自己的序列化和反序列化实现，这会导致在不同系统之间传输数据时出现兼容性问题。

### 5.3. 版本控制

如果序列化数据的格式随时间发生变化，可能会导致版本控制问题。例如，假设应用程序的新版本以不同的数据格式发布。在这种情况下，旧版本可能无法正确反序列化数据，从而导致错误或数据丢失。

### 5.4. 不可序列化的对象

还值得注意的是，并非所有对象都可以序列化。某些对象可能包含无法序列化的资源，例如文件句柄或[网络套接字](https://www.baeldung.com/websockets-spring)。

### 5.5. 安全

了解与序列化和反序列化相关的安全风险很重要，因为恶意制作的字节流可用于利用[程序中的漏洞](https://www.baeldung.com/cs/threat-vs-vulnerability-vs-risk)。

为了减轻这种风险，最好的做法是 使用经过严格审查的库进行序列化和反序列化，并且只对来自可信来源的数据进行反序列化。

### 5.6. 人类可读性有限

序列化数据通常不是人类可读的，因此很难对数据传输或存储过程中出现的问题进行故障排除或调试。

## 6.总结

我们已经了解了序列化和反序列化以及它们的工作原理。我们看到它们在分布式系统、Web 应用程序、缓存以及在数据库或其他数据存储中存储对象方面很有用。

但是，了解序列化和反序列化的安全风险很重要。还要记住使用经过严格审查的库，并且只反序列化来自可信来源的数据。