## 1. 概述

在本教程中，我们将讨论两种流行的过程调用：本地和远程。

我们还将探索它们之间的核心区别。

## 2.程序中的程序

[模块化编程](https://en.wikipedia.org/wiki/Modular_programming)中的过程是包含指令的独立代码。程序指示计算机执行特定程序或执行特定任务。

过程不同于函数、例程或方法，它们在各种编程语言中使用，具有相同的基本作用，即允许程序员或开发人员在程序中多次调用它们。

创建过程代码是为了提高代码效率和可重用性，这是经典[线性程序](https://en.wikipedia.org/wiki/Linear_programming)所缺乏的。此外，在缺乏灵活性和细化的复杂流程中维护解决方案极其困难。结果，它导致有问题的发展。然而，通过简单地调用绑定不同值的过程，我们可以使用一组单独的参数和数据使程序以不同的方式执行。

我们可以用一个 ID 和一段代码来识别一个过程。此外，过程的结构将它与程序中的较大代码分开。通常，这些过程是在程序内或在称为[面向对象编程](https://www.baeldung.com/cs/oop-vs-functional)的代码封装中定制的，这在开发人员社区中很流行且功能强大。但是，在某些情况下，过程包含在外部[库](https://en.wikipedia.org/wiki/Library_(computing))中。

## 3. 过程调用介绍

在算法语言中，过程通常有两个语句：call 和 return。过程调用将控制权从当前进程转移到另一个进程。我们还可以随过程调用传递参数列表。成功执行后，控制返回到调用的初始过程，程序继续执行。

我们可以在程序中编写过程调用语句，方法是声明过程名称，在括号内列出实际参数名称或值，并添加最后一个分号。调用过程时，我们需要非常注意参数。此外，为过程调用传递的参数应与原始声明的参数相匹配。如果 case 不匹配，编译器会抛出错误。

让我们看一个过程调用的例子：

```cpp
procedure Show_Name(First_Name : in String, Last_Name : in String);
```

在这里，我们在包含两个参数的程序中创建了一个过程：First_Name和Last_Name。现在让我们看一个过程调用语句的例子：

```cpp
Show_Name("John", "Michael");

```

在[分布式体系结构](https://en.wikipedia.org/wiki/Distributed_computing)中，过程调用可能遵循其他协议，允许它远程或本地调用过程：![图三角洲](https://www.baeldung.com/wp-content/uploads/sites/4/2022/08/DiagramDelta.png)

## 4.本地过程调用

本地过程调用 (LPC)，也称为本地进程间通信，是线程在未共享内存时进行同步和通信的功能。在 LPC 中，我们可以通过端口以同步和异步通信方式交换消息。操作系统为应用程序的数据交换和过程调用提供内置工具。

[LPC 在Windows 新技术 (NT)](https://en.wikipedia.org/wiki/Windows_NT)中广泛用于内部子系统之间的通信。此外，LPC 的一些应用有助于分离独立进程，而其他应用有助于分离分散的计算机。然而，大多数依赖于 LPC 的应用程序都是基于本地[客户端-服务器架构](https://www.baeldung.com/cs/client-vs-server-terminology)。

此外，在 LPC 中，客户端是从另一个进程或应用程序请求任务的应用程序。服务器是调用的接收方，也是同一台计算机上的应用程序或进程。在应用程序项目中应用 LPC 的方法有很多种。

让我们谈谈一个例子。在第一种情况下，我们假设一个应用程序必须与网络上不同计算机内的其他应用程序进行通信，并且它只依赖于本地程序。在这种情况下，我们可以利用 LPC。

另一个例子是当一个应用程序想要与不同的计算机和操作系统进行通信时。此外，在部署应用程序之后，用户必须与某些应用程序进行通信。在这种情况下，我们可以使用 LPC。

现在让我们探讨一下 Windows 操作系统支持的一些 LPC 机制。第一个功能是文件映射，它处理文件内容并管理进程之间的文件引用共享。第二种机制是 windows 套接字，它允许进程与网络协议([IP](https://www.baeldung.com/cs/ipv4-vs-ipv6)、[TCP/UDP](https://www.baeldung.com/cs/udp-vs-tcp))进行通信。

此外，在 Windows 操作系统中，进程会创建邮槽。它充当进程在本地计算机上相互通信的服务器。最后，使用数据拷贝方式，应用程序在本地计算机上以WM_COPYDATA消息形式协作交换数据。

## 5.远程过程调用

当RPC 客户端调用远程过程时，客户端应用程序中线程的控制被设置在块上并等待服务器的响应。客户端等待响应的特定时间。在预先指定的时间后，连接超时发生。让我们看一下RPC过程：

![ADDSasA.drawio-1](https://www.baeldung.com/wp-content/uploads/sites/4/2022/08/ADDSasA.drawio-1.png)

在远程过程调用启动期间，客户端为 RPC 服务器提供过程的 ID 和参数。发起连接后，客户端将客户端存根发送到服务器。如果服务器繁忙，客户端可能需要等待。

当请求到达服务器时，它会调用一个调度例程，该例程使用从 RPC 客户端接收到的参数来处理过程的执行。一旦服务器完成执行，结果就会返回给客户端，客户端会移除阻塞状态并继续执行指令。另外，当客户端和服务器运行在不同的操作系统上时，windows [ RPC提供了自动数据转换支持。](https://en.wikipedia.org/wiki/Microsoft_RPC)

现在我们来谈谈 RPC 组件。基于 RPC 的应用程序，尤其是服务器端，必须包括四个主要元素：[运行时库](https://www.baeldung.com/cs/runtime-vs-compile-time)、端点映射器、[MIDL 编译器](https://en.wikipedia.org/wiki/Microsoft_Interface_Definition_Language)和名称服务提供程序。

远程过程使用[接口定义语言 (IDL)](https://en.wikipedia.org/wiki/Interface_description_language)提供接口。编译器接收 IDL 接口以生成允许本地过程启动远程调用的存根。我们可以将存根视为便于调用运行时库函数的占位符函数。

因此，提供一个接口使其对去中心化应用程序透明。因此，本地客户端可以像调用本地过程一样自动调用远程过程。此外，MIDL 编译器处理数据转换、网络访问和计算结果。

RPC 允许程序远程调用过程。因此，RPC 为 LPC 提供了必要的功能，可以轻松调用函数并在单台机器或连接到网络的多台机器上的进程之间工作。远程过程调用是通用的，可以发生在不同主机之间或同一主机内。

## 6. 差异

使用过程调用进行通信的进程使用较少的内存。如果本地有程序，我们一般使用LPC。但是，如果应用程序调用远程过程来获取所需的计算，我们将使用 RPC。此外，正如我们之前提到的，RPC 也可以用于启动 LPC。

现在，让我们探讨一下 LPC 和 RPC 之间的核心区别：

![由 QuickLaTeX.com 呈现](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-37f90b00bbff37a218fa0fc84c768984_l3.svg)

## 七、总结

在本教程中，我们讨论了编程中的过程调用。我们探索了过程调用的两种变体：本地和远程。

最后，我们介绍了本地和远程过程调用之间的核心区别。