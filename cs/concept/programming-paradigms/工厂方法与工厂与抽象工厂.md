## 一、概述

在本教程中，我们将讨论工厂模式及其所有风格。这是一种广泛使用的模式，其版本适用于每个特定问题。工厂模式有两种主要类型，工厂模式本身和抽象工厂模式。他们关系密切，目标相似。

此外，我们还有此模式的简化版本，通常被认为是一种习语。但是，重要的是在工厂模式的上下文中讨论它以了解差异和应用。

## 2.工厂方法(工厂成语)

让我们从工厂模式的最简单版本开始：工厂方法。我们想要使用这个习惯用法有两个原因：单一责任原则和代码重复。如果创建和选择实现的代码在我们的业务逻辑中，这就打破了单一责任原则。将实例化逻辑移动到单独的方法或类中可以使代码更简洁。

使用这个习惯用法的另一个原因是为了避免代码重复。在我们的代码库中保持创建对象的代码一致是一个好主意。这也将提供一种在一个地方更改它的便捷方法。从技术上讲，对象本身可以包含一个方便构造的方法：

![img](https://www.baeldung.com/wp-content/uploads/sites/4/2023/03/factorymethod_simple_idiom-e1678038514248-1024x277.png)

但是，可以为此创建一个专用类：

![img](https://www.baeldung.com/wp-content/uploads/sites/4/2023/03/user_factory-1-e1678038880699.png)

这可以通过将代码移动到单独的方法或类中来实现。因为它只是使用干净代码的原则，而不创建工厂的层次结构，所以这被认为是一种编程习惯用法。从技术上讲，拥有多个没有公共接口的工厂仍然被认为是一种习语，尤其是当逻辑与类而不是对象相关联时：

![img](https://www.baeldung.com/wp-content/uploads/sites/4/2023/03/factory_idiom_hierarchy-e1678039172573-1024x321.png)

当一个工厂就足够或不需要运行时多态性时，此技术有助于简单的情况。

## 3.工厂模式

工厂 [模式](https://www.baeldung.com/java-factory-pattern) 类似于 [模板模式](https://en.wikipedia.org/wiki/Template_method_pattern)。但是，它创建一个对象而不是包含业务逻辑。 与前面的习惯用法的主要区别在于此模式使用多态性：

![img](https://www.baeldung.com/wp-content/uploads/sites/4/2023/03/factory-e1678039437678.png)

此模式有两个目标，允许一种方便的方式来更改工厂和创建对象。此外，它还封装了公共对象的创建。此外，工厂可以接受参数，以便在对象创建时非常灵活，并且表现得像构造函数的包装器：

![img](https://www.baeldung.com/wp-content/uploads/sites/4/2023/03/IceCreamFactory-e1678039735608.png)

在上面的示例中，工厂根据传递的参数生产各种产品。虽然我们使用一个简单的值 作为参数，但它可能更复杂并由专用类表示。

## 4. 抽象工厂模式

[抽象工厂](https://www.baeldung.com/java-abstract-factory-pattern)的主要目的 是为不在同一层次结构中的对象创建一个完整的家族。为不同风格或不同型号的家具创建在风格上相互契合的 UI 元素就是这种模式的好例子：

![抽象工厂概述](https://www.baeldung.com/wp-content/uploads/sites/4/2023/03/abstracto-factory-overview-e1672145039737.png)

想象一下，我们想要创建不同的家具组合并确保每件家具都适合该组合：

![img](https://www.baeldung.com/wp-content/uploads/sites/4/2023/03/furniture-factory.png)

一个工厂负责创建一组中的所有产品。这样，通过为应用程序提供工厂，我们可以确保集合不会混淆。此外，它允许仅通过切换工厂实现来更改整个应用程序中产品的实现。

## 5. 抽象工厂与参数化工厂

两个工厂版本经常被混淆：抽象工厂和参数化工厂。原因是他们都生产一套不同的产品。通常，参数化工厂创建的产品因状态而异，但它可以提供不同的实现。

抽象工厂生产一组相关但同时又不同的产品。就面向对象设计而言，这意味着产品将具有不同的接口。上面家具厂的例子就是这种情况。让我们尝试将参数化工厂转变为抽象工厂：

![img](https://www.baeldung.com/wp-content/uploads/sites/4/2023/03/IceCreamFactory-1.png)

尽管我们正在制作不同类型的冰淇淋，但我们对所有冰淇淋都使用相同的界面。这意味着差异对用户是隐藏的，并且对与对象的交互无关紧要。参数化工厂足以解决这个问题，而抽象工厂是解决这个问题的过于复杂的解决方案。

然而，如果这些类型的冰淇淋在它们的界面和行为上有显着差异(我们应该向客户强调这一点)，那么抽象工厂将非常适合它。 在这种情况下，结构看起来像这样，类似于上面家具工厂的例子：

![img](https://www.baeldung.com/wp-content/uploads/sites/4/2023/03/VeganIceCreamFactory.png)

这个逻辑也可以反过来工作。我们可以考虑在同一界面上使用我们的家具件的环境，例如，在交通环境中。这意味着我们可以将最初的抽象工厂转变为参数化工厂，因为我们不需要产品具有不同的接口：

![img](https://www.baeldung.com/wp-content/uploads/sites/4/2023/03/FurniturePiece-1.png)

在选择正确的模式时，我们应该考虑产品及其使用环境。因此，在我们需要明确产品之间差异的地方使用抽象工厂，而在不需要的地方使用参数化工厂。

## 六，总结

在本文中，我们了解了工厂方法、工厂和抽象工厂之间的区别。工厂方法是清理代码并保持代码简单的好工具。工厂帮助我们利用多态性并为未来的变化做好准备。除了前面的好处之外，抽象工厂确保我们正在使用一组相关的对象。

这些类似技术的目标略有不同，不应混淆。这些模式可以使代码不那么复杂，更灵活，并且对每个使用它的人来说更容易理解。但是，了解它们的应用以及每个应用在哪些地方更有用需要时间。