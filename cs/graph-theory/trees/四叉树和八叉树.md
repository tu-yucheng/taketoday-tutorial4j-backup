## 1. 概述

许多计算机科学问题都涉及在区域中拆分一些任意空间。此类任务经常出现在计算机图形学、图像处理、游戏开发和地理空间分析中。

基于位置的服务，例如谷歌地图，必须处理数以百万计的基于空间坐标的查询。一个例子是获取给定区域内的所有超市。但同时为数百万人做到这一点是一项具有挑战性的任务。

这就是四叉树和八叉树成为现代软件开发中的基本数据结构的原因。它们提供了一种分解和查询几乎所有空间信息的最佳方式。在本教程中，我们将探讨这些结构的工作原理以及它们为何如此有用。

## 2. 一维情况

在深入理论之前，让我们热身并思考一个简单的问题。让我们尝试从区间 1 到 6 划分一维数字线。这里的目标是最终得到一个结构，该结构将允许有效地查找区间。

由于数字行已经排序，分割空间的最有效方法是从中间切开。如果我们递归地这样做，我们可以将数据存储在[二叉树](https://www.baeldung.com/cs/binary-search-trees)中，并将分割区域作为节点：

![img](https://www.baeldung.com/wp-content/uploads/sites/4/2023/01/bst.png)

这种结构确实允许我们在数轴区间上进行[快速](https://www.baeldung.com/cs/balanced-bst-search-complexity)查找。这很好，但有人可能想知道我们如何将这个概念推广到二维或更多维度。

## 3.二维案例

例如，假设我们有一些点散布在 2D 平面周围。目标保持不变——有效查找点，但这次是在某个二维区域。为了达到类似的性能，我们可以再次使用递归拆分。我们只需要将它应用于两个轴而不是一个轴。为此，每次拆分都必须始终产生![2^2=4](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-ad15bf10364b7550b6defb9e175007ca_l3.svg)相等的象限或子象限。由此产生的分区空间可以很容易地可视化：

![img](https://www.baeldung.com/wp-content/uploads/sites/4/2023/01/quad-300x273.png)

为了存储子象限，我们再次使用一棵树，但这次每个节点将恰好有四个子节点，每个子节点代表每个子象限，如果它是叶节点，则没有子节点。这就是为什么它被称为四叉树。

### 3.1. 构建四叉树

要构建这样的四叉树，我们首先需要定义一些数据结构，例如包含 x 和 y 坐标的 2D 点以及用作边界的边界框：

![由 QuickLaTeX.com 呈现](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-32405143ec37e35732f05ba93d444a2c_l3.svg)

然后我们可以定义四叉树类本身并确定每个子象限可以拥有的最大点容量。然后我们可以从一个单位正方形作为树的根开始，递归地在树内部插入点。如果尚未达到容量并且该区域没有细分，我们将插入该点。否则，我们细分并递归地将点添加到接受它的任何节点：

![由 QuickLaTeX.com 呈现](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-44f0b88564fbdee40f40ce1bde2ff163_l3.svg)

## 4.三维案例

即使我们向上一个维度并且有位于 3D 空间中的点，例如在真实世界的物理模拟中，我们也可以应用相同的技巧。变化不大。我们可以递归地细分空间并最终得到一个称为八叉树的树结构。这次唯一的区别是树必须准确地具有![2^3=8](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-370ba2a810fb3b8530bbe962cc036d6f_l3.svg)描述每个八分圆区域的节点：

![img](https://www.baeldung.com/wp-content/uploads/sites/4/2023/01/oct.png)

## 5.总结

在本文中，我们研究了递归分裂树背后的原理，即四叉树和八叉树。通过说明性示例，我们解释了是什么使这些数据结构成为许多计算机科学领域的有效选择。