## 1. 概述

在本教程中，我们将了解如何在二进制数组中找到最大的平衡子数组。

## 二、问题描述

给定一个仅由 0 和 1 组成的二进制数组![mathbf {A}](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-3b600a7372ade4afc7ab8fd7fb2a6d07_l3.svg)，找出具有相等数量的 0 和 1 的连续子数组的最大长度。例如，如果数组为![{0, 1, 1, 0, 1, 1, 1, 0}](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-6c473455acae4e17287cb6c8e327c963_l3.svg)，则平衡子数组的最大长度为 4。另外，相关的平衡子数组为![{0, 1, 1, 0}](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-1dfcf353dca6af4d08049b6106362341_l3.svg)。

## 3.蛮力方法

假设数组的数字索引以![一种](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-816b613a4f79d4bf9cb51396a9654120_l3.svg)开头![0](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-8354ade9c79ec6a7ac658f2c3032c9df_l3.svg)，即![A = {A[0], A[1], ..., A[n-1]}](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-2ed952481db8c8dabbe322a257c88a6a_l3.svg)。我们可以探索每个可能的子数组并计算每个子数组中 0 和 1 的数量： 

![由 QuickLaTeX.com 呈现](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-f80cbea34f17bf0a9d49cef8e24701ac_l3.svg)

该算法使用两个嵌套循环遍历 的所有可能子数组![一种](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-816b613a4f79d4bf9cb51396a9654120_l3.svg)。外层循环定义了子数组的起始位置![一世](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-31318c5dcb226c69e0818e5f7d2422b5_l3.svg)。内部循环定义了从位置![j](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-b09880662630fc49b25d42badb906d51_l3.svg)开始的子数组的结束位置![一世](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-31318c5dcb226c69e0818e5f7d2422b5_l3.svg)。在每次迭代中，我们计算子数组中 0 和 1 的数量。如果我们看到相同数量的 0 和 1，我们检查子数组大小并记录最大的一个。

由于我们在数组上有两个嵌套循环![一种](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-816b613a4f79d4bf9cb51396a9654120_l3.svg)，因此该算法的总体时间复杂度为![O(n^2)](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-894959b13d80157796705e7eafb4d243_l3.svg)，其中![n](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-ec4217f4fa5fcd92a9edceba0e708cf7_l3.svg)是数组中元素的数量![一种](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-816b613a4f79d4bf9cb51396a9654120_l3.svg)。此外，空间要求是![O(1)](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-66c97a4dfb9f2e2983629033366d7018_l3.svg)因为我们只使用恒定数量的变量，例如![零计数](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-ddb9eee65c7945d356321a6584421ad5_l3.svg)和![一次计数](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-87298eb9abbc26eb3ffa2a952cf0ffb8_l3.svg)。

## 4 . 哈希表方法

我们可以使用一个![柜台](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-49b7a81f3019dc238583bccf5a90af17_l3.svg)变量来存储到目前为止在遍历数组时遇到的 1 和 0 的相对数量。在每次迭代中，如果我们看到 ，我们![柜台](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-49b7a81f3019dc238583bccf5a90af17_l3.svg)就会![1](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-69a7c7fb1023d315f416440bca10d849_l3.svg)增加![1](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-69a7c7fb1023d315f416440bca10d849_l3.svg)。否则，我们![柜台](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-49b7a81f3019dc238583bccf5a90af17_l3.svg)减少![1](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-69a7c7fb1023d315f416440bca10d849_l3.svg)。

假设![柜台](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-49b7a81f3019dc238583bccf5a90af17_l3.svg)值![米](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-fdc40b8ad1cdad0aab9d632215459d28_l3.svg)在 position ![一世](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-31318c5dcb226c69e0818e5f7d2422b5_l3.svg)。后来，我们在 position 遇到了相同的值![j](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-b09880662630fc49b25d42badb906d51_l3.svg)。然后，我们在遍历期间有相同数量的增量和减量。因此，从一个位置![我+1](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-a258e12925a4dc6cf06bc5ebeecab610_l3.svg)到另一个位置的子数组![j](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-b09880662630fc49b25d42badb906d51_l3.svg)包含相同数量的零和一。此外，相应子数组的长度为![(j - i)](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-63def638fa2ece383adae091d1ed949f_l3.svg)。

例如，如果数组是![{0, 1, 1, 0, 1, 1, 1, 0}](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-6c473455acae4e17287cb6c8e327c963_l3.svg)，我们可以进行以下![柜台](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-49b7a81f3019dc238583bccf5a90af17_l3.svg)值更改：

![由 QuickLaTeX.com 呈现](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-edc82b3809e3e1e59d1f13fc22ae7d37_l3.svg)

我们从![柜台](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-49b7a81f3019dc238583bccf5a90af17_l3.svg)值开始![0](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-8354ade9c79ec6a7ac658f2c3032c9df_l3.svg)。如果以后在 index 位置再次![柜台](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-49b7a81f3019dc238583bccf5a90af17_l3.svg)变为，则从起始 index到当前 index的子数组是一个平衡数组。此外，子数组的长度为。因此，我们将 index与value相关联。这样，我们可以很容易地通过减去两个索引来计算子数组的长度。![0](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-8354ade9c79ec6a7ac658f2c3032c9df_l3.svg)![j](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-b09880662630fc49b25d42badb906d51_l3.svg)![0](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-8354ade9c79ec6a7ac658f2c3032c9df_l3.svg)![j](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-b09880662630fc49b25d42badb906d51_l3.svg)![j+1](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-7caa0556981b3780bc707acf340d58b2_l3.svg)![-1](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-37abf2e602a43ae0ff9f12b1536fa74c_l3.svg)![柜台](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-49b7a81f3019dc238583bccf5a90af17_l3.svg)![0](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-8354ade9c79ec6a7ac658f2c3032c9df_l3.svg)

在我们的示例中，我们再次在索引和处遇到![0](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-8354ade9c79ec6a7ac658f2c3032c9df_l3.svg)两次，对应的数组长度为和。此外，我们在 index 处看到了价值，并在index处再次遇到它。因此，从索引到的子数组也是一个长度为 的平衡数组。同样，我们有另一个平衡数组，从索引到我们遇到两次。总体而言，最大平衡阵列长度为. 相应的子数组从 index 开始，到 index结束，即.![1](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-69a7c7fb1023d315f416440bca10d849_l3.svg)![3](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-ce2009a45822333037922ccca0872a55_l3.svg)![2](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-8c267d62c3d7048247917e13baec69a5_l3.svg)![4](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-d4d95642629f734574671d47307d46c3_l3.svg)![柜台](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-49b7a81f3019dc238583bccf5a90af17_l3.svg)![1](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-69a7c7fb1023d315f416440bca10d849_l3.svg)![2](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-8c267d62c3d7048247917e13baec69a5_l3.svg)![4](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-d4d95642629f734574671d47307d46c3_l3.svg)![3](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-ce2009a45822333037922ccca0872a55_l3.svg)![4](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-d4d95642629f734574671d47307d46c3_l3.svg)![2](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-8c267d62c3d7048247917e13baec69a5_l3.svg)![7](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-9d8e16e2c1790d6af563225a9318d119_l3.svg)![8](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-e4888e98f77eb93ff65bfecac28d3c5e_l3.svg)![3](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-ce2009a45822333037922ccca0872a55_l3.svg)![4](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-d4d95642629f734574671d47307d46c3_l3.svg)![0](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-8354ade9c79ec6a7ac658f2c3032c9df_l3.svg)![3](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-ce2009a45822333037922ccca0872a55_l3.svg)![{0, 1, 1, 0}](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-1dfcf353dca6af4d08049b6106362341_l3.svg)

### 4.1. 哈希表

基于以上观察，我们可以使用[哈希表](https://www.baeldung.com/cs/hash-table-vs-balanced-binary-tree#1-hash-table)来存储所有可能的![柜台](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-49b7a81f3019dc238583bccf5a90af17_l3.svg)值。哈希表的每个条目都包含一对![(核心价值)](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-f6bfd08f124a25444f20df62259fb379_l3.svg)。我们可以使用![柜台](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-49b7a81f3019dc238583bccf5a90af17_l3.svg)key 和对应的索引位置作为入口值。如果![柜台](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-49b7a81f3019dc238583bccf5a90af17_l3.svg)再次遇到相同的情况，我们可以使用索引来计算子数组的长度：

![由 QuickLaTeX.com 呈现](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-a9e906009158a7b6b55d8c1605e369a1_l3.svg)

在这个算法中，我们首先初始化一个空的哈希表。然后，我们创建一个![柜台](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-49b7a81f3019dc238583bccf5a90af17_l3.svg)初始值为 的变量![0](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-8354ade9c79ec6a7ac658f2c3032c9df_l3.svg)。![(0, -1)](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-a3fd54bb13abc9d71808cc6b8024068c_l3.svg)此外，我们为值 0添加哈希表条目。![柜台](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-49b7a81f3019dc238583bccf5a90af17_l3.svg)在每次迭代中，我们![柜台](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-49b7a81f3019dc238583bccf5a90af17_l3.svg)根据数组编号值将值增加或减少 1。此外，如果我们看到哈希表包含该![柜台](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-49b7a81f3019dc238583bccf5a90af17_l3.svg)值，我们会计算子数组大小并记录最大值。

由于我们只遍历数组一次，因此该算法的总体时间复杂度为![mathbf{O(n)}](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-741f7395066a81a8ae02eb91d3847163_l3.svg)。![在)](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-f8d599809b2f7987726c648086c1981d_l3.svg)但是，如果所有元素都为 1 或 0，则哈希表的最大大小。因此，空间要求为![在)](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-f8d599809b2f7987726c648086c1981d_l3.svg)。

## 5.总结

在本教程中，我们展示了两种算法来查找二进制数组中的最大平衡子数组。蛮力方法需要![O(n^2)](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-894959b13d80157796705e7eafb4d243_l3.svg)时间来解决![O(1)](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-66c97a4dfb9f2e2983629033366d7018_l3.svg)空间问题。我们还可以使用哈希表的方法来解决这个问题，性能更好![在)](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-f8d599809b2f7987726c648086c1981d_l3.svg)但![在)](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-f8d599809b2f7987726c648086c1981d_l3.svg)空间更大。