## 1. 概述

在本教程中，我们将学习如何从任何文本数据中查找和提取日期、时间和地址。

无论我们需要处理电子邮件、文档还是任何其他文本语料库，逻辑都是相同的。这个任务是一个经典的NLP任务，在实践中非常常见。

它可以包括构建一个自动化系统，用于从电子邮件中提取日期时间、从大量文档中提取客户和客户的地址，以及类似的其他过程。

## 2.命名实体识别(NER)

[命名实体识别 (NER)](https://www.baeldung.com/cs/automatic-keyword-keyphrase-extraction#4-named-entity-recognition-ner)是一个目标是查找和分类文本中提到的命名实体的问题。这些实体被分类到预定义的类别中，例如人名、组织、位置、地址、时间表达等。这个问题是机器学习领域内自然语言处理(NLP)领域的一部分。

在过去的 10 年里，对命名实体识别进行了大量的研究。我们现在可以见证更复杂的方法，如基于[transformer](https://www.baeldung.com/cs/transformer-text-embeddings)的 GPT-3、BERT 等，如何开始在解决每个与 NLP 相关的问题中占据主导地位。[他们甚至能够根据注释编写函数代码。](https://www.youtube.com/watch?v=x_Yw2f161CU)

NER 也不例外。首先，我们将描述解决此问题的更多经典方法。然后我们将学习如何利用变压器的力量，并提供一个真实的例子。

## 3. 基于规则的解析器

基于规则的解析器是一种算法，它使用一组通常具有硬编码部分的指令来定义。一般的解析方法同时使用词法分析器和语法分析器。词法分析器将单词分解成它们的组成字符，而语法分析器根据语言结构确定这些字符的含义。

在我们的例子中，当日期、时间和地址的格式在整个语料库中保持一致时，这种方法可能会有用。因此，我们不需要使用更复杂和时间复杂的方法。

例如，如果我们的文档大部分时间的日期格式为dd-mm-yyyy ，那么我们可以轻松定义一个由[正则表达式或 regex](https://en.wikipedia.org/wiki/Regular_expression)构造的解析器。它们在每种编程语言中都或多或少相似。此外，我们可以定义一个带有关键字的字典来识别我们的实体。

例如，地址提取关键字可能是street或st。

总而言之，当问题很简单并且通常可以使用规则或关键字轻松定义时，我们建议使用这种方法。这种方法是最快的，不需要设置额外的包或依赖项。

## 4.分类器

解决这个问题的一种有趣方法是构建机器学习分类器。例如，我们可以将问题定义为二元分类，目标是将单词分类为地址或非地址。同样，问题的草图可能是多类分类，包括日期、时间、地址和其他类。

对于此解决方案，第一步是构建特征。这些特征可能包括当前词的一些统计指标，或者邻域词的指标。例如，让我们考虑以下句子：

“在华尔街，金融业于 1792 年 5 月 17 日正式开始。”

第一步是将句子拆分为标记(单词)，其中每个标记代表分类器数据集的一个样本(行)。在特征工程方面，我们需要非常有创意，尝试构建尽可能多的不同特征。可能表示的一些特征包括单词中字母或符号的数量、是否有大写字母、是否有数字或关键字等。此外，标签或目标是单词的类别。

在我们的例子中，具有上述句子特征的数据集如下所示：

![由 QuickLaTeX.com 呈现](https://www.baeldung.com/wp-content/ql-cache/quicklatex.com-78bfbd43f61f4b387bf074816c343a01_l3.svg)

总而言之，如果有大量文本，分类器可以在训练期间识别模式，则此方法可能会提供良好的结果。

此外，我们应该注意，由于特征工程和训练之间的迭代过程，这种方法可能需要更多时间来解决。

## 5.变形金刚

Transformers 是 NLP 中的创新架构。现在，它们几乎用于所有需要对文本进行语义理解的文本相关任务。简而言之，它们是具有注意力机制的神经网络，在没有监督的情况下使用大量文本语料库进行训练，然后针对特定任务进行微调。BERT(Bidirectional Encoder Representations from Transformers)模型是最受欢迎的转换器之一。

尽管所有这些听起来都非常复杂，但由于日益流行和使用最多的 NLP 库[Hugging Face](https://huggingface.co/) ，如今 BERT 的使用得到了简化。我们甚至可以在现场尝试他们的一些模型进行令牌分类，其中提供了用于推理的 API。我们的想法是采用现有模型并直接使用它，或者另外根据我们的目的对其进行微调。

一般来说，当我们需要提取一些特定的术语时，例如医学术语、蛋白质名称或化学材料名称，这种方法会非常有用。但是，为此，我们需要为模型微调添加注释文本。

## 6.混合模型

那么为什么不将前面提到的一些方法组合到一个模型中。基本上，这是来自流行的 NLP 库[spaCy](https://spacy.io/)的 NER 模型。它使用神经网络分类器，具有 POS 标签、前缀、后缀和其他由词嵌入向量支持的统计属性等特征。

因此，我们可以使用几行代码轻松测试此模型：

![宽敞的](https://www.baeldung.com/wp-content/uploads/sites/4/2021/09/spacy.png)

虽然它不能识别地址或街道名称，但我们可以看到它成功地找到并提取了其他实体，例如日期、时间、事件、组织、地缘政治实体和人名。

## 七、总结

在本文中，我们研究了解决命名实体识别问题的几种方法。一般来说，没有一个正确的解决方案，而且方法在很大程度上取决于我们任务的复杂性。

我们需要知道是只需要使用正则表达式提取日期，还是使用转换器提取多个实体。有一件事是肯定的，有几种不同的方法，并且有大量关于这个主题的信息。